{"version":3,"file":"carousel.min.js","sources":["../../../packages/carousel/src/config.js","../../../packages/carousel/src/core.js","../../../packages/carousel/src/carousel.js"],"sourcesContent":["// Configuration for attribute names and scope identifiers\nexport const SWIPER_CONFIG = {\n  attributePrefix: 'data-swiper',\n  attributes: {\n    root: 'root',\n    swiper: 'swiper',\n    wrapper: 'wrapper',\n    slide: 'slide',\n    bulkJson: 'options',\n  },\n  scope: {\n    attrName: 'data-swiper-root-id',\n    valuePrefix: 'swiper-root-',\n  },\n};\n\n// The attribute values for module elements (e.g. SwiperJS's navigation.nextEl – the next button – is [data-swiper-navigation=\"next\"])\nexport const SWIPER_MODULE_ATTRIBUTE_SELECTORS = {\n  navigation: {\n    nextEl: 'next',\n    prevEl: 'prev',\n  },\n  pagination: {\n    el: 'el',\n  },\n  scrollbar: {\n    el: 'el',\n  },\n};\n\n// Prefix for all console logs\nexport const SWIPER_LOG_PREFIX = '[Carousel]';\n\n// Maps friendly shorthand names to Webflow's default breakpoint pixel values\n// These are min-width pixel values.\n// Swiper will apply the changes at the breakpoint value and upwards, and the default value (without breakpoints) is applied at the smallest breakpoint, kinda like Tailwind.\n// TODO: Survey people on how they want the breakpoint surveys to act: mobile-first (like SwiperJS expects) or desktop-first (like Webflow expects)?\nexport const SWIPER_BREAKPOINT_SHORTHANDS = {\n  desktop: '992', // Desktop and above\n  tablet: '768', // Tablet and above\n  'mobile-landscape': '480', // Mobile landscape and above\n  mobile: '0', // Mobile portrait and above\n\n  // mobile: '767', // Alias for mobile-landscape\n  // phone: '0', // Alias for mobile-portrait\n};\n\n// ------------------------------------------------------------\n// Note to self: Don't change anything below here\n// ------------------------------------------------------------\n\n// Mandatory classes required by SwiperJS's expected structure that this script abstracts and adds to the DOM\nexport const SWIPER_STRUCTURE_CLASSES = {\n  swiper: 'swiper',\n  wrapper: 'swiper-wrapper',\n  slide: 'swiper-slide',\n};\n\n// All the SwiperJS modules (here so we can parse the data-swiper-* attributes for them)\nexport const SWIPER_MODULE_ATTRIBUTE_KEYS = [\n  'a11y',\n  'autoplay',\n  'controller',\n  'cards-effect',\n  'coverflow-effect',\n  'creative-effect',\n  'cube-effect',\n  'fade-effect',\n  'flip-effect',\n  'free-mode',\n  'grid',\n  'hash-navigation',\n  'history',\n  'keyboard',\n  'mousewheel',\n  'navigation',\n  'pagination',\n  'parallax',\n  'scrollbar',\n  'thumbs',\n  'virtual',\n  'zoom',\n];\n\n// Params that are allowed to be passed in via attributes on the root element\n// Note: Swiper uses _ prefix to mark \"watchable\" params, but we don't need that for our use case, so the underscores have been removed\nexport const SWIPER_ALLOWED_PARAMS = [\n  'eventsPrefix',\n  'injectStyles',\n  'injectStylesUrls',\n  'modules',\n  'init',\n  'direction',\n  'oneWayMovement',\n  'swiperElementNodeName',\n  'touchEventsTarget',\n  'initialSlide',\n  'speed',\n  'cssMode',\n  'updateOnWindowResize',\n  'resizeObserver',\n  'nested',\n  'focusableElements',\n  'enabled',\n  'width',\n  'height',\n  'preventInteractionOnTransition',\n  'userAgent',\n  'url',\n  'edgeSwipeDetection',\n  'edgeSwipeThreshold',\n  'freeMode',\n  'autoHeight',\n  'setWrapperSize',\n  'virtualTranslate',\n  'effect',\n  'breakpoints',\n  'breakpointsBase',\n  'spaceBetween',\n  'slidesPerView',\n  'maxBackfaceHiddenSlides',\n  'grid',\n  'slidesPerGroup',\n  'slidesPerGroupSkip',\n  'slidesPerGroupAuto',\n  'centeredSlides',\n  'centeredSlidesBounds',\n  'slidesOffsetBefore',\n  'slidesOffsetAfter',\n  'normalizeSlideIndex',\n  'centerInsufficientSlides',\n  'watchOverflow',\n  'roundLengths',\n  'touchRatio',\n  'touchAngle',\n  'simulateTouch',\n  'shortSwipes',\n  'longSwipes',\n  'longSwipesRatio',\n  'longSwipesMs',\n  'followFinger',\n  'allowTouchMove',\n  'threshold',\n  'touchMoveStopPropagation',\n  'touchStartPreventDefault',\n  'touchStartForcePreventDefault',\n  'touchReleaseOnEdges',\n  'uniqueNavElements',\n  'resistance',\n  'resistanceRatio',\n  'watchSlidesProgress',\n  'grabCursor',\n  'preventClicks',\n  'preventClicksPropagation',\n  'slideToClickedSlide',\n  'loop',\n  'loopAdditionalSlides',\n  'loopAddBlankSlides',\n  'loopPreventsSliding',\n  'rewind',\n  'allowSlidePrev',\n  'allowSlideNext',\n  'swipeHandler',\n  'noSwiping',\n  'noSwipingClass',\n  'noSwipingSelector',\n  'passiveListeners',\n  'containerModifierClass',\n  'slideClass',\n  'slideActiveClass',\n  'slideVisibleClass',\n  'slideFullyVisibleClass',\n  'slideNextClass',\n  'slidePrevClass',\n  'slideBlankClass',\n  'wrapperClass',\n  'lazyPreloaderClass',\n  'lazyPreloadPrevNext',\n  'runCallbacksOnInit',\n  'observer',\n  'observeParents',\n  'observeSlideChildren',\n\n  // modules\n  'a11y',\n  'autoplay',\n  'controller',\n  'coverflowEffect',\n  'cubeEffect',\n  'fadeEffect',\n  'flipEffect',\n  'creativeEffect',\n  'cardsEffect',\n  'hashNavigation',\n  'history',\n  'keyboard',\n  'mousewheel',\n  'navigation',\n  'pagination',\n  'parallax',\n  'scrollbar',\n  'thumbs',\n  'virtual',\n  'zoom',\n  'control',\n];\n","import {\n  SWIPER_CONFIG,\n  SWIPER_STRUCTURE_CLASSES,\n  SWIPER_MODULE_ATTRIBUTE_KEYS,\n  SWIPER_MODULE_ATTRIBUTE_SELECTORS,\n  SWIPER_ALLOWED_PARAMS,\n  SWIPER_LOG_PREFIX,\n  SWIPER_BREAKPOINT_SHORTHANDS,\n} from './config.js';\n\n// Tracks unique IDs for root elements to isolate scope\nlet rootIdCounter = 0;\n\n// Logs messages with consistent prefix\nfunction log(type, message, element) {\n  const logFn = console[type];\n  if (element) {\n    logFn(`${SWIPER_LOG_PREFIX} ${message}`, element);\n  } else {\n    logFn(`${SWIPER_LOG_PREFIX} ${message}`);\n  }\n}\n\n// Builds selector for structural elements\nfunction buildAttributeSelectorForStructure(key) {\n  const { attributePrefix, attributes } = SWIPER_CONFIG;\n  const value = attributes[key];\n  return `[${attributePrefix}=\"${value}\"]`;\n}\n\n// Builds selector for module elements so that modules can be auto-discovered\nfunction buildAttributeSelectorForModule(moduleName, value) {\n  const { attributePrefix } = SWIPER_CONFIG;\n  return `[${attributePrefix}-${moduleName}=\"${value}\"]`;\n}\n\n// Builds scoped selector to prevent instance conflicts\nfunction buildAttributeSelectorForScope(rootId, elementSelector) {\n  const { attrName } = SWIPER_CONFIG.scope;\n  return `[${attrName}=\"${rootId}\"] ${elementSelector}`;\n}\n\n// Converts attribute kebab-case to camelCase for Swiper config\nfunction toCamelCase(text) {\n  return text.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n// Checks if value is a plain object (not array, null, or primitive)\n// Used in deep merge to distinguish objects from arrays that should be replaced\nfunction isObject(o) {\n  return typeof o === 'object' && o !== null && !Array.isArray(o);\n}\n\n// Parses attribute value strings into native JavaScript types\n// Handles empty strings, booleans, numbers, JSON objects, and plain strings\nfunction formatValue(value) {\n  // Empty attribute (e.g., data-swiper-free-mode) becomes true\n  if (value === '') return true;\n\n  // Boolean strings\n  if (value === 'true') return true;\n  if (value === 'false') return false;\n\n  // JSON objects for complex configs (e.g., breakpoints)\n  if (\n    typeof value === 'string' &&\n    value.includes('{') &&\n    value.includes('}') &&\n    value.includes('\"')\n  ) {\n    try {\n      return JSON.parse(value);\n    } catch (err) {\n      // Fall through to return as string if parsing fails\n    }\n  }\n\n  // Numbers\n  const asNumber = Number(value);\n  if (!Number.isNaN(asNumber)) return asNumber;\n\n  // Plain string fallback\n  return value;\n}\n\n// Parses data-swiper-options attribute containing complete JSON configuration\n// Returns parsed and validated options object, or empty object if invalid/missing\n// JSON keys must use camelCase (matching Swiper's JS API)\nfunction parseOptionsFromBulkJSON(root) {\n  const bulkAttr = root.getAttribute(\n    `${SWIPER_CONFIG.attributePrefix}-${SWIPER_CONFIG.attributes.bulkJson}`\n  );\n\n  // No bulk config provided\n  if (!bulkAttr || !bulkAttr.trim()) {\n    return {};\n  }\n\n  // Try to parse JSON\n  let parsedOptions;\n  try {\n    parsedOptions = JSON.parse(bulkAttr);\n  } catch (err) {\n    log(\n      'warn',\n      `Invalid JSON in data-swiper-options attribute. Using individual attributes only. Error: ${err.message}`,\n      root\n    );\n    return {};\n  }\n\n  // Validate it's an object\n  if (!isObject(parsedOptions)) {\n    log(\n      'warn',\n      'data-swiper-options must contain a JSON object, not an array or primitive. Using individual attributes only.',\n      root\n    );\n    return {};\n  }\n\n  // Validate params against Swiper's allowed list (already in camelCase)\n  Object.keys(parsedOptions).forEach((key) => {\n    if (!SWIPER_ALLOWED_PARAMS.includes(key)) {\n      log(\n        'warn',\n        `Unknown parameter \"${key}\" in data-swiper-options. This may be ignored by Swiper. Check the Swiper API docs.`,\n        root\n      );\n    }\n  });\n\n  return parsedOptions;\n}\n\n// Deep merges source object into target, preserving nested object properties\n// Arrays and primitives are replaced, not merged\nfunction deepMerge(target, source) {\n  Object.keys(source).forEach((key) => {\n    const sourceValue = source[key];\n    const targetValue = target[key];\n\n    // If both are plain objects, recurse to merge nested properties\n    if (isObject(sourceValue) && isObject(targetValue)) {\n      deepMerge(targetValue, sourceValue);\n    } else {\n      // Otherwise replace (handles primitives, arrays, null, undefined)\n      target[key] = sourceValue;\n    }\n  });\n  return target;\n}\n\n// Transforms Webflow breakpoint shorthands to pixel values\n// Example: {tablet: {...}, mobile: {...}} → {991: {...}, 767: {...}}\nfunction transformBreakpointShorthands(config) {\n  if (!config.breakpoints || !isObject(config.breakpoints)) {\n    return config;\n  }\n\n  const transformed = {};\n\n  Object.keys(config.breakpoints).forEach((key) => {\n    // Check if key is a shorthand (case-insensitive)\n    const lowerKey = key.toLowerCase();\n    const pixelValue = SWIPER_BREAKPOINT_SHORTHANDS[lowerKey] || key;\n\n    transformed[pixelValue] = config.breakpoints[key];\n  });\n\n  config.breakpoints = transformed;\n  return config;\n}\n\n// Takes all the data-* attributes on the root element and converts them into a Swiper configuration object so users can configure without JavaScript\nfunction parseOptionsFromAttributes(root) {\n  // Start with bulk JSON config if provided, otherwise empty object\n  // Individual attributes will override/merge with these base options\n  const options = parseOptionsFromBulkJSON(root);\n  const prefix = `${SWIPER_CONFIG.attributePrefix}-`;\n  const { attrName: rootIdAttr } = SWIPER_CONFIG.scope;\n\n  Array.from(root.attributes).forEach((attr) => {\n    // Skip root ID attribute since it's not part of the Swiper config\n    if (attr.name === rootIdAttr) return;\n\n    // Only process attributes with the configured prefix\n    if (!attr.name.startsWith(prefix)) return;\n\n    const rawName = attr.name.slice(prefix.length);\n    if (!rawName) return;\n\n    // Skip the bulk config attribute (already processed at the start)\n    if (rawName === SWIPER_CONFIG.attributes.bulkJson) return;\n\n    // Check if this is a module key so it can be nested under the appropriate module name in the Swiper config\n    const moduleKey = SWIPER_MODULE_ATTRIBUTE_KEYS.find((key) =>\n      rawName.startsWith(`${key}-`)\n    );\n\n    const value = formatValue(attr.value);\n\n    if (moduleKey) {\n      const parentKey = toCamelCase(moduleKey);\n      const childKey = toCamelCase(rawName.slice(moduleKey.length + 1));\n\n      if (typeof options[parentKey] === 'undefined') {\n        options[parentKey] = {};\n      }\n      if (options[parentKey] === true) {\n        options[parentKey] = { enabled: true };\n      }\n      if (options[parentKey] === false) {\n        options[parentKey] = { enabled: false };\n      }\n\n      options[parentKey][childKey] = value;\n    } else if (rawName.startsWith('breakpoints-')) {\n      // Handle breakpoint parameters with the data-swiper-breakpoints-{breakpoint}-{param} format, such as data-swiper-breakpoints-mobile-slides-per-view=\"1\"\n      const afterPrefix = rawName.slice('breakpoints-'.length);\n      const firstDashIndex = afterPrefix.indexOf('-');\n\n      // Skip if no parameter specified (just \"breakpoints-mobile\")\n      if (firstDashIndex === -1) {\n        return;\n      }\n\n      const breakpointKey = afterPrefix.slice(0, firstDashIndex);\n      const paramPath = afterPrefix.slice(firstDashIndex + 1);\n\n      // Initialize breakpoints object if needed\n      if (typeof options.breakpoints === 'undefined') {\n        options.breakpoints = {};\n      }\n\n      // Initialize this specific breakpoint's key (the actual breakpoint value) if needed\n      if (typeof options.breakpoints[breakpointKey] === 'undefined') {\n        options.breakpoints[breakpointKey] = {};\n      }\n\n      // Check if param is a module param (e.g., \"navigation-enabled\", \"autoplay-delay\")\n      const breakpointModuleKey = SWIPER_MODULE_ATTRIBUTE_KEYS.find((key) =>\n        paramPath.startsWith(`${key}-`)\n      );\n\n      // Handle nested module parameters within breakpoints, such as data-swiper-breakpoints-mobile-navigation-enabled=\"false\"\n      // Result: {breakpoints: {mobile: {navigation: {enabled: false}}}}\n      if (breakpointModuleKey) {\n        const parentKey = toCamelCase(breakpointModuleKey);\n        const childKey = toCamelCase(\n          paramPath.slice(breakpointModuleKey.length + 1)\n        );\n\n        // Validate parent module is allowed\n        if (!SWIPER_ALLOWED_PARAMS.includes(parentKey)) {\n          log(\n            'warn',\n            `Unknown breakpoint parameter \"${rawName}\" (module \"${parentKey}\" not recognized). This may be ignored by Swiper. Check the Swiper API docs.`,\n            root\n          );\n        }\n\n        if (\n          typeof options.breakpoints[breakpointKey][parentKey] === 'undefined'\n        ) {\n          options.breakpoints[breakpointKey][parentKey] = {};\n        }\n        if (options.breakpoints[breakpointKey][parentKey] === true) {\n          options.breakpoints[breakpointKey][parentKey] = { enabled: true };\n        }\n        if (options.breakpoints[breakpointKey][parentKey] === false) {\n          options.breakpoints[breakpointKey][parentKey] = { enabled: false };\n        }\n\n        options.breakpoints[breakpointKey][parentKey][childKey] = value;\n      } else {\n        // Simple breakpoint param that isn't nested under a module\n\n        const camelParam = toCamelCase(paramPath);\n\n        // Validate against allowed params to catch typos\n        if (!SWIPER_ALLOWED_PARAMS.includes(camelParam)) {\n          log(\n            'warn',\n            `Unknown breakpoint parameter \"breakpoints-${breakpointKey}-${paramPath}\" (as \"${camelParam}\"). This may be a typo and could be ignored by Swiper. Check the Swiper API docs for valid parameters.`,\n            root\n          );\n        }\n\n        options.breakpoints[breakpointKey][camelParam] = value;\n      }\n    } else {\n      // Not part of a known module, so it's a top-level option\n      const camelKey = toCamelCase(rawName);\n\n      // Validate against allowed params list to catch typos\n      if (!SWIPER_ALLOWED_PARAMS.includes(camelKey)) {\n        log(\n          'warn',\n          `Unknown parameter \"${rawName}\" (as \"${camelKey}\"). This may be a typo and could be ignored by Swiper. Check the Swiper API docs for valid parameters.`,\n          root\n        );\n      }\n\n      // Handle edge case: if we previously saw a boolean for this module param, convert it to an object before adding more nested props\n      if (\n        options[camelKey] &&\n        SWIPER_MODULE_ATTRIBUTE_KEYS.includes(rawName) &&\n        !isObject(value)\n      ) {\n        if (typeof options[camelKey] === 'boolean') {\n          options[camelKey] = { enabled: options[camelKey] };\n        }\n        options[camelKey].enabled = !!value;\n      } else {\n        options[camelKey] = value;\n      }\n    }\n  });\n\n  return options;\n}\n\n// Assigns unique ID to root element so selectors (for module elements that get auto-detected) can be scoped to specific slider instance\nfunction assignRootId(root) {\n  const { attrName, valuePrefix } = SWIPER_CONFIG.scope;\n  rootIdCounter += 1;\n  const rootId = `${valuePrefix}${rootIdCounter}`;\n  root.setAttribute(attrName, rootId);\n  return rootId;\n}\n\n// Validates DOM structure meets Swiper requirements\nfunction validateRootStructure(root) {\n  const swiperSelector = buildAttributeSelectorForStructure(\n    SWIPER_CONFIG.attributes.swiper\n  );\n  const swiperElement = root.querySelector(swiperSelector);\n\n  if (!swiperElement) {\n    log(\n      'error',\n      `Missing ${swiperSelector} inside ${buildAttributeSelectorForStructure(\n        SWIPER_CONFIG.attributes.root\n      )}.`,\n      root\n    );\n    return null;\n  }\n\n  const wrapperSelector = buildAttributeSelectorForStructure(\n    SWIPER_CONFIG.attributes.wrapper\n  );\n  const wrapperElement = swiperElement.querySelector(wrapperSelector);\n\n  if (!wrapperElement) {\n    log(\n      'error',\n      `Missing ${wrapperSelector} inside ${swiperSelector}.`,\n      swiperElement\n    );\n    return null;\n  }\n\n  const slideSelector = buildAttributeSelectorForStructure(\n    SWIPER_CONFIG.attributes.slide\n  );\n  const slides = wrapperElement.querySelectorAll(slideSelector);\n\n  return { swiperElement, wrapperElement, slides };\n}\n\n// Applies Swiper's required CSS classes that we've been avoiding to the DOM\nfunction applyRequiredSwiperStructureClasses(\n  swiperElement,\n  wrapperElement,\n  slides\n) {\n  swiperElement.classList.add(SWIPER_STRUCTURE_CLASSES.swiper);\n  wrapperElement.classList.add(SWIPER_STRUCTURE_CLASSES.wrapper);\n  slides.forEach((slide) =>\n    slide.classList.add(SWIPER_STRUCTURE_CLASSES.slide)\n  );\n}\n\n// Helper to find module elements and returns scoped selectors\nfunction findModuleElement(root, rootId, moduleName, value) {\n  const moduleSelector = buildAttributeSelectorForModule(moduleName, value);\n  if (root.querySelector(moduleSelector)) {\n    return buildAttributeSelectorForScope(rootId, moduleSelector);\n  }\n  return null;\n}\n\n// Builds single module config by 1). finding the module elements (e.g. [data-swiper-navigation=\"next\"]) 2). creating the scoped selector to the root to prevent instance conflict, and 3). merging with normal module options passed in via attributes on the root element\nfunction buildCombinedModuleOptions(\n  root,\n  rootId,\n  moduleName,\n  paramConfig,\n  userOptions\n) {\n  const resolvedParams = {};\n\n  // Iterate through module parameters to find and scope each element\n  Object.entries(paramConfig).forEach(([paramName, value]) => {\n    const scopedSelector = findModuleElement(root, rootId, moduleName, value);\n\n    if (scopedSelector) {\n      resolvedParams[paramName] = scopedSelector;\n    }\n  });\n\n  const userModuleOptions = userOptions[moduleName];\n\n  // Pass config if we found elements OR user provided options\n  if (Object.keys(resolvedParams).length > 0 || userModuleOptions) {\n    // Deep merge to preserve nested properties from both sources\n    if (userModuleOptions) {\n      return deepMerge({ ...resolvedParams }, userModuleOptions);\n    }\n    return resolvedParams;\n  }\n\n  return null;\n}\n\n// Builds module configurations by finding elements and creating scoped selectors\nfunction buildModuleOptions(root, rootId, userOptions = {}) {\n  const modules = {};\n\n  Object.entries(SWIPER_MODULE_ATTRIBUTE_SELECTORS).forEach(\n    ([moduleName, paramConfig]) => {\n      const resolved = buildCombinedModuleOptions(\n        root,\n        rootId,\n        moduleName,\n        paramConfig,\n        userOptions\n      );\n\n      if (resolved) {\n        modules[moduleName] = resolved;\n      }\n    }\n  );\n\n  return modules;\n}\n\n// Creates Swiper instance for each root element found in the DOM\nexport function setupWebflowSwipers() {\n  if (!window.Swiper) {\n    log(\n      'error',\n      'Swiper library not found. Make sure to include Swiper before this script.'\n    );\n    return [];\n  }\n\n  // Find all root elements and initialize indepdently\n  const rootSelector = buildAttributeSelectorForStructure(\n    SWIPER_CONFIG.attributes.root\n  );\n  const roots = document.querySelectorAll(rootSelector);\n  const instances = [];\n\n  roots.forEach((root) => {\n    // Assign unique root ID for scoping so multiple sliders don't interfere\n    const rootId = assignRootId(root);\n\n    // Validate structure\n    const structure = validateRootStructure(root);\n    if (!structure) return; // Skip if validation failed\n\n    // Apply required Swiper classes\n    applyRequiredSwiperStructureClasses(\n      structure.swiperElement,\n      structure.wrapperElement,\n      structure.slides\n    );\n\n    // Parse the user and module options\n    const userOptions = parseOptionsFromAttributes(root);\n    const transformedOptions = transformBreakpointShorthands(userOptions);\n    const moduleOptions = buildModuleOptions(root, rootId, transformedOptions);\n\n    // Deep merge to preserve nested properties in both objects\n    const swiperOptions = deepMerge({ ...transformedOptions }, moduleOptions);\n\n    // Initialize Swiper instance\n    try {\n      const instance = new window.Swiper(\n        structure.swiperElement,\n        swiperOptions\n      );\n      root.swiperInstance = instance; // Store for debugging and programmatic access\n      instances.push(instance);\n    } catch (error) {\n      log('error', 'Failed to initialize Swiper for root:', root);\n      console.error(error);\n    }\n  });\n\n  return instances;\n}\n\n// Private helper: Pure parser with no side effects\nfunction getSwiperConfig(selector) {\n  const root =\n    typeof selector === 'string' ? document.querySelector(selector) : selector;\n\n  if (!root) {\n    log('error', 'Element not found. Provide a valid selector or element.');\n    return null;\n  }\n\n  const parsedConfig = parseOptionsFromAttributes(root);\n  return transformBreakpointShorthands(parsedConfig);\n}\n\n// Helper to copy text to clipboard\nfunction copyToClipboard(text, successMessage) {\n  if (typeof copy === 'function') {\n    copy(text);\n    console.log(successMessage);\n  } else if (navigator.clipboard) {\n    navigator.clipboard\n      .writeText(text)\n      .then(() => {\n        console.log(successMessage);\n      })\n      .catch((err) => {\n        console.warn('Failed to copy to clipboard:', err);\n      });\n  } else {\n    console.log('Tip: Manually copy the output above.');\n  }\n}\n\n// Export utilities for runtime access and debugging\nif (typeof window !== 'undefined') {\n  window.carousel = window.carousel || {};\n  Object.assign(window.carousel, {\n    // Direct access to the parser for advanced use cases\n    parseOptionsFromAttributes,\n\n    // Export as Webflow-safe attribute (HTML-escaped JSON)\n    exportConfigAttr: function (selector) {\n      const config = getSwiperConfig(selector);\n      if (!config) return null;\n\n      const webflowSafeJson = JSON.stringify(config, null, 2).replace(\n        /\"/g,\n        '&quot;'\n      );\n      copyToClipboard(\n        webflowSafeJson,\n        'Copied to clipboard! You can paste this into a data-swiper-options attribute.'\n      );\n\n      return config;\n    },\n\n    // Export as custom embed code (JavaScript template)\n    exportConfigEmbed: function (selector) {\n      const config = getSwiperConfig(selector);\n      if (!config) return null;\n\n      // Convert to JS object literal: unquote valid identifiers and numeric keys\n      const jsConfig = JSON.stringify(config, null, 2).replace(\n        /\"([a-zA-Z_$][a-zA-Z0-9_$]*|\\d+)\"\\s*:/g,\n        '$1:'\n      );\n\n      const embedCode = `<script>\n// Paste this into a custom code embed on Webflow \n// Update YOUR_SELECTOR_HERE below to match the \".swiper\" element in your project\n// Credits: Carousel library by Idrees Isse (divs.idreezus.com)\ndocument.addEventListener('DOMContentLoaded', () => {\n  const swiper = new Swiper('YOUR_SELECTOR_HERE', ${jsConfig});\n});\n</script>`;\n\n      copyToClipboard(\n        embedCode,\n        'Copied to clipboard! Paste into a custom code embed.'\n      );\n\n      return config;\n    },\n\n    // Interactive export with prompt\n    exportConfig: function (selector) {\n      const choice = window.prompt(\n        'Export format?\\nType \"1\" for pasting into the \"data-swiper-options\" attribute\\nType \"2\" for pasting into a custom code embed'\n      );\n\n      if (choice === '1') {\n        return window.carousel.exportConfigAttr(selector);\n      }\n      if (choice === '2') {\n        return window.carousel.exportConfigEmbed(selector);\n      }\n\n      console.log('Export cancelled.');\n      return null;\n    },\n  });\n}\n","import { setupWebflowSwipers } from './core.js';\n\n// Auto-initialize when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', setupWebflowSwipers, {\n    once: true,\n  });\n} else {\n  setupWebflowSwipers();\n}\n\n// Expose public API so users can manually initialize or re-initialize\nwindow.setupWebflowSwipers = setupWebflowSwipers;\n"],"names":["SWIPER_CONFIG","attributePrefix","attributes","root","swiper","wrapper","slide","bulkJson","scope","attrName","valuePrefix","SWIPER_MODULE_ATTRIBUTE_SELECTORS","navigation","nextEl","prevEl","pagination","el","scrollbar","SWIPER_LOG_PREFIX","SWIPER_BREAKPOINT_SHORTHANDS","desktop","tablet","mobile","SWIPER_STRUCTURE_CLASSES","SWIPER_MODULE_ATTRIBUTE_KEYS","SWIPER_ALLOWED_PARAMS","rootIdCounter","log","type","message","element","logFn","console","buildAttributeSelectorForStructure","key","toCamelCase","text","replace","_","letter","toUpperCase","isObject","o","Array","isArray","deepMerge","target","source","Object","keys","forEach","sourceValue","targetValue","transformBreakpointShorthands","config","breakpoints","transformed","lowerKey","toLowerCase","parseOptionsFromAttributes","options","bulkAttr","getAttribute","trim","parsedOptions","JSON","parse","err","includes","parseOptionsFromBulkJSON","prefix","rootIdAttr","from","attr","name","startsWith","rawName","slice","length","moduleKey","find","value","asNumber","Number","isNaN","formatValue","parentKey","childKey","enabled","afterPrefix","firstDashIndex","indexOf","breakpointKey","paramPath","breakpointModuleKey","camelParam","camelKey","findModuleElement","rootId","moduleName","moduleSelector","buildAttributeSelectorForModule","querySelector","elementSelector","buildAttributeSelectorForScope","buildModuleOptions","userOptions","modules","entries","paramConfig","resolved","resolvedParams","paramName","scopedSelector","userModuleOptions","buildCombinedModuleOptions","setupWebflowSwipers","window","Swiper","rootSelector","roots","document","querySelectorAll","instances","setAttribute","assignRootId","structure","swiperSelector","swiperElement","wrapperSelector","wrapperElement","slideSelector","slides","validateRootStructure","classList","add","transformedOptions","moduleOptions","swiperOptions","instance","swiperInstance","push","error","getSwiperConfig","selector","copyToClipboard","successMessage","copy","navigator","clipboard","writeText","then","catch","warn","carousel","assign","exportConfigAttr","stringify","exportConfigEmbed","exportConfig","choice","prompt","readyState","addEventListener","once"],"mappings":";;;;;;;;;;yBACO,MAAMA,EAAgB,CAC3BC,gBAAiB,cACjBC,WAAY,CACVC,KAAM,OACNC,OAAQ,SACRC,QAAS,UACTC,MAAO,QACPC,SAAU,WAEZC,MAAO,CACLC,SAAU,sBACVC,YAAa,iBAKJC,EAAoC,CAC/CC,WAAY,CACVC,OAAQ,OACRC,OAAQ,QAEVC,WAAY,CACVC,GAAI,MAENC,UAAW,CACTD,GAAI,OAKKE,EAAoB,aAMpBC,EAA+B,CAC1CC,QAAS,MACTC,OAAQ,MACR,mBAAoB,MACpBC,OAAQ,KAWGC,EACH,SADGA,EAEF,iBAFEA,EAGJ,eAIIC,EAA+B,CAC1C,OACA,WACA,aACA,eACA,mBACA,kBACA,cACA,cACA,cACA,YACA,OACA,kBACA,UACA,WACA,aACA,aACA,aACA,WACA,YACA,SACA,UACA,QAKWC,EAAwB,CACnC,eACA,eACA,mBACA,UACA,OACA,YACA,iBACA,wBACA,oBACA,eACA,QACA,UACA,uBACA,iBACA,SACA,oBACA,UACA,QACA,SACA,iCACA,YACA,MACA,qBACA,qBACA,WACA,aACA,iBACA,mBACA,SACA,cACA,kBACA,eACA,gBACA,0BACA,OACA,iBACA,qBACA,qBACA,iBACA,uBACA,qBACA,oBACA,sBACA,2BACA,gBACA,eACA,aACA,aACA,gBACA,cACA,aACA,kBACA,eACA,eACA,iBACA,YACA,2BACA,2BACA,gCACA,sBACA,oBACA,aACA,kBACA,sBACA,aACA,gBACA,2BACA,sBACA,OACA,uBACA,qBACA,sBACA,SACA,iBACA,iBACA,eACA,YACA,iBACA,oBACA,mBACA,yBACA,aACA,mBACA,oBACA,yBACA,iBACA,iBACA,kBACA,eACA,qBACA,sBACA,qBACA,WACA,iBACA,uBAGA,OACA,WACA,aACA,kBACA,aACA,aACA,aACA,iBACA,cACA,iBACA,UACA,WACA,aACA,aACA,aACA,WACA,YACA,SACA,UACA,OACA,WCjMF,IAAIC,EAAgB,EAGpB,SAASC,EAAIC,EAAMC,EAASC,GAC1B,MAAMC,EAAQC,QAAQJ,GAClBE,E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"}