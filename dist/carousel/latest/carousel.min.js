/*!
 * Carousel v1.1.0
 * A smooth scrolling slider that leverages native CSS for easy setup and styling.
 * 
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 * 
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
!function(){"use strict";const t={CONTAINER:'[data-carousel="container"]',TRACK:'[data-carousel="track"]',ITEM:'[data-carousel="item"]',PREV_BTN:'[data-carousel="prev"]',NEXT_BTN:'[data-carousel="next"]',DOT:"[data-carousel-dot]",PAGINATION_CURRENT:"[data-carousel-pagination-current]",PAGINATION_TOTAL:"[data-carousel-pagination-total]"},e="start",n="--carousel-index",r="--carousel-total",s="--carousel-progress",o={SELECTORS:t,CLASSES:{SCROLLING:"carousel-scrolling",DISABLED:"carousel-button-disabled",ACTIVE:"carousel-item-active",ANIMATING:"carousel-animating",SNAP_DISABLED:"carousel-snap-disabled",DOT_ACTIVE:"carousel-dot-active"},TIMING:{DEBOUNCE_RESIZE:150,DEBOUNCE_SCROLL:100,BUTTON_COOLDOWN:100,SNAP_DISABLE_DURATION:50},TOLERANCE:{EDGE_DETECTION:1}};let a=0;function i(t,e){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...r)},e)}}function c(t,e,n={}){const{events:r,container:s}=t;if(r.has(e)){r.get(e).forEach(r=>{r.call(t,{type:e,target:t,...n})})}const o=new CustomEvent(`carousel:${e}`,{detail:{carousel:t,...n},bubbles:!0});s.dispatchEvent(o)}function l(t){const{track:e,items:n,state:r,config:s}=t,o=getComputedStyle(e),a=t=>{if(!t||"auto"===t)return{value:0,specified:!1};const e=parseFloat(t);return Number.isNaN(e)?{value:0,specified:!1}:{value:e,specified:!0}},i=parseFloat(o.gap||o.columnGap)||0,c=a(o.paddingInlineStart||o.paddingLeft),l=a(o.paddingInlineEnd||o.paddingRight),d=a(o.scrollPaddingInlineStart||o.scrollPaddingLeft),u=a(o.scrollPaddingInlineEnd||o.scrollPaddingRight),E=d.specified?d.value:c.value,h=u.specified?u.value:l.value,f=e.clientWidth,g=e.scrollWidth,m=e.getBoundingClientRect(),I=n.map((t,n)=>{const r=t.getBoundingClientRect(),s=getComputedStyle(t),o=parseFloat(s.scrollMarginInlineStart||s.scrollMarginLeft),a=parseFloat(s.scrollMarginInlineEnd||s.scrollMarginRight),i=Number.isNaN(o)?0:o,c=Number.isNaN(a)?0:a,l=r.left-m.left+e.scrollLeft,d=r.width;return{index:n,left:l,width:d,center:l+d/2,right:l+d,marginStart:i,marginEnd:c}});Object.assign(r,{gap:i,containerWidth:f,scrollWidth:g,itemPositions:I,startInset:E,endInset:h}),t.snapAlign=s.align}function d(t){const{container:e,track:o,items:a,state:i}=t,{currentIndex:c,scrollWidth:l,containerWidth:d}=i;e.style.setProperty(n,c+1),e.style.setProperty(r,a.length);const u=l-d,E=o.scrollLeft,h=u>0?Math.min(1,Math.max(0,E/u)):0;e.style.setProperty(s,h)}function u(t){const{track:e,state:n,snapAlign:r}=t,{itemPositions:s,currentIndex:o,startInset:a=0,endInset:i=0}=n,l=function(t,e,n,r,s={}){const{startInset:o=0,endInset:a=0}=s,i=function(t,e,n,r={}){const{startInset:s=0,endInset:o=0}=r;switch(n){case"center":return t+e/2+(s-o)/2;case"end":return t+e-o;default:return t+s}}(e,n,r,{startInset:o,endInset:a});let c=0,l=1/0;return t.forEach((t,e)=>{const n=function(t,e){const n=t.marginStart||0,r=t.marginEnd||0;switch(e){case"center":return t.center+(r-n)/2;case"end":return t.right+r;default:return t.left-n}}(t,r),s=Math.abs(n-i);s<l&&(l=s,c=e)}),c}(s,e.scrollLeft,n.containerWidth,r,{startInset:a,endInset:i});l!==o&&(n.currentIndex=l,b(t),c(t,"change",{index:l}))}function E(t){const{track:e,prevBtn:n,nextBtn:r,state:s}=t,{CLASSES:a,TOLERANCE:i}=o,l=e.scrollLeft,{scrollWidth:d,containerWidth:u}=s,E=d-u,h=l<=i.EDGE_DETECTION,f=l>=E-i.EDGE_DETECTION;n&&(n.classList.toggle(a.DISABLED,h),n.disabled=h,h&&!s.hasEmittedStart?(c(t,"reach-start"),s.hasEmittedStart=!0):h||(s.hasEmittedStart=!1)),r&&(r.classList.toggle(a.DISABLED,f),r.disabled=f,f&&!s.hasEmittedEnd?(c(t,"reach-end"),s.hasEmittedEnd=!0):f||(s.hasEmittedEnd=!1))}function h(t,e){const{track:n,items:r,state:s,snapAlign:a}=t,{CLASSES:i,TIMING:c}=o,l=r[e];l?(s.isAnimating=!0,n.classList.add(i.ANIMATING),n.classList.add(i.SNAP_DISABLED),l.scrollIntoView({behavior:"smooth",block:"nearest",container:"nearest",inline:a}),setTimeout(()=>{n.classList.remove(i.SNAP_DISABLED)},c.SNAP_DISABLE_DURATION),setTimeout(()=>{s.isAnimating=!1,n.classList.remove(i.ANIMATING)},c.BUTTON_COOLDOWN)):console.warn(`Carousel ${t.id}: No item found at index ${e}`)}function f(t){const{state:e}=t;if(e.isAnimating)return;const n=function(t){const{state:e,items:n}=t,{currentIndex:r}=e;return Math.min(r+1,n.length-1)}(t);h(t,n)}function g(t){const{state:e}=t;if(e.isAnimating)return;const n=function(t){const{state:e}=t,{currentIndex:n}=e;return Math.max(n-1,0)}(t);h(t,n)}function m(t){const{dots:e,container:n,items:r,id:s}=t,{CLASSES:a}=o;if(!e||0===e.length)return;t.boundDotHandlers&&t.boundDotHandlers.forEach(({dot:t,handler:e})=>{t.removeEventListener("click",e)}),t.boundDotHandlers=[];const i=function(t){return Array.isArray(t)?t.length:0}(r),c=t=>{if(t.tagName&&"button"===t.tagName.toLowerCase())return t;const e=document.createElement("button");for([...t.attributes].forEach(t=>{e.setAttribute(t.name,t.value)});t.firstChild;)e.appendChild(t.firstChild);return t.replaceWith(e),e},l=c(e[0]),d=[l];for(let t=1;t<e.length;t++)d.push(c(e[t]));const u=l.parentElement;for(;d.length<i;){const t=l.cloneNode(!0);u.appendChild(t),d.push(t)}for(;d.length>i;){d.pop().remove()}const E=[];d.forEach((e,n)=>{e.setAttribute("type","button"),e.classList.remove(a.DOT_ACTIVE),e.setAttribute("aria-label",`Go to slide ${n+1} of ${i}`);const r=()=>t.goTo(n);e.addEventListener("click",r),t.boundDotHandlers.push({dot:e,handler:r}),E.push(e)}),t.dots=E,I(t)}function I(t){const{dots:e,container:n,items:r,state:s}=t,{CLASSES:a,SELECTORS:i}=o,{currentIndex:c}=s;e&&e.length>0&&e.forEach((t,e)=>{const n=e===c;t.classList.toggle(a.DOT_ACTIVE,n),n?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")});const l=n.querySelector(i.PAGINATION_CURRENT);l&&(l.textContent=c+1);const d=n.querySelector(i.PAGINATION_TOTAL);d&&(d.textContent=r.length)}function b(t){const{rafPending:e}=t;e||(t.rafPending=!0,requestAnimationFrame(()=>{!function(t){const{items:e,state:n}=t,{CLASSES:r}=o,{currentIndex:s}=n;e.forEach((t,e)=>{t.classList.toggle(r.ACTIVE,e===s)})}(t),E(t),I(t),d(t),t.rafPending=!1}))}function A(t){const{track:e,prevBtn:n,nextBtn:r,id:s}=t;t.boundHandlers={scroll:()=>function(t){const{track:e}=t,{CLASSES:n,TIMING:r}=o;e.classList.add(n.SCROLLING),c(t,"scroll",{scrollLeft:e.scrollLeft}),t.debouncedScrollHandler||(t.debouncedScrollHandler=i(()=>{u(t),E(t),e.classList.remove(n.SCROLLING)},r.DEBOUNCE_SCROLL)),t.debouncedScrollHandler()}(t),prev:()=>g(t),next:()=>f(t)},e.addEventListener("scroll",t.boundHandlers.scroll,{passive:!0}),n&&n.addEventListener("click",t.boundHandlers.prev),r&&r.addEventListener("click",t.boundHandlers.next)}function S(t){const e=function(t){const{container:e,id:n}=t,{SELECTORS:r}=o,s=e.querySelector(r.TRACK);if(!s)return console.warn(`Carousel ${n}: Track element not found. Expected element with data-carousel="track".`),!1;const a=[...e.querySelectorAll(r.ITEM)];if(0===a.length)return console.warn(`Carousel ${n}: No items found. Expected at least one element with data-carousel="item".`),!1;const i=e.querySelector(r.PREV_BTN),c=e.querySelector(r.NEXT_BTN),l=[...e.querySelectorAll(r.DOT)];return e.setAttribute("data-carousel-id",n),Object.assign(t,{track:s,items:a,prevBtn:i,nextBtn:c,dots:l}),!0}(t);return!!e&&(l(t),d(t),A(t),function(t){const{container:e,track:n}=t,{TIMING:r}=o,s=i(()=>{null!==e.offsetParent&&(l(t),u(t),E(t))},r.DEBOUNCE_RESIZE);t.debouncedResizeHandler=s;const a=new ResizeObserver(()=>{s()});a.observe(e),a.observe(n),t.resizeObserver=a}(t),m(t),t.config.keyboard&&function(t,e,n){const{container:r}=t;r.hasAttribute("tabindex")||r.setAttribute("tabindex","0");const s=s=>{if(r.contains(s.target))switch(s.key){case"ArrowLeft":s.preventDefault(),e(t);break;case"ArrowRight":s.preventDefault(),n(t);break;case"Home":s.preventDefault(),t.goTo(0);break;case"End":s.preventDefault(),t.goTo(t.items.length-1)}};t.boundHandlers.keyboard=s,r.addEventListener("keydown",s)}(t,g,f),b(t),!0)}class p{constructor(t){const n=(a+=1,`carousel-${a}`),r=function(t){return{align:t.getAttribute("data-carousel-align")||e,keyboard:"true"===t.getAttribute("data-carousel-keyboard"),loop:"true"===t.getAttribute("data-carousel-loop")}}(t);Object.assign(this,{container:t,id:n,config:r,state:{currentIndex:0,isScrolling:!1,isAnimating:!1,itemPositions:[],gap:0,containerWidth:0,scrollWidth:0,startInset:0,endInset:0,hasEmittedStart:!1,hasEmittedEnd:!1},events:new Map,rafPending:!1,boundHandlers:null,debouncedScrollHandler:null});S(this)||console.warn(`Carousel ${n}: Initialization failed due to missing required elements.`)}next(){return f(this),this}prev(){return g(this),this}goTo(t){const{items:e}=this;return t<0||t>=e.length?(console.warn(`Carousel ${this.id}: Invalid index ${t}. Must be between 0 and ${e.length-1}.`),this):(h(this,t),this)}getActiveIndex(){return this.state.currentIndex}refresh(){return l(this),u(this),b(this),this}destroy(){return function(t){const{prevBtn:e,nextBtn:n,track:r,container:s}=t;t.boundHandlers&&(r.removeEventListener("scroll",t.boundHandlers.scroll),e&&e.removeEventListener("click",t.boundHandlers.prev),n&&n.removeEventListener("click",t.boundHandlers.next),t.boundHandlers.keyboard&&s.removeEventListener("keydown",t.boundHandlers.keyboard)),t.boundDotHandlers&&t.boundDotHandlers.forEach(({dot:t,handler:e})=>{t.removeEventListener("click",e)}),t.resizeObserver&&(t.resizeObserver.disconnect(),t.resizeObserver=null),Object.keys(t).forEach(e=>{t[e]=null})}(this),null}on(t,e){const{events:n}=this;return n.has(t)||n.set(t,[]),n.get(t).push(e),this}off(t,e){const{events:n}=this;if(!n.has(t))return this;const r=n.get(t),s=r.indexOf(e);return s>-1&&r.splice(s,1),this}static init(t){if("string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("Carousel.init(): Container element not found");return new p(t)}}const L=new Map;function N(){document.querySelectorAll(t.CONTAINER).forEach(t=>{try{const e=new p(t);e.id&&L.set(e.id,e)}catch(t){console.warn("Carousel auto-initialization failed:",t)}}),L.size}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",N):N(),"undefined"!=typeof window&&(window.Carousel=p,window.CarouselInstances=L)}();
//# sourceMappingURL=carousel.min.js.map
