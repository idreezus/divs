/*!
 * Carousel v1.1.0
 * A smooth scrolling slider that leverages native CSS for easy setup and styling.
 * 
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 * 
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
!function(){"use strict";const e={CONTAINER:'[data-carousel="container"]',TRACK:'[data-carousel="track"]',ITEM:'[data-carousel="item"]',PREV_BTN:'[data-carousel="prev"]',NEXT_BTN:'[data-carousel="next"]',DOT:"[data-carousel-dot]",PAGINATION_CURRENT:"[data-carousel-pagination-current]",PAGINATION_TOTAL:"[data-carousel-pagination-total]",PLAY_PAUSE_BTN:"[data-carousel-play-pause]"},t={SCROLLING:"carousel-scrolling",DISABLED:"carousel-button-disabled",ACTIVE:"carousel-item-active",ANIMATING:"carousel-animating",SNAP_DISABLED:"carousel-snap-disabled",DOT_ACTIVE:"carousel-dot-active",AUTOPLAY_ACTIVE:"carousel-autoplay-active",AUTOPLAY_PAUSED:"carousel-autoplay-paused",REDUCED_MOTION:"carousel-reduced-motion"},a="start",n="item",s=5e3,o={INDEX:"--carousel-index",TOTAL:"--carousel-total",PROGRESS:"--carousel-progress",AUTOPLAY_PROGRESS:"--carousel-autoplay-progress",AUTOPLAY_DURATION:"--carousel-autoplay-duration"},r="autoplay-start",i="autoplay-pause",l={SELECTORS:e,CLASSES:t,TIMING:{DEBOUNCE_RESIZE:150,DEBOUNCE_SCROLL:100,SNAP_DISABLE_DURATION:50,SCROLL_END_FALLBACK:800},TOLERANCE:{EDGE_DETECTION:1},CSS_VARS:o};let u=0;function c(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function d(e,t){let a;return function(...n){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...n)},t)}}function p(e,t,a,n,s={}){const{startInset:o=0,endInset:r=0}=s,i=function(e,t,a,n={}){const{startInset:s=0,endInset:o=0}=n;switch(a){case"center":return e+t/2+(s-o)/2;case"end":return e+t-o;default:return e+s}}(t,a,n,{startInset:o,endInset:r});let l=0,u=1/0;return e.forEach((e,t)=>{const a=function(e,t){const a=e.marginStart||0,n=e.marginEnd||0;switch(t){case"center":return e.center+(n-a)/2;case"end":return e.right+n;default:return e.left-a}}(e,n),s=Math.abs(a-i);s<u&&(u=s,l=t)}),l}function h(e,t,a={}){const{events:n,container:s}=e;if(n.has(t)){n.get(t).forEach(n=>{n.call(e,{type:t,target:e,...a})})}const o=new CustomEvent(`carousel:${t}`,{detail:{carousel:e,...a},bubbles:!0});s.dispatchEvent(o)}function m(e){const{track:t,items:a,state:n,config:s}=e,o=getComputedStyle(t),r=e=>{if(!e||"auto"===e)return{value:0,specified:!1};const t=parseFloat(e);return Number.isNaN(t)?{value:0,specified:!1}:{value:t,specified:!0}},i=parseFloat(o.gap||o.columnGap)||0,l=r(o.paddingInlineStart||o.paddingLeft),u=r(o.paddingInlineEnd||o.paddingRight),c=r(o.scrollPaddingInlineStart||o.scrollPaddingLeft),d=r(o.scrollPaddingInlineEnd||o.scrollPaddingRight),h=c.specified?c.value:l.value,m=d.specified?d.value:u.value,f=t.clientWidth,y=t.scrollWidth,I=t.getBoundingClientRect(),E=a.map((e,a)=>{const n=e.getBoundingClientRect(),s=getComputedStyle(e),o=parseFloat(s.scrollMarginInlineStart||s.scrollMarginLeft),r=parseFloat(s.scrollMarginInlineEnd||s.scrollMarginRight),i=Number.isNaN(o)?0:o,l=Number.isNaN(r)?0:r,u=n.left-I.left+t.scrollLeft,c=n.width;return{index:a,left:u,width:c,center:u+c/2,right:u+c,marginStart:i,marginEnd:l}});Object.assign(n,{gap:i,containerWidth:f,scrollWidth:y,itemPositions:E,startInset:h,endInset:m}),e.snapAlign=s.align;const A=y-f;let g;g=A<=0?0:p(E,A,f,s.align,{startInset:h,endInset:m});const b=g+1;Object.assign(n,{maxReachableIndex:g,totalPositions:b})}function f(e){const{container:t,track:a,items:n,state:s}=e,{currentIndex:r,scrollWidth:i,containerWidth:l}=s;t.style.setProperty(o.INDEX,r+1),t.style.setProperty(o.TOTAL,s.totalPositions);const u=i-l,c=a.scrollLeft,d=u>0?Math.min(1,Math.max(0,c/u)):0;t.style.setProperty(o.PROGRESS,d)}function y(e){const{state:t,config:a,autoplay:n}=e;if(!t.isAutoplaying||t.isPaused)return;const s=performance.now()-t.autoplayStartTime,r=Math.min(s/a.autoplayDuration,1);e.container.style.setProperty(o.AUTOPLAY_PROGRESS,r.toString()),e.dots?.length>0&&e.dots.forEach((e,a)=>{a===t.currentIndex?e.style.setProperty(o.AUTOPLAY_PROGRESS,r.toString()):e.style.setProperty(o.AUTOPLAY_PROGRESS,"0")}),r>=1&&(e.next(),t.autoplayStartTime=performance.now()),n.rafId=requestAnimationFrame(()=>y(e))}function I(e){const{autoplay:t}=e;return t.isVisible&&!t.pausedByHover&&!t.pausedByFocus&&!t.pausedByUser}function E(e){const{container:t,config:a}=e;e.autoplay={rafId:null,observer:null,isVisible:!0,pausedByHover:!1,pausedByFocus:!1,pausedByUser:!1},e.autoplay.observer=new IntersectionObserver(t=>{t.forEach(t=>{e.autoplay.isVisible=t.isIntersecting,t.isIntersecting?I(e)&&b(e):g(e,"visibility")})},{threshold:.5}),e.autoplay.observer.observe(t),a.autoplayPauseHover&&(e.autoplay.handleMouseEnter=()=>{e.autoplay.pausedByHover=!0,g(e,"hover")},e.autoplay.handleMouseLeave=()=>{e.autoplay.pausedByHover=!1,I(e)&&b(e)},t.addEventListener("mouseenter",e.autoplay.handleMouseEnter),t.addEventListener("mouseleave",e.autoplay.handleMouseLeave)),a.autoplayPauseFocus&&(e.autoplay.handleFocusIn=()=>{e.autoplay.pausedByFocus=!0,g(e,"focus")},e.autoplay.handleFocusOut=a=>{t.contains(a.relatedTarget)||(e.autoplay.pausedByFocus=!1,I(e)&&b(e))},t.addEventListener("focusin",e.autoplay.handleFocusIn),t.addEventListener("focusout",e.autoplay.handleFocusOut))}function A(e){const{container:a,state:n}=e;n.isAutoplaying=!0,n.isPaused=!1,n.autoplayStartTime=performance.now(),a.classList.add(t.AUTOPLAY_ACTIVE),a.classList.remove(t.AUTOPLAY_PAUSED),e.playPauseBtn&&e.playPauseBtn.setAttribute("aria-pressed","true"),h(e,r,{index:n.currentIndex}),e.autoplay.rafId=requestAnimationFrame(()=>y(e))}function g(e,a="user"){const{state:n,container:s}=e;if(!n.isAutoplaying||n.isPaused)return;n.isPaused=!0,"user"!==a&&"keyboard"!==a||(e.autoplay.pausedByUser=!0),e.autoplay.rafId&&(cancelAnimationFrame(e.autoplay.rafId),e.autoplay.rafId=null),s.classList.add(t.AUTOPLAY_PAUSED),e.playPauseBtn&&e.playPauseBtn.setAttribute("aria-pressed","false");const o=performance.now()-n.autoplayStartTime;n.autoplayElapsed=o,n.autoplayPausedOnIndex=n.currentIndex;const r=Math.min(o/e.config.autoplayDuration,1);h(e,i,{index:n.currentIndex,progress:r})}function b(e){const{state:a,container:n}=e;if(!a.isAutoplaying||!a.isPaused)return;if(!I(e))return;a.isPaused=!1;const s=a.autoplayPausedOnIndex===a.currentIndex;a.autoplayStartTime=s?performance.now()-(a.autoplayElapsed||0):performance.now(),n.classList.remove(t.AUTOPLAY_PAUSED),e.playPauseBtn&&e.playPauseBtn.setAttribute("aria-pressed","true"),h(e,r,{index:a.currentIndex}),e.autoplay.rafId=requestAnimationFrame(()=>y(e))}function S(e){const{track:t,state:a,snapAlign:n}=e,{itemPositions:s,currentIndex:o,startInset:r=0,endInset:i=0}=a,l=p(s,t.scrollLeft,a.containerWidth,n,{startInset:r,endInset:i});l!==o&&(a.currentIndex=l,C(e),h(e,"change",{index:l}))}function L(e){const{track:t,prevBtn:a,nextBtn:n,state:s,config:o}=e,{CLASSES:r,TOLERANCE:i}=l,u=t.scrollLeft,c=s.scrollWidth-s.containerWidth,d=u<=i.EDGE_DETECTION,p=u>=c-i.EDGE_DETECTION,m=s.currentIndex<=0,f=s.currentIndex>=s.maxReachableIndex;o.loop?(a&&(a.classList.remove(r.DISABLED),a.disabled=!1),n&&(n.classList.remove(r.DISABLED),n.disabled=!1)):(a&&(a.classList.toggle(r.DISABLED,m),a.disabled=m),n&&(n.classList.toggle(r.DISABLED,f),n.disabled=f)),d&&!s.hasEmittedStart?(h(e,"reach-start"),s.hasEmittedStart=!0):d||(s.hasEmittedStart=!1),p&&!s.hasEmittedEnd?(h(e,"reach-end"),s.hasEmittedEnd=!0):p||(s.hasEmittedEnd=!1)}function v(e,t){const{track:a,items:n,state:s,snapAlign:o}=e,{CLASSES:r,TIMING:i}=l,u=n[t];if(!u)return void console.warn(`Carousel ${e.id}: No item found at index ${t}`);e._scrollCleanup&&e._scrollCleanup(),s.isProgrammaticScroll=!0,a.classList.add(r.ANIMATING),a.classList.add(r.SNAP_DISABLED),setTimeout(()=>{a.classList.remove(r.SNAP_DISABLED)},i.SNAP_DISABLE_DURATION);const c=()=>{clearTimeout(d),s.isProgrammaticScroll=!1,a.classList.remove(r.ANIMATING),a.classList.remove(r.SCROLLING),e._scrollCleanup=null};a.addEventListener("scrollend",c,{once:!0});const d=setTimeout(()=>{a.removeEventListener("scrollend",c),s.isProgrammaticScroll=!1,a.classList.remove(r.ANIMATING),a.classList.remove(r.SCROLLING),e._scrollCleanup=null},i.SCROLL_END_FALLBACK);e._scrollCleanup=()=>{a.removeEventListener("scrollend",c),clearTimeout(d),s.isProgrammaticScroll=!1,a.classList.remove(r.ANIMATING),e._scrollCleanup=null},u.scrollIntoView({behavior:"smooth",block:"nearest",inline:o})}function P(e){const{state:t}=e;if(t.isProgrammaticScroll)return;const a=function(e){const{state:t,config:a}=e;if("page"===a.scrollBy)return function(e){const{track:t,state:a,config:n}=e,{itemPositions:s,containerWidth:o,maxReachableIndex:r}=a,i=t.scrollLeft+o;for(let e=a.currentIndex+1;e<s.length;e++){if(e>r)return n.loop?0:r;if(s[e].left>=i)return e}return n.loop?0:r}(e);const n=t.currentIndex+1;return n>t.maxReachableIndex?a.loop?0:t.maxReachableIndex:n}(e);a!==t.currentIndex&&(t.currentIndex=a,C(e),h(e,"change",{index:a}),v(e,a))}function T(e){const{state:t}=e;if(t.isProgrammaticScroll)return;const a=function(e){const{state:t,config:a}=e;if("page"===a.scrollBy)return function(e){const{track:t,state:a,config:n}=e,{itemPositions:s,containerWidth:o,maxReachableIndex:r}=a,i=t.scrollLeft-o;for(let e=a.currentIndex-1;e>=0;e--)if(s[e].left<=i)return e;return n.loop?r:0}(e);const n=t.currentIndex-1;return n<0?a.loop?t.maxReachableIndex:0:n}(e);a!==t.currentIndex&&(t.currentIndex=a,C(e),h(e,"change",{index:a}),v(e,a))}function x(e){const{dots:t,container:a,items:n,id:s}=e,{CLASSES:o}=l;if(!t||0===t.length)return;e.boundDotHandlers&&e.boundDotHandlers.forEach(({dot:e,handler:t})=>{e.removeEventListener("click",t)}),e.boundDotHandlers=[];const r=function(e){return e.state.totalPositions}(e),i=e=>{if(e.tagName&&"button"===e.tagName.toLowerCase())return e;const t=document.createElement("button");for([...e.attributes].forEach(e=>{t.setAttribute(e.name,e.value)});e.firstChild;)t.appendChild(e.firstChild);return e.replaceWith(t),t},u=i(t[0]),c=[u];for(let e=1;e<t.length;e++)c.push(i(t[e]));const d=u.parentElement;for(;c.length<r;){const e=u.cloneNode(!0);d.appendChild(e),c.push(e)}for(;c.length>r;){c.pop().remove()}const p=[];c.forEach((t,a)=>{t.setAttribute("type","button"),t.classList.remove(o.DOT_ACTIVE),t.setAttribute("aria-label",`Go to slide ${a+1} of ${r}`);const n=()=>{e.state.isAutoplaying&&!e.state.isPaused&&g(e,"user"),e.goTo(a)};t.addEventListener("click",n),e.boundDotHandlers.push({dot:t,handler:n}),p.push(t)}),e.dots=p,O(e)}function O(e){const{dots:t,container:a,state:n}=e,{CLASSES:s,SELECTORS:o}=l,{currentIndex:r}=n;t&&t.length>0&&t.forEach((e,t)=>{const a=t===r;e.classList.toggle(s.DOT_ACTIVE,a),a?e.setAttribute("aria-current","true"):e.removeAttribute("aria-current")});const i=a.querySelector(o.PAGINATION_CURRENT);i&&(i.textContent=r+1);const u=a.querySelector(o.PAGINATION_TOTAL);u&&(u.textContent=n.totalPositions)}function C(e){const{rafPending:t}=e;t||(e.rafPending=!0,requestAnimationFrame(()=>{!function(e){const{items:t,state:a}=e,{CLASSES:n}=l,{currentIndex:s}=a;t.forEach((e,t)=>{e.classList.toggle(n.ACTIVE,t===s)})}(e),L(e),O(e),f(e),e.rafPending=!1}))}function N(e){const{track:t,prevBtn:a,nextBtn:n,id:s}=e;e.boundHandlers={scroll:()=>function(e){const{track:t}=e,{CLASSES:a,TIMING:n}=l;e.state.isProgrammaticScroll||!e.state.isAutoplaying||e.state.isPaused||g(e,"user"),t.classList.add(a.SCROLLING),h(e,"scroll",{scrollLeft:t.scrollLeft}),e.state.isProgrammaticScroll||(e.debouncedScrollHandler||(e.debouncedScrollHandler=d(()=>{S(e),L(e),t.classList.remove(a.SCROLLING)},n.DEBOUNCE_SCROLL)),e.debouncedScrollHandler())}(e),prev:()=>{e.state.isAutoplaying&&!e.state.isPaused&&(e.state.autoplayStartTime=performance.now()),T(e)},next:()=>{e.state.isAutoplaying&&!e.state.isPaused&&(e.state.autoplayStartTime=performance.now()),P(e)}},t.addEventListener("scroll",e.boundHandlers.scroll,{passive:!0}),a&&a.addEventListener("click",e.boundHandlers.prev),n&&n.addEventListener("click",e.boundHandlers.next),e.playPauseBtn&&(e.boundHandlers.playPause=()=>{e.state.isAutoplaying&&!e.state.isPaused?e.pause():e.play()},e.playPauseBtn.addEventListener("click",e.boundHandlers.playPause))}function R(e){const{prevBtn:t,nextBtn:a,track:n,container:s}=e;e._scrollCleanup&&e._scrollCleanup(),function(e){const{container:t,config:a,autoplay:n}=e;n&&(n.rafId&&cancelAnimationFrame(n.rafId),n.observer&&n.observer.disconnect(),a.autoplayPauseHover&&n.handleMouseEnter&&(t.removeEventListener("mouseenter",n.handleMouseEnter),t.removeEventListener("mouseleave",n.handleMouseLeave)),a.autoplayPauseFocus&&n.handleFocusIn&&(t.removeEventListener("focusin",n.handleFocusIn),t.removeEventListener("focusout",n.handleFocusOut)),e.autoplay=null)}(e),e.playPauseBtn&&e.boundHandlers?.playPause&&e.playPauseBtn.removeEventListener("click",e.boundHandlers.playPause),e.boundHandlers&&(n.removeEventListener("scroll",e.boundHandlers.scroll),t&&t.removeEventListener("click",e.boundHandlers.prev),a&&a.removeEventListener("click",e.boundHandlers.next),e.boundHandlers.keyboard&&s.removeEventListener("keydown",e.boundHandlers.keyboard)),e.boundDotHandlers&&e.boundDotHandlers.forEach(({dot:e,handler:t})=>{e.removeEventListener("click",t)}),e.resizeObserver&&(e.resizeObserver.disconnect(),e.resizeObserver=null),Object.keys(e).forEach(t=>{e[t]=null})}function D(e){const{container:t,config:a}=e,{CLASSES:n,CSS_VARS:s}=l,o=function(e){const{container:t,id:a}=e,{SELECTORS:n}=l,s=t.querySelector(n.TRACK);if(!s)return console.warn(`Carousel ${a}: Track element not found. Expected element with data-carousel="track".`),!1;const o=[...t.querySelectorAll(n.ITEM)];if(0===o.length)return console.warn(`Carousel ${a}: No items found. Expected at least one element with data-carousel="item".`),!1;const r=t.querySelector(n.PREV_BTN),i=t.querySelector(n.NEXT_BTN),u=[...t.querySelectorAll(n.DOT)],c=t.querySelector(n.PLAY_PAUSE_BTN);return t.setAttribute("data-carousel-id",a),Object.assign(e,{track:s,items:o,prevBtn:r,nextBtn:i,dots:u,playPauseBtn:c}),!0}(e);return!!o&&(m(e),function(e){const{config:t,state:a,items:n,id:s}=e;if(a.maxReachableIndex>=n.length-1)return;if(!t.loop&&!t.autoplay)return;const o=n.length-1-a.maxReachableIndex,r=[t.loop&&"loop",t.autoplay&&"autoplay"].filter(Boolean).join(" and ");console.warn(`Carousel ${s}: ${o} item(s) (indices ${a.maxReachableIndex+1}-${n.length-1}) share the same scroll position as item ${a.maxReachableIndex} and cannot be individually activated. ${r} will cycle through ${a.totalPositions} positions instead of ${n.length}. To make every item individually reachable, use wider items or add padding-inline-end to the track.`)}(e),f(e),N(e),function(e){const{container:t,track:a}=e,{TIMING:n}=l,s=d(()=>{if(null===t.offsetParent)return;const a=e.state.totalPositions;m(e),e.state.totalPositions!==a&&x(e),e.state.currentIndex>e.state.maxReachableIndex&&(e.state.currentIndex=e.state.maxReachableIndex),S(e),L(e)},n.DEBOUNCE_RESIZE);e.debouncedResizeHandler=s;const o=new ResizeObserver(()=>{s()});o.observe(t),o.observe(a),e.resizeObserver=o}(e),x(e),a.keyboard&&function(e,t,a){const{container:n}=e;n.hasAttribute("tabindex")||n.setAttribute("tabindex","0");const s=s=>{if(n.contains(s.target))switch(s.key){case"ArrowLeft":s.preventDefault(),e.state.isAutoplaying&&!e.state.isPaused&&g(e,"keyboard"),t(e);break;case"ArrowRight":s.preventDefault(),e.state.isAutoplaying&&!e.state.isPaused&&g(e,"keyboard"),a(e);break;case"Home":s.preventDefault(),e.state.isAutoplaying&&!e.state.isPaused&&g(e,"keyboard"),e.goTo(0);break;case"End":s.preventDefault(),e.state.isAutoplaying&&!e.state.isPaused&&g(e,"keyboard"),e.goTo(e.state.maxReachableIndex)}};e.boundHandlers.keyboard=s,n.addEventListener("keydown",s)}(e,T,P),c()&&t.classList.add(n.REDUCED_MOTION),a.autoplay&&!c()&&(t.style.setProperty(s.AUTOPLAY_DURATION,a.autoplayDuration+"ms"),E(e),A(e)),C(e),!0)}class B{constructor(e){const t=(u+=1,`carousel-${u}`),o=function(e){return{align:e.getAttribute("data-carousel-align")||a,keyboard:"true"===e.getAttribute("data-carousel-keyboard"),loop:"true"===e.getAttribute("data-carousel-loop"),scrollBy:e.getAttribute("data-carousel-scroll-by")||n,autoplay:"true"===e.getAttribute("data-carousel-autoplay"),autoplayDuration:parseInt(e.getAttribute("data-carousel-autoplay-duration"),10)||s,autoplayPauseHover:"false"!==e.getAttribute("data-carousel-autoplay-pause-hover"),autoplayPauseFocus:"false"!==e.getAttribute("data-carousel-autoplay-pause-focus")}}(e);Object.assign(this,{container:e,id:t,config:o,state:{currentIndex:0,isProgrammaticScroll:!1,itemPositions:[],gap:0,containerWidth:0,scrollWidth:0,startInset:0,endInset:0,maxReachableIndex:0,totalPositions:0,hasEmittedStart:!1,hasEmittedEnd:!1,isAutoplaying:!1,isPaused:!1,autoplayStartTime:null,autoplayElapsed:0,autoplayPausedOnIndex:null},events:new Map,rafPending:!1,boundHandlers:null,debouncedScrollHandler:null,autoplay:null});D(this)||console.warn(`Carousel ${t}: Initialization failed due to missing required elements.`)}next(){return P(this),this}prev(){return T(this),this}goTo(e){const{items:t,state:a}=this;return e<0||e>=t.length?(console.warn(`Carousel ${this.id}: Invalid index ${e}. Must be between 0 and ${t.length-1}.`),this):(e>a.maxReachableIndex&&(e=a.maxReachableIndex),a.isAutoplaying&&!a.isPaused&&(a.autoplayStartTime=performance.now()),e!==a.currentIndex&&(a.currentIndex=e,C(this),h(this,"change",{index:e})),v(this,e),this)}play(){const{CSS_VARS:e}=l;return c()||(this.autoplay||E(this),this.container.style.setProperty(e.AUTOPLAY_DURATION,this.config.autoplayDuration+"ms"),this.autoplay.pausedByUser=!1,A(this)),this}pause(){return g(this,"user"),this}getActiveIndex(){return this.state.currentIndex}refresh(){const e=this.state.totalPositions;return m(this),this.state.totalPositions!==e&&x(this),this.state.currentIndex>this.state.maxReachableIndex&&(this.state.currentIndex=this.state.maxReachableIndex),S(this),C(this),this}destroy(){return R(this),null}on(e,t){const{events:a}=this;return a.has(e)||a.set(e,[]),a.get(e).push(t),this}off(e,t){const{events:a}=this;if(!a.has(e))return this;const n=a.get(e),s=n.indexOf(t);return s>-1&&n.splice(s,1),this}static init(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)throw new Error("Carousel.init(): Container element not found");return new B(e)}}const _=new Map;function w(){document.querySelectorAll(e.CONTAINER).forEach(e=>{try{const t=new B(e);t.id&&_.set(t.id,t)}catch(e){console.warn("Carousel auto-initialization failed:",e)}}),_.size}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w(),"undefined"!=typeof window&&(window.Carousel=B,window.CarouselInstances=_)}();
//# sourceMappingURL=carousel.min.js.map
