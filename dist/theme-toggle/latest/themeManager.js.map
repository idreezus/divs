{"version":3,"file":"themeManager.js","sources":["../../../packages/theme-toggle/src/config.js","../../../packages/theme-toggle/src/themeManager.js"],"sourcesContent":["// Data attribute names\nexport const ATTRIBUTES = {\n  THEME: 'data-theme',\n  THEME_SYSTEM: 'data-theme-system',\n  TOGGLE: 'data-theme-toggle',\n  VALUE: 'data-theme-value',\n  ACTIVE: 'data-theme-active',\n};\n\n// Default configuration values\nexport const DEFAULTS = {\n  THEMES: ['light', 'dark'],\n  FALLBACK_THEME: 'light',\n};\n\n// localStorage configuration\nexport const STORAGE = {\n  KEY: 'theme',\n};\n\nexport const CONFIG = {\n  ATTRIBUTES,\n  DEFAULTS,\n  STORAGE,\n};\n","// Theme Manager - Declarative theme toggle with state management\n// Core script handles state/logic only - developers control styling via CSS\n\nimport { CONFIG } from './config.js';\n\n(() => {\n  'use strict';\n\n  const ThemeManager = {\n    // Available themes - extend this array for multi-theme support\n    themes: CONFIG.DEFAULTS.THEMES.slice(),\n\n    // Current effective theme (never \"system\")\n    current: null,\n\n    // Theme source: \"user\" or \"system\"\n    source: null,\n\n    // Initialization state\n    initialized: false,\n\n    // Internal storage for cleanup\n    _toggles: [],\n    _toggleListeners: new WeakMap(),\n    _mediaQuery: null,\n    _mediaQueryListener: null,\n\n    // Returns the effective theme (resolves 'system' to actual light/dark)\n    getEffectiveTheme(theme) {\n      if (theme === 'system') {\n        return window.matchMedia('(prefers-color-scheme: dark)').matches\n          ? 'dark'\n          : 'light';\n      }\n      return theme;\n    },\n\n    // Sets the active theme with validation\n    setTheme(theme, options = {}) {\n      const { force = false } = options;\n\n      // Determine if this is system mode\n      const isSystemMode = theme === 'system';\n      const newSource = isSystemMode ? 'system' : 'user';\n\n      // Calculate effective theme\n      const newEffective = isSystemMode\n        ? this.getEffectiveTheme('system')\n        : theme;\n\n      // Validate effective theme exists (skip validation for system mode)\n      if (!isSystemMode && this.themes.indexOf(theme) === -1) {\n        console.warn(\n          `[ThemeManager] Theme \"${theme}\" not in themes array:`,\n          this.themes\n        );\n        return this;\n      }\n\n      // Skip if no change (unless forced)\n      if (!force && newEffective === this.current && newSource === this.source) {\n        return this;\n      }\n\n      const previousEffective = this.current;\n      const previousSource = this.source;\n\n      this.current = newEffective;\n      this.source = newSource;\n\n      // Update CSS class on <body> (remove old, add new)\n      if (previousEffective) {\n        document.body.classList.remove(previousEffective);\n      }\n      document.body.classList.add(newEffective);\n\n      // Set data-theme attribute on <html> (always effective theme)\n      document.documentElement.setAttribute(CONFIG.ATTRIBUTES.THEME, newEffective);\n\n      // Handle data-theme-system (boolean attribute)\n      if (isSystemMode) {\n        document.documentElement.setAttribute(CONFIG.ATTRIBUTES.THEME_SYSTEM, '');\n      } else {\n        document.documentElement.removeAttribute(CONFIG.ATTRIBUTES.THEME_SYSTEM);\n      }\n\n      // Save to localStorage (with try/catch for private browsing)\n      try {\n        localStorage.setItem(CONFIG.STORAGE.KEY, isSystemMode ? 'system' : newEffective);\n      } catch (e) {\n        console.warn('[ThemeManager] localStorage unavailable');\n      }\n\n      // Update all toggle buttons\n      this.updateThemeButtons();\n\n      // Dispatch event if there was any change\n      const effectiveChanged = previousEffective !== newEffective;\n      if (effectiveChanged || previousSource !== newSource || force) {\n        window.dispatchEvent(\n          new CustomEvent('themechange', {\n            detail: {\n              theme: newEffective,\n              previous: previousEffective,\n              source: newSource,\n              previousSource,\n              effectiveChanged,\n            },\n          })\n        );\n      }\n\n      return this;\n    },\n\n    // Returns the current effective theme\n    getTheme() {\n      return this.current;\n    },\n\n    // Returns the current source (\"user\" or \"system\")\n    getSource() {\n      return this.source;\n    },\n\n    // Cycles to the next theme (skips \"system\")\n    toggleTheme() {\n      // Filter out \"system\" from cycle\n      const cyclableThemes = this.themes.filter((t) => t !== 'system');\n\n      const currentIndex = cyclableThemes.indexOf(this.current);\n      const nextIndex =\n        currentIndex === -1 ? 0 : (currentIndex + 1) % cyclableThemes.length;\n\n      return this.setTheme(cyclableThemes[nextIndex]);\n    },\n\n    // Updates all toggle and value button states\n    updateThemeButtons() {\n      // Handle data-theme-value buttons\n      document\n        .querySelectorAll(`[${CONFIG.ATTRIBUTES.VALUE}]`)\n        .forEach((btn) => {\n          const btnTheme = btn.getAttribute(CONFIG.ATTRIBUTES.VALUE);\n\n          let isActive = false;\n          if (btnTheme === 'system') {\n            // System button is active when source is system\n            isActive = this.source === 'system';\n          } else {\n            // Theme button is active when it matches current effective theme\n            isActive = btnTheme === this.current;\n          }\n\n          // Boolean attribute (present/absent)\n          if (isActive) {\n            btn.setAttribute(CONFIG.ATTRIBUTES.ACTIVE, '');\n          } else {\n            btn.removeAttribute(CONFIG.ATTRIBUTES.ACTIVE);\n          }\n\n          // Accessibility\n          btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n          if (!btn.hasAttribute('aria-label')) {\n            btn.setAttribute('aria-label', `${btnTheme} theme`);\n          }\n        });\n\n      // Handle data-theme-toggle buttons (never active)\n      document\n        .querySelectorAll(`[${CONFIG.ATTRIBUTES.TOGGLE}]`)\n        .forEach((btn) => {\n          btn.removeAttribute(CONFIG.ATTRIBUTES.ACTIVE);\n          if (!btn.hasAttribute('aria-label')) {\n            btn.setAttribute('aria-label', 'Toggle theme');\n          }\n        });\n\n      return this;\n    },\n\n    // Sets up toggle and value button click listeners\n    _setupToggles() {\n      // Setup data-theme-toggle (cycle)\n      document\n        .querySelectorAll(`[${CONFIG.ATTRIBUTES.TOGGLE}]`)\n        .forEach((btn) => {\n          const listener = () => this.toggleTheme();\n          btn.addEventListener('click', listener);\n          this._toggles.push(btn);\n          this._toggleListeners.set(btn, listener);\n        });\n\n      // Setup data-theme-value (explicit)\n      document\n        .querySelectorAll(`[${CONFIG.ATTRIBUTES.VALUE}]`)\n        .forEach((btn) => {\n          const theme = btn.getAttribute(CONFIG.ATTRIBUTES.VALUE);\n          const listener = () => this.setTheme(theme);\n          btn.addEventListener('click', listener);\n          this._toggles.push(btn);\n          this._toggleListeners.set(btn, listener);\n        });\n    },\n\n    // Removes toggle button click listeners\n    _teardownToggles() {\n      this._toggles.forEach((toggle) => {\n        const listener = this._toggleListeners.get(toggle);\n        if (listener) {\n          toggle.removeEventListener('click', listener);\n          this._toggleListeners.delete(toggle);\n        }\n      });\n      this._toggles = [];\n    },\n\n    // Initializes ThemeManager and attaches event listeners\n    init() {\n      if (this.initialized) {\n        console.warn('[ThemeManager] Already initialized. Call destroy() first.');\n        return this;\n      }\n\n      try {\n        // Read initial theme from localStorage\n        let stored = null;\n        try {\n          stored = localStorage.getItem(CONFIG.STORAGE.KEY);\n        } catch (e) {\n          // localStorage unavailable\n        }\n\n        // First visit or explicit \"system\" = system mode\n        const isSystemMode = !stored || stored === 'system';\n\n        if (isSystemMode) {\n          this.source = 'system';\n          this.current = this.getEffectiveTheme('system');\n        } else if (this.themes.indexOf(stored) !== -1) {\n          this.source = 'user';\n          this.current = stored;\n        } else {\n          // Invalid stored theme - fallback to system mode\n          this.source = 'system';\n          this.current = this.getEffectiveTheme('system');\n        }\n\n        // Ensure DOM matches (in case headCode didn't run)\n        // Use force: true to ensure initial setup completes\n        this.setTheme(isSystemMode ? 'system' : this.current, { force: true });\n\n        // Setup toggle button click listeners\n        this._setupToggles();\n\n        // Setup system preference sync\n        this._setupSystemSync();\n\n        this.initialized = true;\n      } catch (e) {\n        console.error('[ThemeManager] Initialization failed:', e);\n      }\n\n      return this;\n    },\n\n    // Sets up system preference change listener\n    _setupSystemSync() {\n      this._mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n      this._mediaQueryListener = (e) => {\n        // Only react if source is system\n        if (this.source === 'system') {\n          const newEffective = e.matches ? 'dark' : 'light';\n          const previousEffective = this.current;\n\n          this.current = newEffective;\n\n          // Update DOM\n          document.body.classList.remove(previousEffective);\n          document.body.classList.add(newEffective);\n          document.documentElement.setAttribute(\n            CONFIG.ATTRIBUTES.THEME,\n            newEffective\n          );\n\n          // Update button states\n          this.updateThemeButtons();\n\n          // Dispatch event for developer animations\n          window.dispatchEvent(\n            new CustomEvent('themechange', {\n              detail: {\n                theme: newEffective,\n                previous: previousEffective,\n                source: 'system',\n                previousSource: 'system',\n                effectiveChanged: true,\n              },\n            })\n          );\n        }\n      };\n\n      this._mediaQuery.addEventListener('change', this._mediaQueryListener);\n    },\n\n    // Removes system preference change listener\n    _teardownSystemSync() {\n      if (this._mediaQuery && this._mediaQueryListener) {\n        this._mediaQuery.removeEventListener('change', this._mediaQueryListener);\n        this._mediaQuery = null;\n        this._mediaQueryListener = null;\n      }\n    },\n\n    // Re-scan DOM for toggle buttons (useful for SPAs)\n    refresh() {\n      if (!this.initialized) {\n        console.warn('[ThemeManager] Not initialized. Call init() first.');\n        return this;\n      }\n\n      // Remove existing listeners\n      this._teardownToggles();\n\n      // Re-setup toggles\n      this._setupToggles();\n\n      // Update button states\n      this.updateThemeButtons();\n\n      return this;\n    },\n\n    // Cleans up event listeners and resets state\n    destroy() {\n      if (!this.initialized) {\n        return this;\n      }\n\n      // Remove toggle listeners\n      this._teardownToggles();\n\n      // Remove system sync listener\n      this._teardownSystemSync();\n\n      // Reset state\n      this.current = null;\n      this.source = null;\n      this.initialized = false;\n\n      return this;\n    },\n  };\n\n  // Auto-initialize on DOMContentLoaded\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      ThemeManager.init();\n    });\n  } else {\n    ThemeManager.init();\n  }\n\n  // Expose to window\n  if (typeof window !== 'undefined') {\n    window.ThemeManager = ThemeManager;\n  }\n})();\n"],"names":[],"mappings":"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"}