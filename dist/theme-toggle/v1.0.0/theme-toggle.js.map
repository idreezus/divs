{"version":3,"file":"theme-toggle.js","sources":["../../../packages/theme-toggle/src/theme-toggle.js"],"sourcesContent":["// Theme Manager - Declarative theme toggle with state management\n// Core script handles state/logic only - developers control styling via CSS\n\n(() => {\n  // ─── Config ────────────────────────────────────────────────────────────────\n  const ATTR_THEME = 'data-theme';\n  const ATTR_TOGGLE = 'data-theme-toggle';\n  const ATTR_VALUE = 'data-theme-value';\n  const STORAGE_KEY = 'theme';\n  const DEFAULT_THEMES = ['light', 'dark'];\n\n  // ─── Theme Manager ─────────────────────────────────────────────────────────\n  const ThemeManager = {\n    // Available themes - extend this array for multi-theme support\n    themes: DEFAULT_THEMES.slice(),\n\n    // Current effective theme (never \"system\")\n    current: null,\n\n    // User's theme choice (can be \"system\", \"light\", \"dark\", etc.)\n    theme: null,\n\n    // Initialization state\n    initialized: false,\n\n    // Internal storage for cleanup\n    _toggles: [],\n    _toggleListeners: new WeakMap(),\n    _mediaQuery: null,\n    _mediaQueryListener: null,\n\n    // Returns the effective theme (resolves 'system' to actual light/dark)\n    getEffectiveTheme(theme) {\n      if (theme === 'system') {\n        return window.matchMedia('(prefers-color-scheme: dark)').matches\n          ? 'dark'\n          : 'light';\n      }\n      return theme;\n    },\n\n    // Sets the active theme with validation\n    setTheme(newTheme, options = {}) {\n      const { force = false } = options;\n\n      // Calculate effective theme\n      const isSystemMode = newTheme === 'system';\n      const newEffective = isSystemMode\n        ? this.getEffectiveTheme('system')\n        : newTheme;\n\n      // Validate effective theme exists (skip validation for system mode)\n      if (!isSystemMode && this.themes.indexOf(newTheme) === -1) {\n        console.warn(\n          `[ThemeManager] Theme \"${newTheme}\" not in themes array:`,\n          this.themes\n        );\n        return this;\n      }\n\n      // Skip if no change (unless forced)\n      if (!force && newEffective === this.current && newTheme === this.theme) {\n        return this;\n      }\n\n      const previousEffective = this.current;\n      const previousTheme = this.theme;\n\n      this.current = newEffective;\n      this.theme = newTheme;\n\n      // Update class on <html> (remove old, add new)\n      if (previousEffective) {\n        document.documentElement.classList.remove(previousEffective);\n      }\n      document.documentElement.classList.add(newEffective);\n\n      // Set data-theme attribute to user's choice (can be \"system\")\n      document.documentElement.setAttribute(ATTR_THEME, newTheme);\n\n      // Save user's choice to localStorage\n      try {\n        localStorage.setItem(STORAGE_KEY, newTheme);\n      } catch (e) {\n        console.warn('[ThemeManager] localStorage unavailable');\n      }\n\n      // Dispatch event if there was any change\n      const effectiveChanged = previousEffective !== newEffective;\n      if (effectiveChanged || previousTheme !== newTheme || force) {\n        window.dispatchEvent(\n          new CustomEvent('themechange', {\n            detail: {\n              theme: newEffective,\n              previous: previousEffective,\n              userTheme: newTheme,\n              previousUserTheme: previousTheme,\n              effectiveChanged,\n            },\n          })\n        );\n      }\n\n      return this;\n    },\n\n    // Returns the current effective theme\n    getTheme() {\n      return this.current;\n    },\n\n    // Returns the user's theme choice (can be \"system\")\n    getUserTheme() {\n      return this.theme;\n    },\n\n    // Returns the source for backwards compatibility\n    getSource() {\n      return this.theme === 'system' ? 'system' : 'user';\n    },\n\n    // Cycles to the next theme (skips \"system\")\n    toggleTheme() {\n      // Filter out \"system\" from cycle\n      const cyclableThemes = this.themes.filter((t) => t !== 'system');\n\n      const currentIndex = cyclableThemes.indexOf(this.current);\n      const nextIndex =\n        currentIndex === -1 ? 0 : (currentIndex + 1) % cyclableThemes.length;\n\n      return this.setTheme(cyclableThemes[nextIndex]);\n    },\n\n    // Sets up toggle and value button click listeners\n    _setupToggles() {\n      // Setup data-theme-toggle (cycle)\n      document.querySelectorAll(`[${ATTR_TOGGLE}]`).forEach((btn) => {\n        const listener = () => this.toggleTheme();\n        btn.addEventListener('click', listener);\n        this._toggles.push(btn);\n        this._toggleListeners.set(btn, listener);\n      });\n\n      // Setup data-theme-value (explicit)\n      document.querySelectorAll(`[${ATTR_VALUE}]`).forEach((btn) => {\n        const theme = btn.getAttribute(ATTR_VALUE);\n        const listener = () => this.setTheme(theme);\n        btn.addEventListener('click', listener);\n        this._toggles.push(btn);\n        this._toggleListeners.set(btn, listener);\n      });\n    },\n\n    // Removes toggle button click listeners\n    _teardownToggles() {\n      this._toggles.forEach((toggle) => {\n        const listener = this._toggleListeners.get(toggle);\n        if (listener) {\n          toggle.removeEventListener('click', listener);\n          this._toggleListeners.delete(toggle);\n        }\n      });\n      this._toggles = [];\n    },\n\n    // Initializes ThemeManager and attaches event listeners\n    init() {\n      if (this.initialized) {\n        console.warn('[ThemeManager] Already initialized. Call destroy() first.');\n        return this;\n      }\n\n      try {\n        // Read user's theme choice from localStorage\n        let stored = null;\n        try {\n          stored = localStorage.getItem(STORAGE_KEY);\n        } catch (e) {\n          // localStorage unavailable\n        }\n\n        // Default to \"system\" if no stored value\n        const theme = stored || 'system';\n\n        // Validate stored theme (allow \"system\" or any theme in array)\n        if (theme !== 'system' && this.themes.indexOf(theme) === -1) {\n          // Invalid stored theme - fallback to system\n          this.theme = 'system';\n        } else {\n          this.theme = theme;\n        }\n\n        this.current = this.getEffectiveTheme(this.theme);\n\n        // Ensure DOM matches (in case head-code didn't run)\n        this.setTheme(this.theme, { force: true });\n\n        // Setup toggle button click listeners\n        this._setupToggles();\n\n        // Setup system preference sync\n        this._setupSystemSync();\n\n        this.initialized = true;\n      } catch (e) {\n        console.error('[ThemeManager] Initialization failed:', e);\n      }\n\n      return this;\n    },\n\n    // Sets up system preference change listener\n    _setupSystemSync() {\n      this._mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n      this._mediaQueryListener = (e) => {\n        // Only react if user chose system mode\n        if (this.theme === 'system') {\n          const newEffective = e.matches ? 'dark' : 'light';\n          const previousEffective = this.current;\n\n          this.current = newEffective;\n\n          // Update class on <html>\n          document.documentElement.classList.remove(previousEffective);\n          document.documentElement.classList.add(newEffective);\n\n          // Dispatch event for developer animations\n          window.dispatchEvent(\n            new CustomEvent('themechange', {\n              detail: {\n                theme: newEffective,\n                previous: previousEffective,\n                userTheme: 'system',\n                previousUserTheme: 'system',\n                effectiveChanged: true,\n              },\n            })\n          );\n        }\n      };\n\n      this._mediaQuery.addEventListener('change', this._mediaQueryListener);\n    },\n\n    // Removes system preference change listener\n    _teardownSystemSync() {\n      if (this._mediaQuery && this._mediaQueryListener) {\n        this._mediaQuery.removeEventListener('change', this._mediaQueryListener);\n        this._mediaQuery = null;\n        this._mediaQueryListener = null;\n      }\n    },\n\n    // Re-scan DOM for toggle buttons (useful for SPAs)\n    refresh() {\n      if (!this.initialized) {\n        console.warn('[ThemeManager] Not initialized. Call init() first.');\n        return this;\n      }\n\n      // Remove existing listeners\n      this._teardownToggles();\n\n      // Re-setup toggles\n      this._setupToggles();\n\n      return this;\n    },\n\n    // Cleans up event listeners and resets state\n    destroy() {\n      if (!this.initialized) {\n        return this;\n      }\n\n      // Remove toggle listeners\n      this._teardownToggles();\n\n      // Remove system sync listener\n      this._teardownSystemSync();\n\n      // Reset state\n      this.current = null;\n      this.theme = null;\n      this.initialized = false;\n\n      return this;\n    },\n  };\n\n  // Auto-initialize on DOMContentLoaded\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      ThemeManager.init();\n    });\n  } else {\n    ThemeManager.init();\n  }\n\n  // Expose to window\n  if (typeof window !== 'undefined') {\n    window.ThemeManager = ThemeManager;\n  }\n})();\n"],"names":[],"mappings":"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"}