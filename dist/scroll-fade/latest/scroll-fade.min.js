/*!
 * ScrollFade v0.1.0
 * A library for managing scroll indicators (gradient fades) based on a container's scroll position.
 *
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 *
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
var ScrollFade=function(t){"use strict";const e={...Object.fromEntries(Object.entries({container:"data-scroll-fade-container",list:"data-scroll-fade-list",prev:"data-scroll-fade-prev",next:"data-scroll-fade-next"}).map(([t,e])=>{return[t,(s=e,`[${s}]:not([${s}="false"])`)];var s})),start:'[data-scroll-fade="start"]',end:'[data-scroll-fade="end"]'},s="data-scroll-fade-orientation",i="data-scroll-fade-step",n="data-scroll-fade-id",r="scroll-fade-hidden",o="scroll-fade-button-disabled",l="reach-start",a="reach-end",h="show",c="hide",d="horizontal",u=null;let v=0;function b(t,e,s={}){const{container:i}=t,n=new CustomEvent(`scroll-fade:${e}`,{detail:{scrollFade:t,...s},bubbles:!0});i.dispatchEvent(n)}function f(){try{const t=new Intl.Locale(navigator.language);if(t.getTextInfo)return t.getTextInfo().direction}catch{}const t=document.documentElement.getAttribute("dir");return t||(getComputedStyle(document.documentElement).direction||"ltr")}function S(t,e){return"horizontal"===e?t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight}function p(t,e){return"horizontal"===e?t.scrollLeft:t.scrollTop}function m(t,e){return"horizontal"===e?t.scrollWidth-t.clientWidth:t.scrollHeight-t.clientHeight}function g(t,e){return null!==e.step?e.step:"horizontal"===e.orientation?t.clientWidth:t.clientHeight}class w{constructor(t){this.id=(v+=1,`scroll-fade-${v}`),this.container=t,this.list=null,this.config=null,this.state={isAtStart:!0,isAtEnd:!1,isVisible:!0,isScrollable:!1},this.startShadow=null,this.endShadow=null,this.prevBtn=null,this.nextBtn=null,this.boundHandlers=null,this.resizeObserver=null,this.intersectionObserver=null,this.rafId=null;this.init()&&(this.container._scrollFade=this,this.container.setAttribute(n,this.id))}init(){return!!this.findElements()&&(this.config=function(t){const e=t.getAttribute(s)||d,n=t.getAttribute(i);return{orientation:e,step:n?parseInt(n,10):u}}(this.list),this.validateOverflow(),this.state.isScrollable=S(this.list,this.config.orientation),this.setupObservers(),this.bindHandlers(),this.wireNavigationButtons(),this.updateState(!0),!0)}validateOverflow(){const t=getComputedStyle(this.list)["horizontal"===this.config.orientation?"overflowX":"overflowY"];"auto"!==t&&"scroll"!==t&&console.warn(`ScrollFade: List element should have overflow-${"horizontal"===this.config.orientation?"x":"y"}: auto or scroll.`,this.list)}findElements(){return this.list=this.container.querySelector(e.list),this.list?(this.startShadow=this.container.querySelector(e.start),this.endShadow=this.container.querySelector(e.end),this.startShadow&&this.endShadow||console.warn('ScrollFade: Shadow elements not found. Expected [data-scroll-fade="start"] and [data-scroll-fade="end"].',this.container),!0):(console.error("ScrollFade: No list element found. Expected [data-scroll-fade-list] inside container.",this.container),!1)}setupObservers(){this.resizeObserver=new ResizeObserver(()=>{this.recalculate()}),this.resizeObserver.observe(this.list),this.intersectionObserver=new IntersectionObserver(t=>{const e=t[0];this.state.isVisible=e.isIntersecting},{threshold:0}),this.intersectionObserver.observe(this.list)}bindHandlers(){this.boundHandlers={scroll:()=>this.handleScroll()},this.list.addEventListener("scroll",this.boundHandlers.scroll,{passive:!0})}wireNavigationButtons(){this.prevBtn=this.container.querySelector(e.prev),this.nextBtn=this.container.querySelector(e.next),this.prevBtn&&(this.boundHandlers.prev=()=>this.scrollPrev(),this.prevBtn.addEventListener("click",this.boundHandlers.prev)),this.nextBtn&&(this.boundHandlers.next=()=>this.scrollNext(),this.nextBtn.addEventListener("click",this.boundHandlers.next))}handleScroll(){this.state.isVisible&&(this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{this.updateState(!1)}))}updateState(t){const e=this.state.isAtStart,s=this.state.isAtEnd,i=this.state.isScrollable;var n,r;if(this.state.isScrollable=S(this.list,this.config.orientation),this.state.isAtStart=(n=this.list,r=this.config.orientation,p(n,r)<=1),this.state.isAtEnd=function(t,e){return p(t,e)>=m(t,e)-1}(this.list,this.config.orientation),!this.state.isScrollable)return this.updateShadowVisibility("start",!1,t),this.updateShadowVisibility("end",!1,t),void this.updateButtonStates();const o=!this.state.isAtStart;(t||o!==(i&&!e))&&this.updateShadowVisibility("start",o,t);const h=!this.state.isAtEnd;(t||h!==(i&&!s))&&this.updateShadowVisibility("end",h,t),t?(this.state.isAtStart&&b(this,l),this.state.isAtEnd&&b(this,a)):(this.state.isAtStart&&!e&&b(this,l),this.state.isAtEnd&&!s&&b(this,a)),this.updateButtonStates()}updateShadowVisibility(t,e,s){const i="start"===t?this.startShadow:this.endShadow;e?i.classList.remove(r):i.classList.add(r);b(this,e?h:c,{edge:t})}updateButtonStates(){this.prevBtn&&(this.state.isAtStart||!this.state.isScrollable?(this.prevBtn.classList.add(o),this.prevBtn.setAttribute("aria-disabled","true")):(this.prevBtn.classList.remove(o),this.prevBtn.removeAttribute("aria-disabled"))),this.nextBtn&&(this.state.isAtEnd||!this.state.isScrollable?(this.nextBtn.classList.add(o),this.nextBtn.setAttribute("aria-disabled","true")):(this.nextBtn.classList.remove(o),this.nextBtn.removeAttribute("aria-disabled")))}scrollPrev(){const t=g(this.list,this.config),e="rtl"===f();if("horizontal"===this.config.orientation){const s=e?t:-t;this.list.scrollBy({left:s,behavior:"smooth"})}else this.list.scrollBy({top:-t,behavior:"smooth"})}scrollNext(){const t=g(this.list,this.config),e="rtl"===f();if("horizontal"===this.config.orientation){const s=e?-t:t;this.list.scrollBy({left:s,behavior:"smooth"})}else this.list.scrollBy({top:t,behavior:"smooth"})}recalculate(){this.updateState(!1)}scrollToStart(){const t="horizontal"===this.config.orientation,e="rtl"===f();if(t){const t=e?m(this.list,this.config.orientation):0;this.list.scrollTo({left:t,behavior:"smooth"})}else this.list.scrollTo({top:0,behavior:"smooth"});return this}scrollToEnd(){const t="horizontal"===this.config.orientation,e="rtl"===f(),s=m(this.list,this.config.orientation);if(t){const t=e?0:s;this.list.scrollTo({left:t,behavior:"smooth"})}else this.list.scrollTo({top:s,behavior:"smooth"});return this}refresh(){return this.resizeObserver&&this.resizeObserver.disconnect(),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.setupObservers(),this.updateState(!1),this}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.resizeObserver&&this.resizeObserver.disconnect(),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.boundHandlers&&this.list&&this.list.removeEventListener("scroll",this.boundHandlers.scroll),this.prevBtn&&this.boundHandlers?.prev&&this.prevBtn.removeEventListener("click",this.boundHandlers.prev),this.nextBtn&&this.boundHandlers?.next&&this.nextBtn.removeEventListener("click",this.boundHandlers.next),this.prevBtn=null,this.nextBtn=null,this.startShadow&&this.startShadow.classList.remove(r),this.endShadow&&this.endShadow.classList.remove(r),delete this.container._scrollFade,this.container.removeAttribute(n)}}function B(){document.querySelectorAll(e.container).forEach(t=>{if(!t._scrollFade)try{new w(t)}catch(t){console.warn("ScrollFade auto-initialization failed:",t)}})}return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B(),t.ScrollFade=w,t}({});
//# sourceMappingURL=scroll-fade.min.js.map
