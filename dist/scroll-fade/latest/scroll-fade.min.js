/*!
 * ScrollFade v1.0.0
 * A library for managing scroll indicators (gradient fades) based on a container's scroll position.
 *
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 *
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
var ScrollFade=function(t){"use strict";const e='[data-scroll-fade-container]:not([data-scroll-fade-container="false"])',i='[data-scroll-fade-prev]:not([data-scroll-fade-prev="false"])',s='[data-scroll-fade-next]:not([data-scroll-fade-next="false"])',n="data-scroll-fade-orientation",o="data-scroll-fade-step",r="data-scroll-fade-id",a="scroll-fade-hidden",h="scroll-fade-button-disabled",l="reach-start",d="reach-end",c="show",u="hide",v="horizontal",b=null;let f=0;function S(t,e,i={}){const{container:s}=t,n=new CustomEvent(`scroll-fade:${e}`,{detail:{scrollFade:t,...i},bubbles:!0});s.dispatchEvent(n)}function p(){try{const t=new Intl.Locale(navigator.language);if(t.getTextInfo)return t.getTextInfo().direction}catch{}const t=document.documentElement.getAttribute("dir");return t||(getComputedStyle(document.documentElement).direction||"ltr")}function w(t,e){return"horizontal"===e?t.scrollWidth>t.clientWidth:t.scrollHeight>t.clientHeight}function m(t,e){return"horizontal"===e?t.scrollLeft:t.scrollTop}function g(t,e){return"horizontal"===e?t.scrollWidth-t.clientWidth:t.scrollHeight-t.clientHeight}function y(t,e){return null!==e.step?e.step:"horizontal"===e.orientation?t.clientWidth:t.clientHeight}class A{constructor(t){this.id=(f+=1,`scroll-fade-${f}`),this.container=t,this.config=function(t){const e=t.getAttribute(n)||v,i=t.getAttribute(o);return{orientation:e,step:i?parseInt(i,10):b}}(t),this.state={isAtStart:!0,isAtEnd:!1,isVisible:!0,isScrollable:!1},this.startShadow=null,this.endShadow=null,this.prevBtn=null,this.nextBtn=null,this.boundHandlers=null,this.resizeObserver=null,this.intersectionObserver=null,this.rafId=null;this.init()&&(this.container._scrollFade=this,this.container.setAttribute(r,this.id))}init(){return this.validateOverflow(),this.state.isScrollable=w(this.container,this.config.orientation),this.createShadowElements(),this.setupObservers(),this.bindHandlers(),this.wireNavigationButtons(),this.updateState(!0),!0}validateOverflow(){const t=getComputedStyle(this.container)["horizontal"===this.config.orientation?"overflowX":"overflowY"];"auto"!==t&&"scroll"!==t&&console.warn(`ScrollFade: Container should have overflow-${"horizontal"===this.config.orientation?"x":"y"}: auto or scroll.`,this.container)}createShadowElements(){const t="rtl"===p(),e="horizontal"===this.config.orientation;this.startShadow=document.createElement("div"),this.startShadow.setAttribute("data-scroll-fade","start"),this.startShadow.setAttribute("aria-hidden","true"),this.startShadow.style.position="absolute",this.startShadow.style.pointerEvents="none",this.endShadow=document.createElement("div"),this.endShadow.setAttribute("data-scroll-fade","end"),this.endShadow.setAttribute("aria-hidden","true"),this.endShadow.style.position="absolute",this.endShadow.style.pointerEvents="none",e?(t?(this.startShadow.style.right="0",this.endShadow.style.left="0"):(this.startShadow.style.left="0",this.endShadow.style.right="0"),this.startShadow.style.top="0",this.endShadow.style.top="0"):(this.startShadow.style.top="0",this.startShadow.style.left="0",this.endShadow.style.bottom="0",this.endShadow.style.left="0"),this.container.appendChild(this.startShadow),this.container.appendChild(this.endShadow)}setupObservers(){this.resizeObserver=new ResizeObserver(()=>{this.recalculate()}),this.resizeObserver.observe(this.container),this.intersectionObserver=new IntersectionObserver(t=>{const e=t[0];this.state.isVisible=e.isIntersecting},{threshold:0}),this.intersectionObserver.observe(this.container)}bindHandlers(){this.boundHandlers={scroll:()=>this.handleScroll()},this.container.addEventListener("scroll",this.boundHandlers.scroll,{passive:!0})}wireNavigationButtons(){this.prevBtn=document.querySelector(i),this.prevBtn&&(this.prevBtn.closest(e),this.container),this.nextBtn=document.querySelector(s),this.prevBtn&&this.prevBtn.addEventListener("click",()=>this.scrollPrev()),this.nextBtn&&this.nextBtn.addEventListener("click",()=>this.scrollNext())}handleScroll(){this.state.isVisible&&(this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{this.updateState(!1)}))}updateState(t){const e=this.state.isAtStart,i=this.state.isAtEnd,s=this.state.isScrollable;var n,o;if(this.state.isScrollable=w(this.container,this.config.orientation),this.state.isAtStart=(n=this.container,o=this.config.orientation,m(n,o)<=1),this.state.isAtEnd=function(t,e){return m(t,e)>=g(t,e)-1}(this.container,this.config.orientation),!this.state.isScrollable)return this.updateShadowVisibility("start",!1,t),this.updateShadowVisibility("end",!1,t),void this.updateButtonStates();const r=!this.state.isAtStart;(t||r!==(s&&!e))&&this.updateShadowVisibility("start",r,t);const a=!this.state.isAtEnd;(t||a!==(s&&!i))&&this.updateShadowVisibility("end",a,t),t?(this.state.isAtStart&&S(this,l),this.state.isAtEnd&&S(this,d)):(this.state.isAtStart&&!e&&S(this,l),this.state.isAtEnd&&!i&&S(this,d)),this.updateButtonStates()}updateShadowVisibility(t,e,i){const s="start"===t?this.startShadow:this.endShadow;e?s.classList.remove(a):s.classList.add(a);S(this,e?c:u,{edge:t})}updateButtonStates(){this.prevBtn&&(this.state.isAtStart||!this.state.isScrollable?(this.prevBtn.classList.add(h),this.prevBtn.setAttribute("aria-disabled","true")):(this.prevBtn.classList.remove(h),this.prevBtn.removeAttribute("aria-disabled"))),this.nextBtn&&(this.state.isAtEnd||!this.state.isScrollable?(this.nextBtn.classList.add(h),this.nextBtn.setAttribute("aria-disabled","true")):(this.nextBtn.classList.remove(h),this.nextBtn.removeAttribute("aria-disabled")))}scrollPrev(){const t=y(this.container,this.config),e="rtl"===p();if("horizontal"===this.config.orientation){const i=e?t:-t;this.container.scrollBy({left:i,behavior:"smooth"})}else this.container.scrollBy({top:-t,behavior:"smooth"})}scrollNext(){const t=y(this.container,this.config),e="rtl"===p();if("horizontal"===this.config.orientation){const i=e?-t:t;this.container.scrollBy({left:i,behavior:"smooth"})}else this.container.scrollBy({top:t,behavior:"smooth"})}recalculate(){this.updateState(!1)}scrollToStart(){const t="horizontal"===this.config.orientation,e="rtl"===p();if(t){const t=e?g(this.container,this.config.orientation):0;this.container.scrollTo({left:t,behavior:"smooth"})}else this.container.scrollTo({top:0,behavior:"smooth"});return this}scrollToEnd(){const t="horizontal"===this.config.orientation,e="rtl"===p(),i=g(this.container,this.config.orientation);if(t){const t=e?0:i;this.container.scrollTo({left:t,behavior:"smooth"})}else this.container.scrollTo({top:i,behavior:"smooth"});return this}refresh(){return this.resizeObserver&&this.resizeObserver.disconnect(),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.setupObservers(),this.updateState(!1),this}destroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.resizeObserver&&this.resizeObserver.disconnect(),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.boundHandlers&&this.container.removeEventListener("scroll",this.boundHandlers.scroll),this.prevBtn=null,this.nextBtn=null,this.startShadow&&this.startShadow.parentNode&&this.startShadow.parentNode.removeChild(this.startShadow),this.endShadow&&this.endShadow.parentNode&&this.endShadow.parentNode.removeChild(this.endShadow),delete this.container._scrollFade,this.container.removeAttribute(r)}}function B(){document.querySelectorAll(e).forEach(t=>{if(!t._scrollFade)try{new A(t)}catch(t){console.warn("ScrollFade auto-initialization failed:",t)}})}return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B(),t.ScrollFade=A,t}({});
//# sourceMappingURL=scroll-fade.min.js.map
