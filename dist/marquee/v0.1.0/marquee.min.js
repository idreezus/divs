/*!
 * Marquee v0.1.0
 * A seamless marquee animation library powered by GSAP
 * 
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 * 
 * (c) 2025 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
!function(){"use strict";const e={attributes:{container:"data-marquee",direction:"data-marquee-direction",item:"data-marquee-item",speed:"data-marquee-speed",reverse:"data-marquee-reverse",repeat:"data-marquee-repeat"},defaults:{speed:.7,repeat:-1,paused:!1,reversed:!1}},t={attributes:{autoClone:"data-marquee-auto-clone",cloneCount:"data-marquee-clones"},defaults:{autoClone:!0,cloneCount:2}},n={attributes:{effect:"data-marquee-hover-effect",effectTrigger:"data-marquee-hover-trigger",rampRatio:"data-marquee-hover-speed",pauseDuration:"data-marquee-hover-duration",slowDurationIn:"data-marquee-hover-in",slowDurationOut:"data-marquee-hover-out",slowEaseIn:"data-marquee-hover-ease-in",slowEaseOut:"data-marquee-hover-ease-out"},defaults:{effectType:null,triggerArea:"container",rampRatioWhileHoveringForPause:.1,rampRatioWhileHoveringForSlow:.3,totalPauseRampDuration:.4,slowRampInDuration:.7,slowRampOutDuration:.25,slowRampInEase:"power1.out",slowRampOutEase:"power1.out"}},i={attributes:{intersection:"data-marquee-intersection"},defaults:{intersection:!0,threshold:.1,rootMargin:"0px"}},r={attributes:{reverseWarned:"data-marquee-reverse-warned",stylesValidated:"data-marquee-styles-validated",clone:"data-marquee-clone"}};function o(e,t,n,i){const r=e.getAttribute(t);if(null===r)return n;const o=parseFloat(r);return Number.isNaN(o)?n:o<i?i:o}function a(e,t,n,i,r){const o=e.getAttribute(t);if(null===o)return n;const a=parseInt(o,10);return Number.isNaN(a)?n:"number"==typeof i&&a<i?i:"number"==typeof r&&a>r?r:a}function s(t){const n=window.getComputedStyle(t).flexDirection;"row-reverse"!==n&&"column-reverse"!==n||t.hasAttribute(r.attributes.reverseWarned)||(console.warn('Marquee: Detected flex-direction "'+n+'". For reverse animation, use '+e.attributes.reverse+'="true" instead of CSS reverse directions.',t),t.setAttribute(r.attributes.reverseWarned,"true"));return"column"===n||"column-reverse"===n?"vertical":"horizontal"}function l(e,n,i,o=!1){const a=e.getAttribute(t.attributes.autoClone);if(!(null===a?i?.autoClone??t.defaults.autoClone:"false"!==a))return;const s=e.getAttribute(t.attributes.cloneCount);let l;if(s){if(l=parseInt(s,10),isNaN(l)||l<1)return;l>10&&(l=10)}else l=function(e,t,n){if(0===t.length)return 1;const i=n?e.clientHeight:e.clientWidth;let r=0;if(1===t.length)r=n?t[0].offsetHeight:t[0].offsetWidth;else{const e=t[0].getBoundingClientRect(),i=t[t.length-1].getBoundingClientRect();r=n?i.bottom-e.top:i.right-e.left}const o=2*i,a=Math.ceil(o/r);return window.location.search.includes("marquee-debug")&&console.log("Clone calculation:",{containerSize:i,totalContentSize:r,requiredSize:o,clonesNeeded:a,itemCount:t.length}),Math.max(1,Math.min(10,a))}(e,n,o),window.location.search.includes("marquee-debug")&&console.log("Marquee: Auto-calculated clone count:",l,"for",e);if(!(l<1))for(let t=0;t<l;t++)n.forEach(t=>{const n=t.cloneNode(!0);n.setAttribute("aria-hidden","true"),n.setAttribute(r.attributes.clone,"true"),e.appendChild(n)})}function u(e){e.querySelectorAll(`[${r.attributes.clone}="true"]`).forEach(e=>e.remove())}function c(e,t){let n;return e=gsap.utils.toArray(e),t=t||{},gsap.context(()=>{const i=gsap.timeline({repeat:t.repeat,paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>i.totalTime(i.rawTime()+100*i.duration())}),r=e.length;let o=e[0].offsetLeft;const a=[],s=[],l=[],u=[];let c=0;const d=100*(t.speed||1),p=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1);let m;const h=e[0].parentNode;let f,g=!1;gsap.set(e,{x:0});const v=()=>{gsap.set(e,{xPercent:(e,t)=>{const n=s[e]=parseFloat(gsap.getProperty(t,"width","px"));return u[e]=p(parseFloat(gsap.getProperty(t,"x","px"))/n*100+gsap.getProperty(t,"xPercent")),u[e]}});const n=h.getBoundingClientRect(),i=e.map(e=>e.getBoundingClientRect());if(i.forEach((e,t)=>{l[t]=e.left-(t?i[t-1].right:n.left)}),null==t.paddingRight||isNaN(parseFloat(t.paddingRight))){const e=l.slice(1).filter(e=>"number"==typeof e&&isFinite(e));if(e.length>0){const n=e.slice().sort((e,t)=>e-t),i=Math.floor(n.length/2),r=n.length%2==0?(n[i-1]+n[i])/2:n[i];t.paddingRight=r>0?r:0}else t.paddingRight=0}o=e[0].offsetLeft,m=e[r-1].offsetLeft+u[r-1]/100*s[r-1]-o+e[r-1].offsetWidth*gsap.getProperty(e[r-1],"scaleX")+(parseFloat(t.paddingRight)||0)},w=()=>{i.clear();for(let t=0;t<r;t++){const n=e[t],r=u[t]/100*s[t],c=n.offsetLeft+r-o+l[0],h=c+s[t]*gsap.getProperty(n,"scaleX");i.to(n,{xPercent:p((r-h)/s[t]*100),duration:h/d},0).fromTo(n,{xPercent:p((r-h+m)/s[t]*100)},{xPercent:u[t],duration:(r-h+m-r)/d,immediateRender:!1},h/d).add("label"+t,c/d),a[t]=c/d}},y=e=>{const t=i.progress();i.progress(0,!0),v(),e&&w(),i.progress(t,!0)};let b=null;function C(e,t){t=t||{},Math.abs(e-c)>r/2&&(e+=e>c?-r:r);const n=gsap.utils.wrap(0,r,e);let o=a[n];return o>i.time()!=e>c&&(t.modifiers={time:gsap.utils.wrap(0,i.duration())},o+=i.duration()*(e>c?1:-1)),c=n,t.overwrite=!0,i.tweenTo(o,t)}return v(),w(),i.progress(1,!0).progress(0,!0),t.reversed&&(i.vars.onReverseComplete(),i.reverse()),i.next=e=>C(c+1,e),i.previous=e=>C(c-1,e),i.current=()=>c,i.toIndex=(e,t)=>C(e,t),i.times=a,i.refresh=y,"function"==typeof ResizeObserver&&(f=new ResizeObserver(()=>(null!==b&&cancelAnimationFrame(b),void(b=requestAnimationFrame(()=>{b=null,t.onDirectionChange&&(t.onDirectionChange(),g)?b=null:y(!0)})))),f.observe(h)),i.cleanup=()=>{g=!0,f&&(f.disconnect(),f=null)},n=i,()=>i.cleanup()}),n}function d(e,t){let n;return e=gsap.utils.toArray(e),t=t||{},gsap.context(()=>{const i=t.onChange;let r=0;const o=gsap.timeline({repeat:t.repeat,onUpdate:i&&function(){const t=o.closestIndex();r!==t&&(r=t,i(e[t],t))},paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>o.totalTime(o.rawTime()+100*o.duration())}),a=e.length;let s=e[0].offsetTop;const l=[],u=[],c=[],d=[];let p=0,m=!1;const h=t.center,f=100*(t.speed||1),g=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1);let v=0;const w=!0===h?e[0].parentNode:gsap.utils.toArray(h)[0]||e[0].parentNode;let y;const b=Object.prototype.hasOwnProperty.call(t,"paddingBottom")&&!isNaN(parseFloat(t.paddingBottom));let C=!1;const R=()=>{s=e[0].offsetTop;let n,i=w.getBoundingClientRect();if(e.forEach((e,t)=>{u[t]=parseFloat(gsap.getProperty(e,"height","px")),d[t]=g(parseFloat(gsap.getProperty(e,"y","px"))/u[t]*100+gsap.getProperty(e,"yPercent")),n=e.getBoundingClientRect(),c[t]=n.top-(t?i.bottom:i.top),i=n}),!b){const e=c.slice(1).filter(e=>"number"==typeof e&&isFinite(e));if(e.length>0){const n=e.slice().sort((e,t)=>e-t),i=Math.floor(n.length/2),r=n.length%2==0?(n[i-1]+n[i])/2:n[i];t.paddingBottom=r>0?r:0}else t.paddingBottom=0}gsap.set(e,{yPercent:e=>d[e]}),y=e[a-1].offsetTop+d[a-1]/100*u[a-1]-s+e[a-1].offsetHeight*gsap.getProperty(e[a-1],"scaleY")+(parseFloat(t.paddingBottom)||0)};let q;const A=()=>{v=h?o.duration()*(w.offsetHeight/2)/y:0,h&&l.forEach((e,t)=>{l[t]=q(o.labels["label"+t]+o.duration()*u[t]/2/y-v)})},M=(e,t,n)=>{let i,r=e.length,o=1e10,a=0;for(;r--;)i=Math.abs(e[r]-t),i>n/2&&(i=n-i),i<o&&(o=i,a=r);return a},S=()=>{let t,n,i,r,p;for(o.clear(),t=0;t<a;t++)n=e[t],i=d[t]/100*u[t],r=n.offsetTop+i-s+c[0],p=r+u[t]*gsap.getProperty(n,"scaleY"),o.to(n,{yPercent:g((i-p)/u[t]*100),duration:p/f},0).fromTo(n,{yPercent:g((i-p+y)/u[t]*100)},{yPercent:d[t],duration:(i-p+y-i)/f,immediateRender:!1},p/f).add("label"+t,r/f),l[t]=r/f;q=gsap.utils.wrap(0,o.duration())},E=e=>{const t=o.progress();o.progress(0,!0),R(),e&&S(),A(),e&&o.draggable&&o.paused()?o.time(l[p],!0):o.progress(t,!0)};let T=null;const D=()=>{null!==T&&cancelAnimationFrame(T),T=requestAnimationFrame(()=>{T=null,t.onDirectionChange&&(t.onDirectionChange(),C)?T=null:E(!0)})};let x,I,P;function O(e,t){t=t||{},Math.abs(e-p)>a/2&&(e+=e>p?-a:a);const n=gsap.utils.wrap(0,a,e);let i=l[n];return i>o.time()!=e>p&&e!==p&&(i+=o.duration()*(e>p?1:-1)),(i<0||i>o.duration())&&(t.modifiers={time:q}),p=n,t.overwrite=!0,gsap.killTweensOf(x),0===t.duration?o.time(q(i)):o.tweenTo(i,t)}if(gsap.set(e,{y:0}),R(),S(),A(),"function"==typeof ResizeObserver&&(I=new ResizeObserver(()=>D()),I.observe(w)),P=()=>D(),window.addEventListener("resize",P,{passive:!0}),o.toIndex=(e,t)=>O(e,t),o.closestIndex=e=>{const t=M(l,o.time(),o.duration());return e&&(p=t,m=!1),t},o.current=()=>m?o.closestIndex(!0):p,o.next=e=>O(o.current()+1,e),o.previous=e=>O(o.current()-1,e),o.times=l,o.progress(1,!0).progress(0,!0),t.reversed&&(o.vars.onReverseComplete(),o.reverse()),t.draggable&&"function"==typeof Draggable){x=document.createElement("div");const t=gsap.utils.wrap(0,1);let n,i,r,a,s,u;const c=()=>o.progress(t(i+(r.startY-r.y)*n)),d=()=>o.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),r=Draggable.create(x,{trigger:e[0].parentNode,type:"y",onPressInit(){const e=this.y;gsap.killTweensOf(o),u=!o.paused(),o.pause(),i=o.progress(),E(),n=1/y,s=i/-n-e,gsap.set(x,{y:i/-n})},onDrag:c,onThrowUpdate:c,overshootTolerance:0,inertia:!0,snap(e){if(Math.abs(i/-n-this.y)<10)return a+s;const t=-e*n*o.duration(),r=q(t);let u=l[M(l,r,o.duration())]-r;return Math.abs(u)>o.duration()/2&&(u+=u<0?o.duration():-o.duration()),a=(t+u)/o.duration()/-n,a},onRelease(){d(),r.isThrowing&&(m=!0)},onThrowComplete:()=>{d(),u&&o.play()}})[0],o.draggable=r}return o.closestIndex(!0),r=p,i&&i(e[p],p),o.refresh=E,o.cleanup=()=>{C=!0,I&&(I.disconnect(),I=null),P&&(window.removeEventListener("resize",P),P=null)},n=o,()=>o.cleanup()}),n}function p(e,t,n){if(!e||!Array.isArray(t)||t.length<2)return 0;const i=t.map(e=>e.getBoundingClientRect()),r=[];for(let e=0;e<i.length-1;e++){const t=i[e],o=i[e+1],a=n?o.top-t.bottom:o.left-t.right;r.push(a)}const o=r.filter(e=>isFinite(e));if(0===o.length)return 0;o.sort((e,t)=>e-t);const a=o.length,s=a%2==1?o[(a-1)/2]:(o[a/2-1]+o[a/2])/2;return Math.max(0,Math.round(1e3*s)/1e3)}function m(e){if(e.timeline){if("function"==typeof e.timeline.cleanup)try{e.timeline.cleanup()}catch(e){}e.timeline.kill(),e.timeline=null}}function h(e){e.forEach(e=>{e.style.flexShrink="0",e.style.willChange="transform"})}function f(e){window.gsap&&window.gsap.set(e,{x:0,y:0,xPercent:0,yPercent:0})}function g(e,t){const n=()=>{e.isHovering=!0,"pause"===t.effectType?function(e,t){if(!e.timeline)return;if(e.wasPausedByEffect&&e.timeline.paused())return;const n=v(e),i=Math.abs(e.baseTimeScale)||1,r=Math.max(0,Math.min(t.rampRatioWhileHoveringForPause,i)),o=Math.max(0,t.totalPauseRampDuration);if(0===o)return w(e,0,0,t.slowRampInEase),e.timeline.pause(),void(e.wasPausedByEffect=!0);const a=r>0?Math.max(0,.6*o):0,s=Math.max(0,o-a);e.pauseRampTimeline&&(e.pauseRampTimeline.kill(),e.pauseRampTimeline=null);if(window.gsap){const i=window.gsap.timeline();a>0&&i.to(e.timeline,{timeScale:n*r,duration:a,ease:t.slowRampInEase,overwrite:"auto"}),i.to(e.timeline,{timeScale:0,duration:s,ease:t.slowRampOutEase||t.slowRampInEase,overwrite:"auto"}),i.eventCallback("onComplete",()=>{e.isHovering&&e.timeline&&(e.timeline.pause(),e.wasPausedByEffect=!0),e.pauseRampTimeline=null}),e.pauseRampTimeline=i}}(e,t):"slow"===t.effectType&&function(e,t){if(!e.timeline)return;const n=v(e),i=Math.abs(e.baseTimeScale)||1,r=Math.max(0,Math.min(t.rampRatioWhileHoveringForSlow,i));w(e,n*r,t.slowRampInDuration,t.slowRampInEase)}(e,t)},i=()=>{e.isHovering=!1,"pause"===t.effectType?function(e,t){if(!e.timeline)return;e.pauseRampTimeline&&(e.pauseRampTimeline.kill(),e.pauseRampTimeline=null);e.wasPausedByEffect&&e.timeline.paused()&&e.timeline.play();e.wasPausedByEffect=!1;const n=v(e),i=Math.abs(e.baseTimeScale)||1;w(e,n*i,t.slowRampOutDuration,t.slowRampOutEase)}(e,t):"slow"===t.effectType&&function(e,t){if(!e.timeline)return;const n=v(e),i=Math.abs(e.baseTimeScale)||1;w(e,n*i,t.slowRampOutDuration,t.slowRampOutEase)}(e,t)};if("items"===t.triggerArea){e.findMarqueeItems().forEach(t=>{t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",i),e.eventListeners.push({type:"mouseenter",handler:n,target:t}),e.eventListeners.push({type:"mouseleave",handler:i,target:t})})}else e.container.addEventListener("mouseenter",n),e.container.addEventListener("mouseleave",i),e.eventListeners.push({type:"mouseenter",handler:n,target:e.container}),e.eventListeners.push({type:"mouseleave",handler:i,target:e.container})}function v(e){return e.timeline&&e.timeline.timeScale()<0?-1:1}function w(e,t,n,i){e.timeline&&window.gsap&&window.gsap.to(e.timeline,{timeScale:t,duration:Math.max(0,n||0),ease:i||"power2.out",overwrite:"auto"})}function y(e,t){if(!("IntersectionObserver"in window))return console.warn("Marquee: IntersectionObserver not supported in this browser. Marquee will start immediately.",e.container),void(e.timeline&&e.timeline.paused()&&e.timeline.play());const n={threshold:t.threshold,rootMargin:t.rootMargin};e.intersectionObserver=new IntersectionObserver(t=>{t.forEach(t=>{t.target===e.container&&e.timeline&&(t.isIntersecting?e.timeline.paused()&&(e.coreConfig.reversed?e.timeline.reverse():e.timeline.play()):e.timeline.paused()||e.timeline.pause())})},n),e.intersectionObserver.observe(e.container)}class b{constructor(r,l={}){if(!(r&&r instanceof window.Element))throw new Error("Marquee: container must be a valid DOM element");if(window.gsap){this.container=r,this.timeline=null,this.eventListeners=[],this.isHovering=!1,this.wasPausedByEffect=!1,this.pauseRampTimeline=null,this.baseTimeScale=1,this.currentDirection=null,this.intersectionObserver=null;try{this.coreConfig=function(t){const{attributes:n,defaults:i}=e,r=t.getAttribute(n.reverse);return{direction:s(t),speed:o(t,n.speed,i.speed,0),repeat:a(t,n.repeat,i.repeat),paused:i.paused,reversed:"true"===r}}(r,l.core),this.cloningConfig=function(e){const{attributes:n,defaults:i}=t,r=e.getAttribute(n.autoClone),o=null===r?i.autoClone:"false"!==r,s=e.getAttribute(n.cloneCount),l=s?parseInt(s,10):null;return null!==l&&!isNaN(l)&&l>10&&console.warn("Marquee: Clone count capped at 10 for performance. Requested:",l,"â†’ Using: 10. To improve performance with many items, reduce data-marquee-clones.",e),{autoClone:o,cloneCount:a(e,n.cloneCount,i.cloneCount,1,10)}}(r,l.cloning),this.interactionConfig=function(e){const{attributes:t,defaults:i}=n,r=e.getAttribute(t.effect),a="pause"===r||"slow"===r?r:null,s=e.getAttribute(t.effectTrigger),l="items"===s||"container"===s?s:i.triggerArea,u=e.getAttribute(t.rampRatio),c=null===u?null:Math.max(0,parseFloat(u)),d={effectType:a,triggerArea:l,rampRatioWhileHoveringForPause:i.rampRatioWhileHoveringForPause,rampRatioWhileHoveringForSlow:i.rampRatioWhileHoveringForSlow,totalPauseRampDuration:o(e,t.pauseDuration,i.totalPauseRampDuration,0),slowRampInDuration:o(e,t.slowDurationIn,i.slowRampInDuration,0),slowRampOutDuration:o(e,t.slowDurationOut,i.slowRampOutDuration,0),slowRampInEase:e.getAttribute(t.slowEaseIn)||i.slowRampInEase,slowRampOutEase:e.getAttribute(t.slowEaseOut)||i.slowRampOutEase};return null===c||Number.isNaN(c)||("pause"===d.effectType?d.rampRatioWhileHoveringForPause=c:d.rampRatioWhileHoveringForSlow=c),d}(r,l.interaction),this.observerConfig=function(e){const{attributes:t,defaults:n}=i,r=e.getAttribute(t.intersection);return{intersection:null===r?n.intersection:"false"!==r,threshold:n.threshold,rootMargin:n.rootMargin}}(r,l.observers)}catch(e){return void console.error("Marquee: Failed to parse configuration",e)}this.initialize()}else console.error('Marquee: GSAP is required but not found.\nLoad GSAP before the marquee library:\n<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"><\/script>')}initialize(){try{const t=this.getOriginalItems();if(0===t.length)return void console.warn('Marquee: No items found with data-marquee-item="true".\nAdd the attribute to child elements:\n<div data-marquee-item="true">Item content</div>',this.container);this.validateContainerStyles(),this.applyContainerStyles();const n="vertical"===this.coreConfig.direction;if(l(this.container,t,this.cloningConfig,n),this.observerConfig.intersection&&(this.coreConfig.paused=!0),function(t){try{m(t);const n=t.findMarqueeItems();if(0===n.length)return void console.warn("Marquee: No items to animate");const i="vertical"===t.coreConfig.direction;h(n),f(n);const r=Array.from(t.container.querySelectorAll(`[${e.attributes.item}="true"]:not([aria-hidden="true"])`)),o=r.length>1?r:n,a=p(t.container,o,i),s={speed:t.coreConfig.speed,repeat:t.coreConfig.repeat,paused:t.coreConfig.paused,reversed:t.coreConfig.reversed,...i?{paddingBottom:a}:{paddingRight:a},onDirectionChange:()=>{t.checkDirectionChange()&&t.refreshDirection()}};t.timeline=i?d(n,s):c(n,s)}catch(e){console.error("Marquee: Failed to build timeline",e)}}(this),!this.timeline)return void console.error("Marquee: Failed to create timeline. Possible causes:\n- Items are hidden (display: none)\n- Items have zero width/height\n- Invalid CSS on container or items",this.container);this.baseTimeScale=this.timeline.timeScale(),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&this.timeline.timeScale(.1*this.timeline.timeScale()),this.observerConfig.intersection&&this.timeline&&y(this,this.observerConfig),this.interactionConfig?.effectType&&g(this,this.interactionConfig),this.currentDirection=this.coreConfig.direction}catch(e){console.error("Marquee: Initialization failed",e,this.container)}}checkDirectionChange(){const e=window.getComputedStyle(this.container).flexDirection;return("column"===e||"column-reverse"===e?"vertical":"horizontal")!==this.currentDirection}refreshDirection(){if(this.checkDirectionChange()){const e=window.getComputedStyle(this.container).flexDirection,t="column"===e||"column-reverse"===e?"vertical":"horizontal";this.currentDirection=t,this.coreConfig.direction=t,this.rebuild(!0)}}validateContainerStyles(){if(this.container.hasAttribute(r.attributes.stylesValidated))return;const e=window.getComputedStyle(this.container);"flex"!==e.display&&"inline-flex"!==e.display&&console.warn("Marquee: Container should have display: flex. Add it to your CSS or let the library apply it.",this.container),"hidden"!==e.overflow&&console.warn("Marquee: Container should have overflow: hidden. Add it to your CSS or let the library apply it.",this.container),this.container.setAttribute(r.attributes.stylesValidated,"true")}applyContainerStyles(){const e=window.getComputedStyle(this.container);"flex"!==e.display&&"inline-flex"!==e.display&&(this.container.style.display="flex"),"hidden"!==e.overflow&&(this.container.style.overflow="hidden")}getOriginalItems(){return Array.from(this.container.querySelectorAll(`[${e.attributes.item}="true"]:not([aria-hidden="true"])`))}findMarqueeItems(){return Array.from(this.container.querySelectorAll(`[${e.attributes.item}="true"]`))}rebuild(t=!0){this.pauseRampTimeline&&(this.pauseRampTimeline.kill(),this.pauseRampTimeline=null),this.wasPausedByEffect=!1,this.isHovering=!1,u(this.container);const n=this.getOriginalItems(),i="vertical"===this.coreConfig.direction;l(this.container,n,this.cloningConfig,i),function(t,n=!0){const i=t.timeline,r=i?i.paused():!t.coreConfig?.paused,o=i?i.time():0,a=i?i.timeScale():1;m(t);const s=t.findMarqueeItems();h(s),f(s);const l="vertical"===t.coreConfig.direction,u=Array.from(t.container.querySelectorAll(`[${e.attributes.item}="true"]:not([aria-hidden="true"])`)),g=u.length>1?u:s,v=p(t.container,g,l),w={speed:t.coreConfig.speed,repeat:t.coreConfig.repeat,paused:t.coreConfig.paused,reversed:t.coreConfig.reversed,...l?{paddingBottom:v}:{paddingRight:v},onDirectionChange:()=>{t.checkDirectionChange()&&t.refreshDirection()}};if(t.timeline=l?d(s,w):c(s,w),n){const e=t.timeline.duration(),n=e>0?e:0,i=n?(o%n+n)%n:0;t.timeline.time(i,!0),t.timeline.timeScale(a),r?t.timeline.pause():t.coreConfig.reversed?t.timeline.reverse():t.timeline.play()}}(this,t),this.baseTimeScale=this.timeline?this.timeline.timeScale():1,this.observerConfig.intersection&&this.timeline&&(this.intersectionObserver&&this.intersectionObserver.disconnect(),y(this,this.observerConfig))}play(){this.timeline&&this.timeline.play()}pause(){this.timeline&&this.timeline.pause()}destroy(){if(this.eventListeners.forEach(({type:e,handler:t,target:n})=>{n.removeEventListener(e,t)}),this.eventListeners=[],this.pauseRampTimeline&&(this.pauseRampTimeline.kill(),this.pauseRampTimeline=null),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.timeline){if("function"==typeof this.timeline.cleanup)try{this.timeline.cleanup()}catch(e){}this.timeline.kill(),this.timeline=null}u(this.container)}}const C=new WeakMap,R={init(t=null,n={}){try{const i=t||`[${e.attributes.container}]`,r=document.querySelectorAll(i);return 0===r.length?(console.warn("Marquee: No containers found with selector: "+i+'\nEnsure containers have data-marquee="true":\n<div data-marquee="true">...</div>'),this):(r.forEach(e=>{if(!C.has(e))try{const t=new b(e,n);t.timeline&&C.set(e,t)}catch(t){console.error("Marquee: Failed to create instance",t,e)}}),this)}catch(e){return console.error("Marquee: Initialization failed",e),this}},get:e=>C.get(e)||null,destroy(e){try{const t=C.get(e);t&&(t.destroy(),C.delete(e))}catch(t){console.error("Marquee: Failed to destroy instance",t,e)}},destroyAll(t=null){const n=t||`[${e.attributes.container}]`;return document.querySelectorAll(n).forEach(e=>{this.destroy(e)}),this},getAll(t=null){const n=t||`[${e.attributes.container}]`,i=document.querySelectorAll(n),r=[];return i.forEach(e=>{const t=C.get(e);t&&r.push(t)}),r},has:e=>C.has(e),pauseAll(t=null){const n=t||`[${e.attributes.container}]`;return document.querySelectorAll(n).forEach(e=>{const t=C.get(e);t&&t.pause()}),this},playAll(t=null){const n=t||`[${e.attributes.container}]`;return document.querySelectorAll(n).forEach(e=>{const t=C.get(e);t&&t.play()}),this},refresh(e){const t=C.get(e);return t&&t.refreshDirection(),this},refreshAll(t=null){const n=t||`[${e.attributes.container}]`;return document.querySelectorAll(n).forEach(e=>{const t=C.get(e);t&&t.refreshDirection()}),this}};"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>R.init()):R.init()),window.Marquee=R}();
