/*!
 * Tabs v1.0.0
 * An accessible, keyboard-navigable tabs component with autoplay support.
 *
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 *
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
var Tabs=function(t){"use strict";const e='[data-tabs="container"]',a="[data-tabs-trigger-value]",r="[data-tabs-panel-value]",s='[data-tabs="prev"]',n='[data-tabs="next"]',o='[data-tabs="play-pause"]',i="data-tabs-group-name",u="data-tabs-default",l="data-tabs-orientation",c="data-tabs-activate-on-focus",d="data-tabs-loop",p="data-tabs-keyboard",g="data-tabs-trigger-value",y="data-tabs-panel-value",b="data-tabs-autoplay",f="data-tabs-autoplay-duration",v="data-tabs-autoplay-pause-hover",h="data-tabs-autoplay-pause-focus",m="tabs-active",A="tabs-inactive",E="tabs-transitioning",P="tabs-panel-entering",L="tabs-panel-leaving",w="tabs-button-disabled",B="tabs-autoplay-active",M="tabs-autoplay-paused",T="tabs-reduced-motion",V="--tabs-progress",k="--tabs-count",x="--tabs-index",$="--tabs-active-index",F="--tabs-autoplay-duration",S="--tabs-direction",H="horizontal",I=5e3,O=200,D="change",q="autoplay-start",C="autoplay-pause";function U(t,e,a={}){const{container:r}=t,s=new CustomEvent(`tabs:${e}`,{detail:{tabs:t,...a},bubbles:!0});r.dispatchEvent(s)}function N(t){return t?t.toLowerCase().replace(/\s+/g,"-"):""}let z=0;function R(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function W(t){const{state:e,config:a,triggerMap:r,autoplay:s}=t;if(!e.isAutoplaying||e.isPaused)return;const n=performance.now()-e.autoplayStartTime,o=Math.min(n/a.autoplayDuration,1),i=r.get(e.activeValue);i&&i.forEach(t=>{t.style.setProperty(V,o.toString())}),o>=1&&(t.next(),e.autoplayStartTime=performance.now()),s.rafId=requestAnimationFrame(()=>W(t))}function _(t){const{container:e,config:a}=t;t.autoplay={rafId:null,observer:null,isVisible:!0,pausedByHover:!1,pausedByFocus:!1,pausedByUser:!1},t.autoplay.observer=new IntersectionObserver(e=>{e.forEach(e=>{t.autoplay.isVisible=e.isIntersecting,e.isIntersecting?j(t)&&K(t):J(t,"visibility")})},{threshold:.5}),t.autoplay.observer.observe(e),a.autoplayPauseHover&&(t.autoplay.handleMouseEnter=()=>{t.autoplay.pausedByHover=!0,J(t,"hover")},t.autoplay.handleMouseLeave=()=>{t.autoplay.pausedByHover=!1,j(t)&&K(t)},e.addEventListener("mouseenter",t.autoplay.handleMouseEnter),e.addEventListener("mouseleave",t.autoplay.handleMouseLeave)),a.autoplayPauseFocus&&(t.autoplay.handleFocusIn=()=>{t.autoplay.pausedByFocus=!0,J(t,"focus")},t.autoplay.handleFocusOut=a=>{e.contains(a.relatedTarget)||(t.autoplay.pausedByFocus=!1,j(t)&&K(t))},e.addEventListener("focusin",t.autoplay.handleFocusIn),e.addEventListener("focusout",t.autoplay.handleFocusOut))}function j(t){const{autoplay:e}=t;return e.isVisible&&!e.pausedByHover&&!e.pausedByFocus&&!e.pausedByUser}function G(t){const{container:e,config:a,state:r,triggerMap:s}=t;r.isAutoplaying=!0,r.isPaused=!1,r.autoplayStartTime=performance.now(),e.classList.add(B),e.classList.remove(M),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","true"),U(t,q,{value:r.activeValue}),t.autoplay.rafId=requestAnimationFrame(()=>W(t))}function J(t,e="user"){const{state:a,container:r}=t;if(!a.isAutoplaying||a.isPaused)return;a.isPaused=!0,"user"!==e&&"keyboard"!==e||(t.autoplay.pausedByUser=!0),t.autoplay.rafId&&(cancelAnimationFrame(t.autoplay.rafId),t.autoplay.rafId=null),r.classList.add(M),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","false");const s=performance.now()-a.autoplayStartTime;a.autoplayElapsed=s,a.autoplayPausedOnValue=a.activeValue;const n=Math.min(s/t.config.autoplayDuration,1);U(t,C,{value:a.activeValue,progress:n})}function K(t){const{state:e,container:a}=t;if(!e.isAutoplaying||!e.isPaused)return;if(!j(t))return;e.isPaused=!1;const r=e.autoplayPausedOnValue===e.activeValue;e.autoplayStartTime=r?performance.now()-(e.autoplayElapsed||0):performance.now(),a.classList.remove(M),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","true"),U(t,q,{value:e.activeValue}),t.autoplay.rafId=requestAnimationFrame(()=>W(t))}function Q(t,e){return t.findIndex(t=>N(t.getAttribute(g))===e)}function X(t){return{groupName:t.getAttribute(i)||null,defaultValue:t.getAttribute(u)||null,orientation:t.getAttribute(l)||H,activateOnFocus:"false"!==t.getAttribute(c),loop:"true"===t.getAttribute(d),keyboard:"false"!==t.getAttribute(p),autoplay:"true"===t.getAttribute(b),autoplayDuration:parseInt(t.getAttribute(f),10)||I,autoplayPauseHover:"false"!==t.getAttribute(v),autoplayPauseFocus:"false"!==t.getAttribute(h)}}function Y(t,e){const{triggers:a,config:r,state:s}=t,n=a.indexOf(document.activeElement);if(-1===n)return;let o=n+e;if(o=r.loop?(o+a.length)%a.length:Math.max(0,Math.min(o,a.length-1)),a[o].focus(),s.isAutoplaying&&J(t,"keyboard"),r.activateOnFocus){et(t,a[o].getAttribute(g))}}function Z(t,e){const{triggers:a,config:r,state:s}=t;if(a[e].focus(),s.isAutoplaying&&J(t,"keyboard"),r.activateOnFocus){et(t,a[e].getAttribute(g))}}function tt(t){const{config:e,triggerMap:a,triggers:r}=t;if(e.groupName){const r=(s=e.groupName)?new URLSearchParams(window.location.search).get(s):null;if(r){const e=N(r);if(a.has(e))return e;console.warn(`Tabs ${t.id}: URL param "${r}" doesn't match any trigger.`)}}var s;if(e.defaultValue){const t=N(e.defaultValue);if(a.has(t))return t}return N(r[0].getAttribute(g))}function et(t,e,a={}){const{silent:r=!1,updateUrl:s=!0}=a,n=N(e),{state:o,config:i,triggerMap:u,panelMap:l,triggers:c,panels:d,container:p}=t;if(!u.has(n))return console.warn(`Tabs ${t.id}: Value "${e}" not found.`),!1;const b=o.activeValue;if(n===b)return!1;const f=Q(c,n),v=b?Q(c,b):-1;p.style.setProperty($,f);const h=-1===v?0:f>v?1:-1;return p.style.setProperty(S,h),o.activeValue=n,o.isAutoplaying&&!o.isPaused&&(o.autoplayStartTime=performance.now()),s&&i.groupName&&function(t,e){if(!t)return;const a=new URL(window.location.href);a.searchParams.set(t,e),window.history.replaceState({},"",a.toString())}(i.groupName,n),p.classList.add(E),c.forEach(t=>{const e=N(t.getAttribute(g))===n;t.classList.toggle(m,e),t.classList.toggle(A,!e),e||t.style.setProperty(V,"0")}),d.forEach(t=>{const e=N(t.getAttribute(y)),a=e===n,r=e===b;t.classList.remove(P,L),a?(t.classList.add(m,P),t.classList.remove(A)):r?(t.classList.add(A,L),t.classList.remove(m)):(t.classList.add(A),t.classList.remove(m))}),setTimeout(()=>{p.classList.remove(E),d.forEach(t=>{t.classList.remove(P,L)})},O),function(t){const{triggers:e,panels:a,state:r}=t;e.forEach(t=>{const e=N(t.getAttribute(g))===r.activeValue;t.setAttribute("aria-selected",e.toString()),t.setAttribute("tabindex",e?"0":"-1")}),a.forEach(t=>{const e=N(t.getAttribute(y))===r.activeValue;t.setAttribute("aria-hidden",(!e).toString())})}(t),function(t){const{triggers:e,prevBtn:a,nextBtn:r,config:s,state:n}=t;if(!a&&!r)return;if(s.loop)return a?.classList.remove(w),void r?.classList.remove(w);const o=Q(e,n.activeValue);a&&a.classList.toggle(w,0===o);r&&r.classList.toggle(w,o===e.length-1)}(t),r||U(t,D,{value:n,previousValue:b}),!0}function at(t){const{container:e,prevBtn:a,nextBtn:r,playPauseBtn:s,boundHandlers:n}=t;n?.triggerClicks&&n.triggerClicks.forEach(({trigger:t,handler:e})=>{t.removeEventListener("click",e)}),a&&n?.prev&&a.removeEventListener("click",n.prev),r&&n?.next&&r.removeEventListener("click",n.next),s&&n?.playPause&&s.removeEventListener("click",n.playPause),n?.keyboard&&e.removeEventListener("keydown",n.keyboard),function(t){const{container:e,config:a,autoplay:r}=t;r&&(r.rafId&&cancelAnimationFrame(r.rafId),r.observer&&r.observer.disconnect(),a.autoplayPauseHover&&r.handleMouseEnter&&(e.removeEventListener("mouseenter",r.handleMouseEnter),e.removeEventListener("mouseleave",r.handleMouseLeave)),a.autoplayPauseFocus&&r.handleFocusIn&&(e.removeEventListener("focusin",r.handleFocusIn),e.removeEventListener("focusout",r.handleFocusOut)),t.autoplay=null)}(t)}function rt(t){const{container:i,config:u}=t;if(!function(t){const{container:i,id:u}=t,l=t=>[...i.querySelectorAll(t)].filter(t=>t.closest(e)===i),c=l(a),d=l(r);if(0===c.length)return console.error(`Tabs ${u}: No triggers found. Expected elements with [data-tabs-trigger-value].`),!1;if(0===d.length)return console.error(`Tabs ${u}: No panels found. Expected elements with [data-tabs-panel-value].`),!1;const p=new Map,b=new Map;let f=!1;if(c.forEach(t=>{const e=N(t.getAttribute(g));if(!e)return console.error(`Tabs ${u}: Trigger has empty data-tabs-trigger-value.`),void(f=!0);"a"===t.tagName.toLowerCase()&&console.warn(`Tabs ${u}: Trigger "${e}" is an <a> tag. Consider using <button> for better accessibility.`),p.has(e)||p.set(e,[]),p.get(e).push(t)}),d.forEach(t=>{const e=N(t.getAttribute(y));if(!e)return console.error(`Tabs ${u}: Panel has empty data-tabs-panel-value.`),void(f=!0);b.set(e,t)}),p.forEach((t,e)=>{b.has(e)||(console.error(`Tabs ${u}: Trigger value "${e}" has no matching panel.`),f=!0)}),b.forEach((t,e)=>{p.has(e)||(console.error(`Tabs ${u}: Panel value "${e}" has no matching trigger.`),f=!0)}),f)return!1;const v=i.querySelector(s),h=i.querySelector(n),m=i.querySelector(o);return Object.assign(t,{triggers:c,panels:d,triggerMap:p,panelMap:b,prevBtn:v,nextBtn:h,playPauseBtn:m}),!0}(t))return!1;i.style.setProperty(k,t.triggers.length),t.triggers.forEach((t,e)=>{t.style.setProperty(x,e)}),t.panels.forEach((t,e)=>{t.style.setProperty(x,e)}),function(t){const{triggers:e,panels:a,id:r,config:s}=t;t.container.setAttribute("aria-orientation",s.orientation),e.forEach(t=>{const e=N(t.getAttribute(g)),a=t.id||`${r}-trigger-${e}`,s=`${r}-panel-${e}`;t.setAttribute("role","tab"),t.id=a,t.setAttribute("aria-controls",s)}),a.forEach(t=>{const e=N(t.getAttribute(y)),a=t.id||`${r}-panel-${e}`,s=`${r}-trigger-${e}`;t.setAttribute("role","tabpanel"),t.id=a,t.setAttribute("aria-labelledby",s),t.setAttribute("tabindex","0")})}(t);return et(t,tt(t),{silent:!0,updateUrl:!1}),function(t){const{triggers:e,prevBtn:a,nextBtn:r,playPauseBtn:s,state:n}=t;t.boundHandlers={triggerClicks:[],prev:null,next:null,playPause:null,keyboard:null},e.forEach(e=>{const a=a=>{a.preventDefault();const r=e.getAttribute(g);n.isAutoplaying&&J(t,"user"),et(t,r)};e.addEventListener("click",a),t.boundHandlers.triggerClicks.push({trigger:e,handler:a})}),a&&(t.boundHandlers.prev=()=>t.prev(),a.addEventListener("click",t.boundHandlers.prev)),r&&(t.boundHandlers.next=()=>t.next(),r.addEventListener("click",t.boundHandlers.next)),s&&(t.boundHandlers.playPause=()=>{n.isAutoplaying&&!n.isPaused?t.pause():t.play()},s.addEventListener("click",t.boundHandlers.playPause),s.setAttribute("aria-pressed","false"))}(t),u.keyboard&&function(t){const{container:a,config:r}=t,s=s=>{const n=document.activeElement;if(!t.triggers.includes(n)||n.closest(e)!==a)return;const o="horizontal"===r.orientation,i=o?"ArrowLeft":"ArrowUp",u=o?"ArrowRight":"ArrowDown";switch(s.key){case i:s.preventDefault(),Y(t,-1);break;case u:s.preventDefault(),Y(t,1);break;case"Home":s.preventDefault(),Z(t,0);break;case"End":s.preventDefault(),Z(t,t.triggers.length-1);break;case"Enter":case" ":if(!r.activateOnFocus){s.preventDefault();const e=n.getAttribute(g);et(t,e)}}};t.boundHandlers.keyboard=s,a.addEventListener("keydown",s)}(t),R()&&i.classList.add(T),u.autoplay&&!R()&&(i.style.setProperty(F,u.autoplayDuration+"ms"),_(t),G(t)),i.setAttribute("data-tabs-id",t.id),!0}class st{constructor(t){this.id=(z+=1,`tabs-${z}`),this.container=t,this.config=X(t),this.state={activeValue:null,isAutoplaying:!1,isPaused:!1,autoplayStartTime:null,autoplayElapsed:0,autoplayPausedOnValue:null},this.boundHandlers=null,this.autoplay=null,this.triggers=[],this.panels=[],this.triggerMap=new Map,this.panelMap=new Map,this.prevBtn=null,this.nextBtn=null,this.playPauseBtn=null;rt(this)?this.container._tabs=this:console.warn(`Tabs ${this.id}: Initialization failed.`)}goTo(t){return et(this,t),this}next(){const{triggers:t,config:e,state:a}=this;let r=Q(t,a.activeValue)+1;e.loop?r%=t.length:r=Math.min(r,t.length-1);return et(this,t[r].getAttribute(g)),this}prev(){const{triggers:t,config:e,state:a}=this;let r=Q(t,a.activeValue)-1;r=e.loop?(r+t.length)%t.length:Math.max(r,0);return et(this,t[r].getAttribute(g)),this}play(){return R()||(this.autoplay||_(this),this.container.style.setProperty(F,this.config.autoplayDuration+"ms"),this.autoplay.pausedByUser=!1,G(this)),this}pause(){return J(this,"user"),this}refresh(){const t=this.state.activeValue;return at(this),this.config=X(this.container),this.state={activeValue:null,isAutoplaying:!1,isPaused:!1,autoplayStartTime:null,autoplayElapsed:0,autoplayPausedOnValue:null},this.boundHandlers=null,this.autoplay=null,this.triggers=[],this.panels=[],this.triggerMap=new Map,this.panelMap=new Map,rt(this),t&&this.triggerMap.has(t)&&et(this,t,{silent:!0}),this}destroy(){nt.delete(this.id),at(this),function(t){const{id:e,container:a,triggers:r,panels:s,prevBtn:n,nextBtn:o,playPauseBtn:i}=t;a.removeAttribute("data-tabs-id"),a.removeAttribute("aria-orientation"),a.classList.remove(E,B,M,T),a.style.removeProperty(k),a.style.removeProperty($),a.style.removeProperty(S),a.style.removeProperty(F),r.forEach(t=>{t.removeAttribute("role"),t.removeAttribute("aria-selected"),t.removeAttribute("aria-controls"),t.removeAttribute("tabindex"),t.id.startsWith(`${e}-trigger-`)&&(t.id=""),t.classList.remove(m,A),t.style.removeProperty(x),t.style.removeProperty(V)}),s.forEach(t=>{t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-hidden"),t.removeAttribute("tabindex"),t.id.startsWith(`${e}-panel-`)&&(t.id=""),t.classList.remove(m,A,P,L),t.style.removeProperty(x)}),n&&n.classList.remove(w),o&&o.classList.remove(w),i&&i.removeAttribute("aria-pressed"),delete a._tabs}(this)}getActiveValue(){return this.state.activeValue}static init(t){if("string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("Tabs.init(): Container element not found");return new st(t)}}const nt=new Map;function ot(){document.querySelectorAll(e).forEach(t=>{try{const e=new st(t);e.id&&nt.set(e.id,e)}catch(t){console.warn("Tabs auto-initialization failed:",t)}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ot):ot();const it={init(t){if(!t)return void ot();const e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error("Tabs.init(): Container element not found");const a=new st(e);return a.id&&nt.set(a.id,a),a},get(t){if("string"==typeof t){if(nt.has(t))return nt.get(t);const e=document.querySelector(t);if(e){const t=e.getAttribute("data-tabs-id");return t?nt.get(t):null}return null}const e=t.getAttribute("data-tabs-id");return e?nt.get(e):null},getAll:()=>Array.from(nt.values()),destroy(t){if(!t)return nt.forEach(t=>t.destroy()),void nt.clear();const e=this.get(t);e&&(nt.delete(e.id),e.destroy())}};return"undefined"!=typeof window&&(window.Tabs=it),t.Tabs=st,t}({});
//# sourceMappingURL=tabs.min.js.map
