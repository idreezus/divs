/*!
 * Tabs v1.0.0
 * An accessible, keyboard-navigable tabs component with autoplay support.
 *
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 *
 * (c) 2025 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
var Tabs=function(t){"use strict";const e='[data-tabs="container"]',a="[data-tabs-trigger-value]",n="[data-tabs-panel-value]",s='[data-tabs="prev"]',r='[data-tabs="next"]',i='[data-tabs="play-pause"]',o="data-tabs-group-name",u="data-tabs-default",l="data-tabs-orientation",c="data-tabs-activate-on-focus",d="data-tabs-loop",p="data-tabs-keyboard",g="data-tabs-trigger-value",f="data-tabs-panel-value",h="data-tabs-autoplay",b="data-tabs-autoplay-duration",y="data-tabs-autoplay-pause-hover",v="data-tabs-autoplay-pause-focus",m="tabs-active",A="tabs-inactive",w="tabs-transitioning",E="tabs-panel-entering",L="tabs-panel-leaving",P="tabs-button-disabled",M="tabs-autoplay-active",B="tabs-autoplay-paused",T="tabs-reduced-motion",k="--tabs-progress",x="horizontal",S=5e3,$=200;function V(t){const{container:e,config:a}=t;t.autoplay={rafId:null,observer:null,isVisible:!0,pausedByHover:!1,pausedByFocus:!1,pausedByUser:!1},t.autoplay.observer=new IntersectionObserver(e=>{e.forEach(e=>{t.autoplay.isVisible=e.isIntersecting,e.isIntersecting?F(t)&&O(t):I(t,"visibility")})},{threshold:.5}),t.autoplay.observer.observe(e),a.autoplayPauseHover&&(t.autoplay.handleMouseEnter=()=>{t.autoplay.pausedByHover=!0,I(t,"hover")},t.autoplay.handleMouseLeave=()=>{t.autoplay.pausedByHover=!1,F(t)&&O(t)},e.addEventListener("mouseenter",t.autoplay.handleMouseEnter),e.addEventListener("mouseleave",t.autoplay.handleMouseLeave)),a.autoplayPauseFocus&&(t.autoplay.handleFocusIn=()=>{t.autoplay.pausedByFocus=!0,I(t,"focus")},t.autoplay.handleFocusOut=a=>{e.contains(a.relatedTarget)||(t.autoplay.pausedByFocus=!1,F(t)&&O(t))},e.addEventListener("focusin",t.autoplay.handleFocusIn),e.addEventListener("focusout",t.autoplay.handleFocusOut))}function F(t){const{autoplay:e}=t;return e.isVisible&&!e.pausedByHover&&!e.pausedByFocus&&!e.pausedByUser}function H(t){const{container:e,config:a,state:n,triggerMap:s}=t;n.isAutoplaying=!0,n.isPaused=!1,n.autoplayStartTime=performance.now(),e.classList.add(M),e.classList.remove(B),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","true"),q(t,"autoplay-start",{value:n.activeValue}),t.autoplay.rafId=requestAnimationFrame(function e(){if(!n.isAutoplaying||n.isPaused)return;const r=performance.now()-n.autoplayStartTime,i=Math.min(r/a.autoplayDuration,1),o=s.get(n.activeValue);o&&o.forEach(t=>{t.style.setProperty(k,i.toString())}),i>=1&&(t.next(),n.autoplayStartTime=performance.now()),t.autoplay.rafId=requestAnimationFrame(e)})}function I(t,e="user"){const{state:a,container:n}=t;if(!a.isAutoplaying||a.isPaused)return;a.isPaused=!0,"user"!==e&&"keyboard"!==e||(t.autoplay.pausedByUser=!0),t.autoplay.rafId&&(cancelAnimationFrame(t.autoplay.rafId),t.autoplay.rafId=null),n.classList.add(B),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","false");const s=performance.now()-a.autoplayStartTime,r=Math.min(s/t.config.autoplayDuration,1);q(t,"autoplay-pause",{value:a.activeValue,progress:r})}function O(t){const{state:e,container:a}=t;e.isAutoplaying&&e.isPaused&&F(t)&&(e.isPaused=!1,e.autoplayStartTime=performance.now(),a.classList.remove(B),t.playPauseBtn&&t.playPauseBtn.setAttribute("aria-pressed","true"),q(t,"autoplay-start",{value:e.activeValue}),t.autoplay.rafId=requestAnimationFrame(function a(){if(!e.isAutoplaying||e.isPaused)return;const n=performance.now()-e.autoplayStartTime,s=Math.min(n/t.config.autoplayDuration,1),r=t.triggerMap.get(e.activeValue);r&&r.forEach(t=>{t.style.setProperty(k,s.toString())}),s>=1&&(t.next(),e.autoplayStartTime=performance.now()),t.autoplay.rafId=requestAnimationFrame(a)}))}function q(t,e,a){const{events:n,container:s}=t;n.has(e)&&n.get(e).forEach(n=>{n.call(t,{type:e,target:t,...a})});const r=new CustomEvent(`tabs:${e}`,{detail:{tabs:t,...a},bubbles:!0});s.dispatchEvent(r)}let C=0;function D(t){return t?t.toLowerCase().replace(/\s+/g,"-"):""}function U(t){return{groupName:t.getAttribute(o)||null,defaultValue:t.getAttribute(u)||null,orientation:t.getAttribute(l)||x,activateOnFocus:"false"!==t.getAttribute(c),loop:"true"===t.getAttribute(d),keyboard:"false"!==t.getAttribute(p),autoplay:"true"===t.getAttribute(h),autoplayDuration:parseInt(t.getAttribute(b),10)||S,autoplayPauseHover:"false"!==t.getAttribute(y),autoplayPauseFocus:"false"!==t.getAttribute(v)}}function N(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function z(t,e){const{triggers:a,config:n,state:s}=t,r=a.indexOf(document.activeElement);if(-1===r)return;let i=r+e;if(i=n.loop?(i+a.length)%a.length:Math.max(0,Math.min(i,a.length-1)),a[i].focus(),s.isAutoplaying&&I(t,"keyboard"),n.activateOnFocus){G(t,a[i].getAttribute(g))}}function R(t,e){const{triggers:a,config:n,state:s}=t;if(a[e].focus(),s.isAutoplaying&&I(t,"keyboard"),n.activateOnFocus){G(t,a[e].getAttribute(g))}}function j(t){const{config:e,triggerMap:a,triggers:n}=t;if(e.groupName){const n=(s=e.groupName)?new URLSearchParams(window.location.search).get(s):null;if(n){const e=D(n);if(a.has(e))return e;console.warn(`Tabs ${t.id}: URL param "${n}" doesn't match any trigger.`)}}var s;if(e.defaultValue){const t=D(e.defaultValue);if(a.has(t))return t}return D(n[0].getAttribute(g))}function G(t,e,a={}){const{silent:n=!1,updateUrl:s=!0}=a,r=D(e),{state:i,config:o,triggerMap:u,panelMap:l,triggers:c,panels:d,container:p}=t;if(!u.has(r))return console.warn(`Tabs ${t.id}: Value "${e}" not found.`),!1;const h=i.activeValue;return r!==h&&(i.activeValue=r,i.isAutoplaying&&!i.isPaused&&(i.autoplayStartTime=performance.now()),s&&o.groupName&&function(t,e){if(!t)return;const a=new URL(window.location.href);a.searchParams.set(t,e),window.history.replaceState({},"",a.toString())}(o.groupName,r),p.classList.add(w),c.forEach(t=>{const e=D(t.getAttribute(g))===r;t.classList.toggle(m,e),t.classList.toggle(A,!e),e||t.style.setProperty(k,"0")}),d.forEach(t=>{const e=D(t.getAttribute(f)),a=e===r,n=e===h;t.classList.remove(E,L),a?(t.classList.add(m,E),t.classList.remove(A)):n?(t.classList.add(A,L),t.classList.remove(m)):(t.classList.add(A),t.classList.remove(m))}),setTimeout(()=>{p.classList.remove(w),d.forEach(t=>{t.classList.remove(E,L)})},$),function(t){const{triggers:e,panels:a,state:n}=t;e.forEach(t=>{const e=D(t.getAttribute(g))===n.activeValue;t.setAttribute("aria-selected",e.toString()),t.setAttribute("tabindex",e?"0":"-1")}),a.forEach(t=>{const e=D(t.getAttribute(f))===n.activeValue;t.setAttribute("aria-hidden",(!e).toString())})}(t),function(t){const{triggers:e,prevBtn:a,nextBtn:n,config:s,state:r}=t;if(!a&&!n)return;if(s.loop)return a?.classList.remove(P),void n?.classList.remove(P);const i=e.findIndex(t=>D(t.getAttribute(g))===r.activeValue);a&&a.classList.toggle(P,0===i);n&&n.classList.toggle(P,i===e.length-1)}(t),n||function(t,e,a={}){const{events:n,container:s}=t;n.has(e)&&n.get(e).forEach(n=>{n.call(t,{type:e,target:t,...a})});const r=new CustomEvent(`tabs:${e}`,{detail:{tabs:t,...a},bubbles:!0});s.dispatchEvent(r)}(t,"change",{value:r,previousValue:h}),!0)}function J(t){const{container:e,prevBtn:a,nextBtn:n,playPauseBtn:s,boundHandlers:r}=t;r?.triggerClicks&&r.triggerClicks.forEach(({trigger:t,handler:e})=>{t.removeEventListener("click",e)}),a&&r?.prev&&a.removeEventListener("click",r.prev),n&&r?.next&&n.removeEventListener("click",r.next),s&&r?.playPause&&s.removeEventListener("click",r.playPause),t.keyboardHandler&&e.removeEventListener("keydown",t.keyboardHandler),function(t){const{container:e,config:a,autoplay:n}=t;n&&(n.rafId&&cancelAnimationFrame(n.rafId),n.observer&&n.observer.disconnect(),a.autoplayPauseHover&&n.handleMouseEnter&&(e.removeEventListener("mouseenter",n.handleMouseEnter),e.removeEventListener("mouseleave",n.handleMouseLeave)),a.autoplayPauseFocus&&n.handleFocusIn&&(e.removeEventListener("focusin",n.handleFocusIn),e.removeEventListener("focusout",n.handleFocusOut)),t.autoplay=null)}(t),Object.keys(t).forEach(e=>{t[e]=null})}function K(t){const{container:o,config:u}=t;if(!function(t){const{container:o,id:u}=t,l=t=>[...o.querySelectorAll(t)].filter(t=>t.closest(e)===o),c=l(a),d=l(n);if(0===c.length)return console.error(`Tabs ${u}: No triggers found. Expected elements with [data-tabs-trigger-value].`),!1;if(0===d.length)return console.error(`Tabs ${u}: No panels found. Expected elements with [data-tabs-panel-value].`),!1;const p=new Map,h=new Map;let b=!1;if(c.forEach(t=>{const e=D(t.getAttribute(g));if(!e)return console.error(`Tabs ${u}: Trigger has empty data-tabs-trigger-value.`),void(b=!0);"a"===t.tagName.toLowerCase()&&console.warn(`Tabs ${u}: Trigger "${e}" is an <a> tag. Consider using <button> for better accessibility.`),p.has(e)||p.set(e,[]),p.get(e).push(t)}),d.forEach(t=>{const e=D(t.getAttribute(f));if(!e)return console.error(`Tabs ${u}: Panel has empty data-tabs-panel-value.`),void(b=!0);h.set(e,t)}),p.forEach((t,e)=>{h.has(e)||(console.error(`Tabs ${u}: Trigger value "${e}" has no matching panel.`),b=!0)}),h.forEach((t,e)=>{p.has(e)||(console.error(`Tabs ${u}: Panel value "${e}" has no matching trigger.`),b=!0)}),b)return!1;const y=o.querySelector(s),v=o.querySelector(r),m=o.querySelector(i);return Object.assign(t,{triggers:c,panels:d,triggerMap:p,panelMap:h,prevBtn:y,nextBtn:v,playPauseBtn:m}),!0}(t))return!1;!function(t){const{triggers:e,panels:a,id:n,config:s}=t;t.container.setAttribute("aria-orientation",s.orientation),e.forEach((t,e)=>{const a=D(t.getAttribute(g)),s=t.id||`${n}-trigger-${a}`,r=`${n}-panel-${a}`;t.setAttribute("role","tab"),t.id=s,t.setAttribute("aria-controls",r)}),a.forEach(t=>{const e=D(t.getAttribute(f)),a=t.id||`${n}-panel-${e}`,s=`${n}-trigger-${e}`;t.setAttribute("role","tabpanel"),t.id=a,t.setAttribute("aria-labelledby",s),t.setAttribute("tabindex","0")})}(t);return G(t,j(t),{silent:!0,updateUrl:!1}),function(t){const{triggers:e,prevBtn:a,nextBtn:n,playPauseBtn:s,state:r}=t;t.boundHandlers={triggerClicks:[],prev:null,next:null,playPause:null},e.forEach(e=>{const a=a=>{a.preventDefault();const n=e.getAttribute(g);r.isAutoplaying&&I(t,"user"),G(t,n)};e.addEventListener("click",a),t.boundHandlers.triggerClicks.push({trigger:e,handler:a})}),a&&(t.boundHandlers.prev=()=>t.prev(),a.addEventListener("click",t.boundHandlers.prev)),n&&(t.boundHandlers.next=()=>t.next(),n.addEventListener("click",t.boundHandlers.next)),s&&(t.boundHandlers.playPause=()=>{r.isAutoplaying&&!r.isPaused?t.pause():t.play()},s.addEventListener("click",t.boundHandlers.playPause),s.setAttribute("aria-pressed","false"))}(t),u.keyboard&&function(t){const{container:a,config:n}=t,s=s=>{const r=document.activeElement;if(!t.triggers.includes(r)||r.closest(e)!==a)return;const i="horizontal"===n.orientation,o=i?"ArrowLeft":"ArrowUp",u=i?"ArrowRight":"ArrowDown";switch(s.key){case o:s.preventDefault(),z(t,-1);break;case u:s.preventDefault(),z(t,1);break;case"Home":s.preventDefault(),R(t,0);break;case"End":s.preventDefault(),R(t,t.triggers.length-1);break;case"Enter":case" ":if(!n.activateOnFocus){s.preventDefault();const e=r.getAttribute(g);G(t,e)}}};t.keyboardHandler=s,a.addEventListener("keydown",s)}(t),N()&&o.classList.add(T),u.autoplay&&!N()&&(V(t),H(t)),o.setAttribute("data-tabs-id",t.id),!0}class Q{constructor(t){this.id=(C+=1,`tabs-${C}`),this.container=t,this.config=U(t),this.state={activeValue:null,isAutoplaying:!1,isPaused:!1,autoplayStartTime:null},this.events=new Map,this.boundHandlers=null,this.keyboardHandler=null,this.autoplay=null,this.triggers=[],this.panels=[],this.triggerMap=new Map,this.panelMap=new Map,this.prevBtn=null,this.nextBtn=null,this.playPauseBtn=null;K(this)||console.warn(`Tabs ${this.id}: Initialization failed.`)}goTo(t){return G(this,t),this}next(){const{triggers:t,config:e,state:a}=this;let n=t.findIndex(t=>D(t.getAttribute(g))===a.activeValue)+1;e.loop?n%=t.length:n=Math.min(n,t.length-1);return G(this,t[n].getAttribute(g)),this}prev(){const{triggers:t,config:e,state:a}=this;let n=t.findIndex(t=>D(t.getAttribute(g))===a.activeValue)-1;n=e.loop?(n+t.length)%t.length:Math.max(n,0);return G(this,t[n].getAttribute(g)),this}play(){return N()||(this.autoplay||V(this),this.autoplay.pausedByUser=!1,H(this)),this}pause(){return I(this,"user"),this}refresh(){const t=this.state.activeValue,e=this.events;return J(this),this.config=U(this.container),this.state={activeValue:null,isAutoplaying:!1,isPaused:!1,autoplayStartTime:null},this.events=e,this.boundHandlers=null,this.keyboardHandler=null,this.autoplay=null,this.triggers=[],this.panels=[],this.triggerMap=new Map,this.panelMap=new Map,K(this),t&&this.triggerMap.has(t)&&G(this,t,{silent:!0}),this}destroy(){return J(this),null}getActiveValue(){return this.state.activeValue}on(t,e){return this.events.has(t)||this.events.set(t,[]),this.events.get(t).push(e),this}off(t,e){if(!this.events.has(t))return this;const a=this.events.get(t),n=a.indexOf(e);return n>-1&&a.splice(n,1),this}static init(t){if("string"==typeof t&&(t=document.querySelector(t)),!t)throw new Error("Tabs.init(): Container element not found");return new Q(t)}}const W=new Map;function X(){document.querySelectorAll(e).forEach(t=>{try{const e=new Q(t);e.id&&W.set(e.id,e)}catch(t){console.warn("Tabs auto-initialization failed:",t)}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",X):X();const Y={init(t){if(!t)return void X();const e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error("Tabs.init(): Container element not found");const a=new Q(e);return a.id&&W.set(a.id,a),a},get(t){if("string"==typeof t){if(W.has(t))return W.get(t);const e=document.querySelector(t);if(e){const t=e.getAttribute("data-tabs-id");return t?W.get(t):null}return null}const e=t.getAttribute("data-tabs-id");return e?W.get(e):null},getAll:()=>Array.from(W.values()),destroy(t){if(!t)return W.forEach(t=>t.destroy()),void W.clear();const e=this.get(t);e&&(W.delete(e.id),e.destroy())}};return"undefined"!=typeof window&&(window.Tabs=Y),t.Tabs=Q,t}({});
//# sourceMappingURL=tabs.min.js.map
