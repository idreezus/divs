{"version":3,"file":"tabs.min.js","sources":["../../../packages/tabs/src/config.js","../../../packages/tabs/src/autoplay.js","../../../packages/tabs/src/tabs.js"],"sourcesContent":["// Configuration constants for the tabs library\n\n// Selectors for querying DOM elements\nexport const SELECTORS = {\n  CONTAINER: '[data-tabs=\"container\"]',\n  TRIGGER: '[data-tabs-trigger-value]',\n  PANEL: '[data-tabs-panel-value]',\n  PREV_BTN: '[data-tabs=\"prev\"]',\n  NEXT_BTN: '[data-tabs=\"next\"]',\n  PLAY_PAUSE_BTN: '[data-tabs=\"play-pause\"]',\n};\n\n// Attribute names for configuration\nexport const ATTRIBUTES = {\n  // Container configuration\n  GROUP_NAME: 'data-tabs-group-name',\n  DEFAULT: 'data-tabs-default',\n  ORIENTATION: 'data-tabs-orientation',\n  ACTIVATE_ON_FOCUS: 'data-tabs-activate-on-focus',\n  LOOP: 'data-tabs-loop',\n  KEYBOARD: 'data-tabs-keyboard',\n\n  // Content linking\n  TRIGGER_VALUE: 'data-tabs-trigger-value',\n  PANEL_VALUE: 'data-tabs-panel-value',\n\n  // Autoplay configuration\n  AUTOPLAY: 'data-tabs-autoplay',\n  AUTOPLAY_DURATION: 'data-tabs-autoplay-duration',\n  AUTOPLAY_PAUSE_HOVER: 'data-tabs-autoplay-pause-hover',\n  AUTOPLAY_PAUSE_FOCUS: 'data-tabs-autoplay-pause-focus',\n};\n\n// CSS classes applied to elements\nexport const CLASSES = {\n  // State classes\n  ACTIVE: 'tabs-active',\n  INACTIVE: 'tabs-inactive',\n  TRANSITIONING: 'tabs-transitioning',\n\n  // Panel transition classes\n  PANEL_ENTERING: 'tabs-panel-entering',\n  PANEL_LEAVING: 'tabs-panel-leaving',\n\n  // Button state classes\n  BUTTON_DISABLED: 'tabs-button-disabled',\n\n  // Autoplay state classes\n  AUTOPLAY_ACTIVE: 'tabs-autoplay-active',\n  AUTOPLAY_PAUSED: 'tabs-autoplay-paused',\n\n  // Accessibility\n  REDUCED_MOTION: 'tabs-reduced-motion',\n};\n\n// CSS custom properties\nexport const CSS_VARS = {\n  PROGRESS: '--tabs-progress',\n};\n\n// Default configuration values\nexport const DEFAULTS = {\n  ORIENTATION: 'horizontal',\n  ACTIVATE_ON_FOCUS: true,\n  LOOP: false,\n  KEYBOARD: true,\n  AUTOPLAY: false,\n  AUTOPLAY_DURATION: 5000,\n  AUTOPLAY_PAUSE_HOVER: true,\n  AUTOPLAY_PAUSE_FOCUS: true,\n};\n\n// Timing constants in milliseconds\nexport const TIMING = {\n  TRANSITION_DURATION: 200,\n};\n","// Autoplay behavior for tabs: timer, progress updates, pause/resume\n\nimport { CLASSES, CSS_VARS } from './config.js';\n\n// Sets up autoplay with IntersectionObserver and pause handlers\nexport function setupAutoplay(instance) {\n  const { container, config } = instance;\n\n  instance.autoplay = {\n    rafId: null,\n    observer: null,\n    isVisible: true,\n    pausedByHover: false,\n    pausedByFocus: false,\n    pausedByUser: false,\n  };\n\n  // IntersectionObserver to pause when out of viewport\n  instance.autoplay.observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        instance.autoplay.isVisible = entry.isIntersecting;\n        if (!entry.isIntersecting) {\n          pauseAutoplay(instance, 'visibility');\n        } else if (canResume(instance)) {\n          resumeAutoplay(instance);\n        }\n      });\n    },\n    { threshold: 0.5 }\n  );\n  instance.autoplay.observer.observe(container);\n\n  // Hover pause handlers\n  if (config.autoplayPauseHover) {\n    instance.autoplay.handleMouseEnter = () => {\n      instance.autoplay.pausedByHover = true;\n      pauseAutoplay(instance, 'hover');\n    };\n    instance.autoplay.handleMouseLeave = () => {\n      instance.autoplay.pausedByHover = false;\n      if (canResume(instance)) {\n        resumeAutoplay(instance);\n      }\n    };\n    container.addEventListener('mouseenter', instance.autoplay.handleMouseEnter);\n    container.addEventListener('mouseleave', instance.autoplay.handleMouseLeave);\n  }\n\n  // Focus pause handlers\n  if (config.autoplayPauseFocus) {\n    instance.autoplay.handleFocusIn = () => {\n      instance.autoplay.pausedByFocus = true;\n      pauseAutoplay(instance, 'focus');\n    };\n    instance.autoplay.handleFocusOut = (e) => {\n      // Only resume if focus leaves the container entirely\n      if (!container.contains(e.relatedTarget)) {\n        instance.autoplay.pausedByFocus = false;\n        if (canResume(instance)) {\n          resumeAutoplay(instance);\n        }\n      }\n    };\n    container.addEventListener('focusin', instance.autoplay.handleFocusIn);\n    container.addEventListener('focusout', instance.autoplay.handleFocusOut);\n  }\n}\n\n// Checks if autoplay can resume based on all pause conditions\nfunction canResume(instance) {\n  const { autoplay } = instance;\n  return (\n    autoplay.isVisible &&\n    !autoplay.pausedByHover &&\n    !autoplay.pausedByFocus &&\n    !autoplay.pausedByUser\n  );\n}\n\n// Starts autoplay timer with RAF progress updates\nexport function startAutoplay(instance) {\n  const { container, config, state, triggerMap } = instance;\n\n  state.isAutoplaying = true;\n  state.isPaused = false;\n  state.autoplayStartTime = performance.now();\n\n  container.classList.add(CLASSES.AUTOPLAY_ACTIVE);\n  container.classList.remove(CLASSES.AUTOPLAY_PAUSED);\n\n  // Update play/pause button\n  if (instance.playPauseBtn) {\n    instance.playPauseBtn.setAttribute('aria-pressed', 'true');\n  }\n\n  emitAutoplayEvent(instance, 'autoplay-start', { value: state.activeValue });\n\n  // RAF loop for progress updates\n  function tick() {\n    if (!state.isAutoplaying || state.isPaused) return;\n\n    const elapsed = performance.now() - state.autoplayStartTime;\n    const progress = Math.min(elapsed / config.autoplayDuration, 1);\n\n    // Update --tabs-progress on active trigger(s)\n    const activeTriggers = triggerMap.get(state.activeValue);\n    if (activeTriggers) {\n      activeTriggers.forEach((trigger) => {\n        trigger.style.setProperty(CSS_VARS.PROGRESS, progress.toString());\n      });\n    }\n\n    if (progress >= 1) {\n      // Advance to next tab and restart timer\n      instance.next();\n      state.autoplayStartTime = performance.now();\n    }\n\n    instance.autoplay.rafId = requestAnimationFrame(tick);\n  }\n\n  instance.autoplay.rafId = requestAnimationFrame(tick);\n}\n\n// Pauses autoplay\nexport function pauseAutoplay(instance, reason = 'user') {\n  const { state, container } = instance;\n\n  if (!state.isAutoplaying || state.isPaused) return;\n\n  state.isPaused = true;\n\n  // Track user-initiated pause separately\n  if (reason === 'user' || reason === 'keyboard') {\n    instance.autoplay.pausedByUser = true;\n  }\n\n  // Cancel RAF\n  if (instance.autoplay.rafId) {\n    cancelAnimationFrame(instance.autoplay.rafId);\n    instance.autoplay.rafId = null;\n  }\n\n  container.classList.add(CLASSES.AUTOPLAY_PAUSED);\n\n  // Update play/pause button\n  if (instance.playPauseBtn) {\n    instance.playPauseBtn.setAttribute('aria-pressed', 'false');\n  }\n\n  // Get current progress for event\n  const elapsed = performance.now() - state.autoplayStartTime;\n  const progress = Math.min(elapsed / instance.config.autoplayDuration, 1);\n\n  emitAutoplayEvent(instance, 'autoplay-pause', {\n    value: state.activeValue,\n    progress,\n  });\n}\n\n// Resumes autoplay (resets timer to 0)\nexport function resumeAutoplay(instance) {\n  const { state, container } = instance;\n\n  if (!state.isAutoplaying || !state.isPaused) return;\n  if (!canResume(instance)) return;\n\n  state.isPaused = false;\n  state.autoplayStartTime = performance.now(); // Reset timer to 0\n\n  container.classList.remove(CLASSES.AUTOPLAY_PAUSED);\n\n  // Update play/pause button\n  if (instance.playPauseBtn) {\n    instance.playPauseBtn.setAttribute('aria-pressed', 'true');\n  }\n\n  emitAutoplayEvent(instance, 'autoplay-start', { value: state.activeValue });\n\n  // Restart RAF loop\n  function tick() {\n    if (!state.isAutoplaying || state.isPaused) return;\n\n    const elapsed = performance.now() - state.autoplayStartTime;\n    const progress = Math.min(elapsed / instance.config.autoplayDuration, 1);\n\n    const activeTriggers = instance.triggerMap.get(state.activeValue);\n    if (activeTriggers) {\n      activeTriggers.forEach((trigger) => {\n        trigger.style.setProperty(CSS_VARS.PROGRESS, progress.toString());\n      });\n    }\n\n    if (progress >= 1) {\n      instance.next();\n      state.autoplayStartTime = performance.now();\n    }\n\n    instance.autoplay.rafId = requestAnimationFrame(tick);\n  }\n\n  instance.autoplay.rafId = requestAnimationFrame(tick);\n}\n\n// Stops autoplay completely\nexport function stopAutoplay(instance) {\n  const { state, container } = instance;\n\n  state.isAutoplaying = false;\n  state.isPaused = false;\n\n  if (instance.autoplay?.rafId) {\n    cancelAnimationFrame(instance.autoplay.rafId);\n    instance.autoplay.rafId = null;\n  }\n\n  container.classList.remove(CLASSES.AUTOPLAY_ACTIVE, CLASSES.AUTOPLAY_PAUSED);\n\n  // Reset progress on all triggers\n  instance.triggers.forEach((trigger) => {\n    trigger.style.setProperty(CSS_VARS.PROGRESS, '0');\n  });\n}\n\n// Cleans up autoplay listeners and observer\nexport function cleanupAutoplay(instance) {\n  const { container, config, autoplay } = instance;\n\n  if (!autoplay) return;\n\n  // Cancel RAF\n  if (autoplay.rafId) {\n    cancelAnimationFrame(autoplay.rafId);\n  }\n\n  // Disconnect IntersectionObserver\n  if (autoplay.observer) {\n    autoplay.observer.disconnect();\n  }\n\n  // Remove hover listeners\n  if (config.autoplayPauseHover && autoplay.handleMouseEnter) {\n    container.removeEventListener('mouseenter', autoplay.handleMouseEnter);\n    container.removeEventListener('mouseleave', autoplay.handleMouseLeave);\n  }\n\n  // Remove focus listeners\n  if (config.autoplayPauseFocus && autoplay.handleFocusIn) {\n    container.removeEventListener('focusin', autoplay.handleFocusIn);\n    container.removeEventListener('focusout', autoplay.handleFocusOut);\n  }\n\n  instance.autoplay = null;\n}\n\n// Helper to emit autoplay events via the instance's event system\nfunction emitAutoplayEvent(instance, eventName, data) {\n  const { events, container } = instance;\n\n  // Instance event callbacks\n  if (events.has(eventName)) {\n    events.get(eventName).forEach((callback) => {\n      callback.call(instance, { type: eventName, target: instance, ...data });\n    });\n  }\n\n  // DOM CustomEvent\n  const customEvent = new CustomEvent(`tabs:${eventName}`, {\n    detail: { tabs: instance, ...data },\n    bubbles: true,\n  });\n  container.dispatchEvent(customEvent);\n}\n","// Core tabs library with initialization, keyboard navigation, accessibility, and entry point\n\nimport {\n  SELECTORS,\n  ATTRIBUTES,\n  CLASSES,\n  CSS_VARS,\n  DEFAULTS,\n  TIMING,\n} from './config.js';\nimport {\n  setupAutoplay,\n  startAutoplay,\n  pauseAutoplay,\n  resumeAutoplay,\n  stopAutoplay,\n  cleanupAutoplay,\n} from './autoplay.js';\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\nlet idCounter = 0;\n\n// Generates a unique ID for each tabs instance\nfunction generateUniqueId() {\n  idCounter += 1;\n  return `tabs-${idCounter}`;\n}\n\n// Normalizes a value string to lowercase, hyphenated format\nfunction normalizeValue(value) {\n  if (!value) return '';\n  return value.toLowerCase().replace(/\\s+/g, '-');\n}\n\n// Parses configuration from data attributes on the container\nfunction parseConfig(container) {\n  return {\n    groupName: container.getAttribute(ATTRIBUTES.GROUP_NAME) || null,\n    defaultValue: container.getAttribute(ATTRIBUTES.DEFAULT) || null,\n    orientation:\n      container.getAttribute(ATTRIBUTES.ORIENTATION) || DEFAULTS.ORIENTATION,\n    activateOnFocus:\n      container.getAttribute(ATTRIBUTES.ACTIVATE_ON_FOCUS) !== 'false',\n    loop: container.getAttribute(ATTRIBUTES.LOOP) === 'true',\n    keyboard: container.getAttribute(ATTRIBUTES.KEYBOARD) !== 'false',\n    autoplay: container.getAttribute(ATTRIBUTES.AUTOPLAY) === 'true',\n    autoplayDuration:\n      parseInt(container.getAttribute(ATTRIBUTES.AUTOPLAY_DURATION), 10) ||\n      DEFAULTS.AUTOPLAY_DURATION,\n    autoplayPauseHover:\n      container.getAttribute(ATTRIBUTES.AUTOPLAY_PAUSE_HOVER) !== 'false',\n    autoplayPauseFocus:\n      container.getAttribute(ATTRIBUTES.AUTOPLAY_PAUSE_FOCUS) !== 'false',\n  };\n}\n\n// Emits events via instance callbacks and DOM CustomEvent\nfunction emit(instance, eventName, data = {}) {\n  const { events, container } = instance;\n\n  // Instance event callbacks\n  if (events.has(eventName)) {\n    events.get(eventName).forEach((callback) => {\n      callback.call(instance, { type: eventName, target: instance, ...data });\n    });\n  }\n\n  // DOM CustomEvent for addEventListener compatibility\n  const customEvent = new CustomEvent(`tabs:${eventName}`, {\n    detail: { tabs: instance, ...data },\n    bubbles: true,\n  });\n  container.dispatchEvent(customEvent);\n}\n\n// Checks if user prefers reduced motion\nfunction prefersReducedMotion() {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\n// Reads URL parameter for a given group name\nfunction getUrlParam(groupName) {\n  if (!groupName) return null;\n  const params = new URLSearchParams(window.location.search);\n  return params.get(groupName);\n}\n\n// Updates URL parameter using replaceState\nfunction setUrlParam(groupName, value) {\n  if (!groupName) return;\n  const url = new URL(window.location.href);\n  url.searchParams.set(groupName, value);\n  window.history.replaceState({}, '', url.toString());\n}\n\n// ============================================================================\n// Element Discovery & Validation\n// ============================================================================\n\n// Finds and validates all elements within the tabs container\nfunction findElements(instance) {\n  const { container, id } = instance;\n\n  // Scope to this container to support nested tabs\n  const scopedQuery = (selector) => {\n    return [...container.querySelectorAll(selector)].filter((el) => {\n      return el.closest(SELECTORS.CONTAINER) === container;\n    });\n  };\n\n  // Find triggers and panels\n  const triggers = scopedQuery(SELECTORS.TRIGGER);\n  const panels = scopedQuery(SELECTORS.PANEL);\n\n  if (triggers.length === 0) {\n    console.error(\n      `Tabs ${id}: No triggers found. Expected elements with [data-tabs-trigger-value].`\n    );\n    return false;\n  }\n\n  if (panels.length === 0) {\n    console.error(\n      `Tabs ${id}: No panels found. Expected elements with [data-tabs-panel-value].`\n    );\n    return false;\n  }\n\n  // Build trigger and panel maps\n  const triggerMap = new Map();\n  const panelMap = new Map();\n  let hasErrors = false;\n\n  triggers.forEach((trigger) => {\n    const rawValue = trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n    const value = normalizeValue(rawValue);\n\n    if (!value) {\n      console.error(`Tabs ${id}: Trigger has empty data-tabs-trigger-value.`);\n      hasErrors = true;\n      return;\n    }\n\n    // Warn if trigger is an <a> tag\n    if (trigger.tagName.toLowerCase() === 'a') {\n      console.warn(\n        `Tabs ${id}: Trigger \"${value}\" is an <a> tag. Consider using <button> for better accessibility.`\n      );\n    }\n\n    if (!triggerMap.has(value)) {\n      triggerMap.set(value, []);\n    }\n    triggerMap.get(value).push(trigger);\n  });\n\n  panels.forEach((panel) => {\n    const rawValue = panel.getAttribute(ATTRIBUTES.PANEL_VALUE);\n    const value = normalizeValue(rawValue);\n\n    if (!value) {\n      console.error(`Tabs ${id}: Panel has empty data-tabs-panel-value.`);\n      hasErrors = true;\n      return;\n    }\n\n    panelMap.set(value, panel);\n  });\n\n  // Validate matching\n  triggerMap.forEach((_, value) => {\n    if (!panelMap.has(value)) {\n      console.error(\n        `Tabs ${id}: Trigger value \"${value}\" has no matching panel.`\n      );\n      hasErrors = true;\n    }\n  });\n\n  panelMap.forEach((_, value) => {\n    if (!triggerMap.has(value)) {\n      console.error(\n        `Tabs ${id}: Panel value \"${value}\" has no matching trigger.`\n      );\n      hasErrors = true;\n    }\n  });\n\n  if (hasErrors) return false;\n\n  // Find optional navigation buttons (scoped)\n  const prevBtn = container.querySelector(SELECTORS.PREV_BTN);\n  const nextBtn = container.querySelector(SELECTORS.NEXT_BTN);\n  const playPauseBtn = container.querySelector(SELECTORS.PLAY_PAUSE_BTN);\n\n  // Store references\n  Object.assign(instance, {\n    triggers,\n    panels,\n    triggerMap,\n    panelMap,\n    prevBtn,\n    nextBtn,\n    playPauseBtn,\n  });\n\n  return true;\n}\n\n// ============================================================================\n// Accessibility Setup\n// ============================================================================\n\n// Sets up ARIA attributes for triggers and panels\nfunction setupAccessibility(instance) {\n  const { triggers, panels, id, config } = instance;\n\n  // Set orientation on container\n  instance.container.setAttribute('aria-orientation', config.orientation);\n\n  triggers.forEach((trigger, index) => {\n    const value = normalizeValue(trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE));\n    const triggerId = trigger.id || `${id}-trigger-${value}`;\n    const panelId = `${id}-panel-${value}`;\n\n    trigger.setAttribute('role', 'tab');\n    trigger.id = triggerId;\n    trigger.setAttribute('aria-controls', panelId);\n  });\n\n  panels.forEach((panel) => {\n    const value = normalizeValue(panel.getAttribute(ATTRIBUTES.PANEL_VALUE));\n    const panelId = panel.id || `${id}-panel-${value}`;\n    const triggerId = `${id}-trigger-${value}`;\n\n    panel.setAttribute('role', 'tabpanel');\n    panel.id = panelId;\n    panel.setAttribute('aria-labelledby', triggerId);\n    panel.setAttribute('tabindex', '0');\n  });\n}\n\n// Updates ARIA states when active tab changes\nfunction updateAriaStates(instance) {\n  const { triggers, panels, state } = instance;\n\n  triggers.forEach((trigger) => {\n    const value = normalizeValue(trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE));\n    const isActive = value === state.activeValue;\n\n    trigger.setAttribute('aria-selected', isActive.toString());\n    trigger.setAttribute('tabindex', isActive ? '0' : '-1');\n  });\n\n  panels.forEach((panel) => {\n    const value = normalizeValue(panel.getAttribute(ATTRIBUTES.PANEL_VALUE));\n    const isActive = value === state.activeValue;\n\n    panel.setAttribute('aria-hidden', (!isActive).toString());\n  });\n}\n\n// ============================================================================\n// Keyboard Navigation\n// ============================================================================\n\n// Sets up keyboard navigation for triggers\nfunction setupKeyboardNavigation(instance) {\n  const { container, config } = instance;\n\n  const handleKeydown = (e) => {\n    // Only handle if a trigger within this container has focus\n    const focusedTrigger = document.activeElement;\n    if (\n      !instance.triggers.includes(focusedTrigger) ||\n      focusedTrigger.closest(SELECTORS.CONTAINER) !== container\n    ) {\n      return;\n    }\n\n    const isHorizontal = config.orientation === 'horizontal';\n    const prevKey = isHorizontal ? 'ArrowLeft' : 'ArrowUp';\n    const nextKey = isHorizontal ? 'ArrowRight' : 'ArrowDown';\n\n    switch (e.key) {\n      case prevKey:\n        e.preventDefault();\n        moveFocus(instance, -1);\n        break;\n\n      case nextKey:\n        e.preventDefault();\n        moveFocus(instance, 1);\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        focusTriggerAt(instance, 0);\n        break;\n\n      case 'End':\n        e.preventDefault();\n        focusTriggerAt(instance, instance.triggers.length - 1);\n        break;\n\n      case 'Enter':\n      case ' ':\n        // Only needed if activate-on-focus is false\n        if (!config.activateOnFocus) {\n          e.preventDefault();\n          const value = focusedTrigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n          activate(instance, value);\n        }\n        break;\n    }\n  };\n\n  instance.keyboardHandler = handleKeydown;\n  container.addEventListener('keydown', handleKeydown);\n}\n\n// Moves focus by a given direction (-1 or +1)\nfunction moveFocus(instance, direction) {\n  const { triggers, config, state } = instance;\n  const currentIndex = triggers.indexOf(document.activeElement);\n\n  if (currentIndex === -1) return;\n\n  let nextIndex = currentIndex + direction;\n\n  if (config.loop) {\n    nextIndex = (nextIndex + triggers.length) % triggers.length;\n  } else {\n    nextIndex = Math.max(0, Math.min(nextIndex, triggers.length - 1));\n  }\n\n  triggers[nextIndex].focus();\n\n  // Pause autoplay on keyboard interaction\n  if (state.isAutoplaying) {\n    pauseAutoplay(instance, 'keyboard');\n  }\n\n  // Activate if activate-on-focus is true\n  if (config.activateOnFocus) {\n    const value = triggers[nextIndex].getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n    activate(instance, value);\n  }\n}\n\n// Focuses trigger at a specific index\nfunction focusTriggerAt(instance, index) {\n  const { triggers, config, state } = instance;\n\n  triggers[index].focus();\n\n  if (state.isAutoplaying) {\n    pauseAutoplay(instance, 'keyboard');\n  }\n\n  if (config.activateOnFocus) {\n    const value = triggers[index].getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n    activate(instance, value);\n  }\n}\n\n// ============================================================================\n// Tab Activation\n// ============================================================================\n\n// Determines the initial active value\nfunction determineInitialValue(instance) {\n  const { config, triggerMap, triggers } = instance;\n\n  // Priority 1: URL parameter\n  if (config.groupName) {\n    const urlValue = getUrlParam(config.groupName);\n    if (urlValue) {\n      const normalized = normalizeValue(urlValue);\n      if (triggerMap.has(normalized)) {\n        return normalized;\n      }\n      console.warn(\n        `Tabs ${instance.id}: URL param \"${urlValue}\" doesn't match any trigger.`\n      );\n    }\n  }\n\n  // Priority 2: data-tabs-default attribute\n  if (config.defaultValue) {\n    const normalized = normalizeValue(config.defaultValue);\n    if (triggerMap.has(normalized)) {\n      return normalized;\n    }\n  }\n\n  // Priority 3: First trigger\n  const firstValue = triggers[0].getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n  return normalizeValue(firstValue);\n}\n\n// Activates a tab by its value\nfunction activate(instance, value, options = {}) {\n  const { silent = false, updateUrl = true } = options;\n  const normalized = normalizeValue(value);\n  const { state, config, triggerMap, panelMap, triggers, panels, container } =\n    instance;\n\n  if (!triggerMap.has(normalized)) {\n    console.warn(`Tabs ${instance.id}: Value \"${value}\" not found.`);\n    return false;\n  }\n\n  const previousValue = state.activeValue;\n\n  // Skip if already active\n  if (normalized === previousValue) return false;\n\n  // Update state\n  state.activeValue = normalized;\n\n  // Reset autoplay timer if active\n  if (state.isAutoplaying && !state.isPaused) {\n    state.autoplayStartTime = performance.now();\n  }\n\n  // Update URL\n  if (updateUrl && config.groupName) {\n    setUrlParam(config.groupName, normalized);\n  }\n\n  // Add transitioning class\n  container.classList.add(CLASSES.TRANSITIONING);\n\n  // Update trigger states\n  triggers.forEach((trigger) => {\n    const triggerValue = normalizeValue(\n      trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE)\n    );\n    const isActive = triggerValue === normalized;\n\n    trigger.classList.toggle(CLASSES.ACTIVE, isActive);\n    trigger.classList.toggle(CLASSES.INACTIVE, !isActive);\n\n    // Reset progress on inactive triggers\n    if (!isActive) {\n      trigger.style.setProperty(CSS_VARS.PROGRESS, '0');\n    }\n  });\n\n  // Update panel states\n  panels.forEach((panel) => {\n    const panelValue = normalizeValue(\n      panel.getAttribute(ATTRIBUTES.PANEL_VALUE)\n    );\n    const isActive = panelValue === normalized;\n    const wasActive = panelValue === previousValue;\n\n    // Remove previous transition classes\n    panel.classList.remove(CLASSES.PANEL_ENTERING, CLASSES.PANEL_LEAVING);\n\n    if (isActive) {\n      panel.classList.add(CLASSES.ACTIVE, CLASSES.PANEL_ENTERING);\n      panel.classList.remove(CLASSES.INACTIVE);\n    } else if (wasActive) {\n      panel.classList.add(CLASSES.INACTIVE, CLASSES.PANEL_LEAVING);\n      panel.classList.remove(CLASSES.ACTIVE);\n    } else {\n      panel.classList.add(CLASSES.INACTIVE);\n      panel.classList.remove(CLASSES.ACTIVE);\n    }\n  });\n\n  // Remove transition classes after animation\n  setTimeout(() => {\n    container.classList.remove(CLASSES.TRANSITIONING);\n    panels.forEach((panel) => {\n      panel.classList.remove(CLASSES.PANEL_ENTERING, CLASSES.PANEL_LEAVING);\n    });\n  }, TIMING.TRANSITION_DURATION);\n\n  // Update ARIA states\n  updateAriaStates(instance);\n\n  // Update navigation button states\n  updateButtonStates(instance);\n\n  // Emit change event\n  if (!silent) {\n    emit(instance, 'change', {\n      value: normalized,\n      previousValue,\n    });\n  }\n\n  return true;\n}\n\n// Updates prev/next button disabled states\nfunction updateButtonStates(instance) {\n  const { triggers, prevBtn, nextBtn, config, state } = instance;\n\n  if (!prevBtn && !nextBtn) return;\n  if (config.loop) {\n    // Never disabled when looping\n    prevBtn?.classList.remove(CLASSES.BUTTON_DISABLED);\n    nextBtn?.classList.remove(CLASSES.BUTTON_DISABLED);\n    return;\n  }\n\n  const currentIndex = triggers.findIndex((trigger) => {\n    const value = normalizeValue(trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE));\n    return value === state.activeValue;\n  });\n\n  if (prevBtn) {\n    prevBtn.classList.toggle(CLASSES.BUTTON_DISABLED, currentIndex === 0);\n  }\n  if (nextBtn) {\n    nextBtn.classList.toggle(\n      CLASSES.BUTTON_DISABLED,\n      currentIndex === triggers.length - 1\n    );\n  }\n}\n\n// ============================================================================\n// Event Listeners\n// ============================================================================\n\n// Attaches click handlers to triggers and navigation buttons\nfunction attachEventListeners(instance) {\n  const { triggers, prevBtn, nextBtn, playPauseBtn, state } = instance;\n\n  instance.boundHandlers = {\n    triggerClicks: [],\n    prev: null,\n    next: null,\n    playPause: null,\n  };\n\n  // Trigger click handlers\n  triggers.forEach((trigger) => {\n    const handler = (e) => {\n      e.preventDefault();\n      const value = trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n\n      // Pause autoplay on user interaction\n      if (state.isAutoplaying) {\n        pauseAutoplay(instance, 'user');\n      }\n\n      activate(instance, value);\n    };\n\n    trigger.addEventListener('click', handler);\n    instance.boundHandlers.triggerClicks.push({ trigger, handler });\n  });\n\n  // Prev button\n  if (prevBtn) {\n    instance.boundHandlers.prev = () => instance.prev();\n    prevBtn.addEventListener('click', instance.boundHandlers.prev);\n  }\n\n  // Next button\n  if (nextBtn) {\n    instance.boundHandlers.next = () => instance.next();\n    nextBtn.addEventListener('click', instance.boundHandlers.next);\n  }\n\n  // Play/pause button\n  if (playPauseBtn) {\n    instance.boundHandlers.playPause = () => {\n      if (state.isAutoplaying && !state.isPaused) {\n        instance.pause();\n      } else {\n        instance.play();\n      }\n    };\n    playPauseBtn.addEventListener('click', instance.boundHandlers.playPause);\n    playPauseBtn.setAttribute('aria-pressed', 'false');\n  }\n}\n\n// ============================================================================\n// Cleanup\n// ============================================================================\n\n// Cleans up all event listeners and references\nfunction cleanup(instance) {\n  const { container, prevBtn, nextBtn, playPauseBtn, boundHandlers } = instance;\n\n  // Remove trigger click handlers\n  if (boundHandlers?.triggerClicks) {\n    boundHandlers.triggerClicks.forEach(({ trigger, handler }) => {\n      trigger.removeEventListener('click', handler);\n    });\n  }\n\n  // Remove navigation handlers\n  if (prevBtn && boundHandlers?.prev) {\n    prevBtn.removeEventListener('click', boundHandlers.prev);\n  }\n  if (nextBtn && boundHandlers?.next) {\n    nextBtn.removeEventListener('click', boundHandlers.next);\n  }\n  if (playPauseBtn && boundHandlers?.playPause) {\n    playPauseBtn.removeEventListener('click', boundHandlers.playPause);\n  }\n\n  // Remove keyboard handler\n  if (instance.keyboardHandler) {\n    container.removeEventListener('keydown', instance.keyboardHandler);\n  }\n\n  // Cleanup autoplay\n  cleanupAutoplay(instance);\n\n  // Clear all properties\n  Object.keys(instance).forEach((key) => {\n    instance[key] = null;\n  });\n}\n\n// ============================================================================\n// Initialization\n// ============================================================================\n\n// Initializes a tabs instance\nfunction init(instance) {\n  const { container, config } = instance;\n\n  // Find and validate elements\n  if (!findElements(instance)) {\n    return false;\n  }\n\n  // Setup accessibility\n  setupAccessibility(instance);\n\n  // Determine and activate initial tab\n  const initialValue = determineInitialValue(instance);\n  activate(instance, initialValue, { silent: true, updateUrl: false });\n\n  // Attach event listeners\n  attachEventListeners(instance);\n\n  // Setup keyboard navigation\n  if (config.keyboard) {\n    setupKeyboardNavigation(instance);\n  }\n\n  // Check for reduced motion\n  if (prefersReducedMotion()) {\n    container.classList.add(CLASSES.REDUCED_MOTION);\n  }\n\n  // Setup autoplay if enabled and reduced motion not preferred\n  if (config.autoplay && !prefersReducedMotion()) {\n    setupAutoplay(instance);\n    startAutoplay(instance);\n  }\n\n  // Store instance ID on container for lookup\n  container.setAttribute('data-tabs-id', instance.id);\n\n  return true;\n}\n\n// ============================================================================\n// Tabs Class\n// ============================================================================\n\nexport class Tabs {\n  constructor(container) {\n    this.id = generateUniqueId();\n    this.container = container;\n    this.config = parseConfig(container);\n\n    this.state = {\n      activeValue: null,\n      isAutoplaying: false,\n      isPaused: false,\n      autoplayStartTime: null,\n    };\n\n    this.events = new Map();\n    this.boundHandlers = null;\n    this.keyboardHandler = null;\n    this.autoplay = null;\n\n    // Element references (populated by findElements)\n    this.triggers = [];\n    this.panels = [];\n    this.triggerMap = new Map();\n    this.panelMap = new Map();\n    this.prevBtn = null;\n    this.nextBtn = null;\n    this.playPauseBtn = null;\n\n    const initialized = init(this);\n    if (!initialized) {\n      console.warn(`Tabs ${this.id}: Initialization failed.`);\n    }\n  }\n\n  // Navigates to a tab by value\n  goTo(value) {\n    activate(this, value);\n    return this;\n  }\n\n  // Navigates to the next tab\n  next() {\n    const { triggers, config, state } = this;\n    const currentIndex = triggers.findIndex((trigger) => {\n      const value = normalizeValue(\n        trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE)\n      );\n      return value === state.activeValue;\n    });\n\n    let nextIndex = currentIndex + 1;\n\n    if (config.loop) {\n      nextIndex = nextIndex % triggers.length;\n    } else {\n      nextIndex = Math.min(nextIndex, triggers.length - 1);\n    }\n\n    const nextValue = triggers[nextIndex].getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n    activate(this, nextValue);\n    return this;\n  }\n\n  // Navigates to the previous tab\n  prev() {\n    const { triggers, config, state } = this;\n    const currentIndex = triggers.findIndex((trigger) => {\n      const value = normalizeValue(\n        trigger.getAttribute(ATTRIBUTES.TRIGGER_VALUE)\n      );\n      return value === state.activeValue;\n    });\n\n    let prevIndex = currentIndex - 1;\n\n    if (config.loop) {\n      prevIndex = (prevIndex + triggers.length) % triggers.length;\n    } else {\n      prevIndex = Math.max(prevIndex, 0);\n    }\n\n    const prevValue = triggers[prevIndex].getAttribute(ATTRIBUTES.TRIGGER_VALUE);\n    activate(this, prevValue);\n    return this;\n  }\n\n  // Starts autoplay\n  play() {\n    if (prefersReducedMotion()) return this;\n\n    if (!this.autoplay) {\n      setupAutoplay(this);\n    }\n\n    this.autoplay.pausedByUser = false;\n    startAutoplay(this);\n    return this;\n  }\n\n  // Pauses autoplay\n  pause() {\n    pauseAutoplay(this, 'user');\n    return this;\n  }\n\n  // Re-initializes after DOM changes\n  refresh() {\n    const currentValue = this.state.activeValue;\n    const events = this.events;\n\n    cleanup(this);\n\n    this.config = parseConfig(this.container);\n    this.state = {\n      activeValue: null,\n      isAutoplaying: false,\n      isPaused: false,\n      autoplayStartTime: null,\n    };\n    this.events = events; // Preserve event subscriptions\n    this.boundHandlers = null;\n    this.keyboardHandler = null;\n    this.autoplay = null;\n    this.triggers = [];\n    this.panels = [];\n    this.triggerMap = new Map();\n    this.panelMap = new Map();\n\n    init(this);\n\n    // Try to restore previous active value\n    if (currentValue && this.triggerMap.has(currentValue)) {\n      activate(this, currentValue, { silent: true });\n    }\n\n    return this;\n  }\n\n  // Destroys the instance\n  destroy() {\n    cleanup(this);\n    return null;\n  }\n\n  // Returns the current active value\n  getActiveValue() {\n    return this.state.activeValue;\n  }\n\n  // Subscribes to an event\n  on(event, callback) {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event).push(callback);\n    return this;\n  }\n\n  // Unsubscribes from an event\n  off(event, callback) {\n    if (!this.events.has(event)) return this;\n\n    const callbacks = this.events.get(event);\n    const index = callbacks.indexOf(callback);\n    if (index > -1) {\n      callbacks.splice(index, 1);\n    }\n    return this;\n  }\n\n  // Static method for manual initialization\n  static init(container) {\n    if (typeof container === 'string') {\n      container = document.querySelector(container);\n    }\n    if (!container) {\n      throw new Error('Tabs.init(): Container element not found');\n    }\n    return new Tabs(container);\n  }\n}\n\n// ============================================================================\n// Global Registry & Auto-initialization\n// ============================================================================\n\nconst instances = new Map();\n\n// Auto-initializes all tabs containers\nfunction autoInit() {\n  const containers = document.querySelectorAll(SELECTORS.CONTAINER);\n\n  containers.forEach((container) => {\n    try {\n      const tabs = new Tabs(container);\n      if (tabs.id) {\n        instances.set(tabs.id, tabs);\n      }\n    } catch (error) {\n      console.warn('Tabs auto-initialization failed:', error);\n    }\n  });\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', autoInit);\n} else {\n  autoInit();\n}\n\n// Global API object\nconst TabsAPI = {\n  // Initialize a new instance manually\n  init(selector) {\n    if (!selector) {\n      // Re-run auto-init for any new containers\n      autoInit();\n      return;\n    }\n\n    const container =\n      typeof selector === 'string'\n        ? document.querySelector(selector)\n        : selector;\n\n    if (!container) {\n      throw new Error('Tabs.init(): Container element not found');\n    }\n\n    const tabs = new Tabs(container);\n    if (tabs.id) {\n      instances.set(tabs.id, tabs);\n    }\n    return tabs;\n  },\n\n  // Get instance by ID or element\n  get(idOrElement) {\n    if (typeof idOrElement === 'string') {\n      // Try as ID first\n      if (instances.has(idOrElement)) {\n        return instances.get(idOrElement);\n      }\n      // Try as selector\n      const container = document.querySelector(idOrElement);\n      if (container) {\n        const id = container.getAttribute('data-tabs-id');\n        return id ? instances.get(id) : null;\n      }\n      return null;\n    }\n\n    // Element\n    const id = idOrElement.getAttribute('data-tabs-id');\n    return id ? instances.get(id) : null;\n  },\n\n  // Get all instances\n  getAll() {\n    return Array.from(instances.values());\n  },\n\n  // Destroy instances\n  destroy(selector) {\n    if (!selector) {\n      // Destroy all\n      instances.forEach((tabs) => tabs.destroy());\n      instances.clear();\n      return;\n    }\n\n    const tabs = this.get(selector);\n    if (tabs) {\n      instances.delete(tabs.id);\n      tabs.destroy();\n    }\n  },\n};\n\n// Expose to window\nif (typeof window !== 'undefined') {\n  window.Tabs = TabsAPI;\n}\n"],"names":["SELECTORS","ATTRIBUTES","CLASSES","CSS_VARS","DEFAULTS","TIMING","setupAutoplay","instance","container","config","autoplay","rafId","observer","isVisible","pausedByHover","pausedByFocus","pausedByUser","IntersectionObserver","entries","forEach","entry","isIntersecting","canResume","resumeAutoplay","pauseAutoplay","threshold","observe","autoplayPauseHover","handleMouseEnter","handleMouseLeave","addEventListener","autoplayPauseFocus","handleFocusIn","handleFocusOut","e","contains","relatedTarget","startAutoplay","state","triggerMap","isAutoplaying","isPaused","autoplayStartTime","performance","now","classList","add","remove","playPauseBtn","setAttribute","emitAutoplayEvent","value","activeValue","requestAnimationFrame","tick","elapsed","progress","Math","min","autoplayDuration","activeTriggers","get","trigger","style","setProperty","toString","next","reason","cancelAnimationFrame","eventName","data","events","has","callback","call","type","target","customEvent","CustomEvent","detail","tabs","bubbles","dispatchEvent","idCounter","normalizeValue","toLowerCase","replace","parseConfig","groupName","getAttribute","defaultValue","orientation","activateOnFocus","loop","keyboard","parseInt","prefersReducedMotion","window","matchMedia","matches","moveFocus","direction","triggers","currentIndex","indexOf","document","activeElement","nextIndex","length","max","focus","activate","focusTriggerAt","index","determineInitialValue","urlValue","URLSearchParams","location","search","normalized","console","warn","id","options","silent","updateUrl","panelMap","panels","previousValue","url","URL","href","searchParams","set","history","replaceState","setUrlParam","isActive","toggle","panel","panelValue","wasActive","setTimeout","updateAriaStates","prevBtn","nextBtn","findIndex","updateButtonStates","emit","cleanup","boundHandlers","triggerClicks","handler","removeEventListener","prev","playPause","keyboardHandler","disconnect","cleanupAutoplay","Object","keys","key","init","scopedQuery","selector","querySelectorAll","filter","el","closest","error","Map","hasErrors","tagName","push","_","querySelector","assign","findElements","triggerId","panelId","setupAccessibility","preventDefault","pause","play","attachEventListeners","handleKeydown","focusedTrigger","includes","isHorizontal","prevKey","nextKey","setupKeyboardNavigation","Tabs","constructor","this","goTo","prevIndex","refresh","currentValue","destroy","getActiveValue","on","event","off","callbacks","splice","Error","instances","autoInit","readyState","TabsAPI","idOrElement","getAll","Array","from","values","clear","delete"],"mappings":"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"}