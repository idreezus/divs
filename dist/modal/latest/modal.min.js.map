{"version":3,"file":"modal.min.js","sources":["../../../packages/modal/src/config.js","../../../packages/modal/src/utils.js","../../../packages/modal/src/scroll-lock.js","../../../packages/modal/src/core.js","../../../packages/modal/src/modal.js"],"sourcesContent":["/**\n * Modal configuration constants\n *\n * Organized by type following the component design guidelines:\n * - selectors: DOM query strings\n * - attributes: Data attribute names\n * - classes: CSS class names for state\n * - defaults: Fallback configuration values\n */\n\n// DOM query selectors for querySelectorAll\nexport const selectors = {\n  modal: '[data-modal-value]',\n  trigger: '[data-modal-trigger-value]',\n  close: '[data-modal-close]',\n  closeTemplate: '[data-modal-close-template]',\n};\n\n// Data attribute names for getAttribute/hasAttribute\nexport const attributes = {\n  value: 'data-modal-value',\n  triggerValue: 'data-modal-trigger-value',\n  urlParam: 'data-modal-url-param',\n  scrollLock: 'data-modal-scroll-lock',\n  wrapped: 'data-modal-wrapped',\n  close: 'data-modal-close',\n  closeTemplate: 'data-modal-close-template',\n};\n\n// CSS class names for state management\nexport const classes = {\n  bodyOpen: 'modal-open',\n  closeDefault: 'modal-close-default',\n};\n\n// Default configuration values\nexport const defaults = {\n  scrollLock: true,\n};\n","/**\n * Shared utility functions for the modal library\n */\n\nlet idCounter = 0;\n\n/**\n * Generates a unique ID for each modal instance\n * @returns {string} Unique modal ID (e.g., 'modal-1')\n */\nexport function generateUniqueId() {\n  idCounter += 1;\n  return `modal-${idCounter}`;\n}\n\n/**\n * Normalizes a value string to lowercase, hyphenated format\n * @param {string} value - The value to normalize\n * @returns {string} Normalized value\n */\nexport function normalizeValue(value) {\n  if (!value) return '';\n  return value.toLowerCase().replace(/\\s+/g, '-');\n}\n","/**\n * Scroll lock module for modal dialogs\n *\n * Preserves scroll position when modal opens and restores it when closed.\n * Adds 'modal-open' class to body for CSS scroll lock (user provides CSS).\n *\n * Example user CSS:\n * body.modal-open { overflow: hidden; }\n */\n\nimport { classes } from './config.js';\n\n// Track number of open modals for nested scroll lock\nlet openCount = 0;\nlet scrollY = 0;\n\n/**\n * Locks body scroll when a modal opens\n * Only applies on first modal open (supports multiple open modals)\n */\nexport function lock() {\n  openCount += 1;\n\n  // Only lock on first modal\n  if (openCount === 1) {\n    scrollY = window.scrollY;\n    document.body.classList.add(classes.bodyOpen);\n  }\n}\n\n/**\n * Unlocks body scroll when a modal closes\n * Only restores on last modal close\n */\nexport function unlock() {\n  openCount -= 1;\n\n  // Only unlock when all modals are closed\n  if (openCount <= 0) {\n    openCount = 0;\n    document.body.classList.remove(classes.bodyOpen);\n    window.scrollTo(0, scrollY);\n  }\n}\n","/**\n * Modal core module\n *\n * Main Modal class and lifecycle management built on native <dialog>.\n * Handles initialization, triggers, close buttons, and cleanup.\n */\n\nimport { selectors, attributes, classes, defaults } from './config.js';\nimport { generateUniqueId, normalizeValue } from './utils.js';\nimport { lock, unlock } from './scroll-lock.js';\n\n/**\n * Parses configuration from data attributes\n * @param {HTMLDialogElement} dialog - The dialog element\n * @returns {Object} Parsed configuration\n */\nfunction parseConfig(dialog) {\n  return {\n    scrollLock: dialog.getAttribute(attributes.scrollLock) !== 'false',\n    urlParam: dialog.getAttribute(attributes.urlParam) || null,\n  };\n}\n\n/**\n * Wraps a non-dialog element in a real <dialog>\n * @param {HTMLElement} element - Element with data-modal-value\n * @returns {HTMLDialogElement} The dialog element (original or wrapper)\n */\nfunction ensureDialog(element) {\n  if (element.tagName === 'DIALOG') {\n    return element;\n  }\n\n  const dialog = document.createElement('dialog');\n\n  // Copy ONLY data-modal-* attributes to dialog\n  [...element.attributes].forEach((attr) => {\n    if (attr.name.startsWith('data-modal')) {\n      dialog.setAttribute(attr.name, attr.value);\n    }\n  });\n\n  // Mark as wrapped\n  dialog.setAttribute(attributes.wrapped, '');\n\n  // Move element inside dialog (retains ALL original classes, styles, other attributes)\n  element.replaceWith(dialog);\n  dialog.appendChild(element);\n\n  return dialog;\n}\n\n/**\n * Ensures a close button exists in the modal\n * Injects default or clones from template if not present\n * @param {Object} instance - Modal instance\n */\nfunction ensureCloseButton(instance) {\n  const { dialog } = instance;\n\n  // Check if user provided close button\n  if (dialog.querySelector(selectors.close)) {\n    return;\n  }\n\n  // Check for template anywhere in document\n  const template = document.querySelector(selectors.closeTemplate);\n  let closeBtn;\n\n  if (template) {\n    closeBtn = template.cloneNode(true);\n    closeBtn.removeAttribute(attributes.closeTemplate);\n  } else {\n    closeBtn = document.createElement('button');\n    closeBtn.setAttribute('type', 'button');\n    closeBtn.setAttribute('aria-label', 'Close dialog');\n    closeBtn.className = classes.closeDefault;\n    closeBtn.textContent = 'Ã—';\n  }\n\n  closeBtn.setAttribute(attributes.close, '');\n\n  // Insert after first heading, or as first child\n  const heading = dialog.querySelector('h1, h2, h3, h4, h5, h6');\n  if (heading) {\n    heading.after(closeBtn);\n  } else {\n    dialog.prepend(closeBtn);\n  }\n}\n\n/**\n * Sets up backdrop click to close behavior\n * Uses native closedby=\"any\" if supported, otherwise fallback\n * @param {Object} instance - Modal instance\n */\nfunction setupBackdropClose(instance) {\n  const { dialog } = instance;\n\n  // Use native closedby if supported\n  if ('closedBy' in HTMLDialogElement.prototype) {\n    dialog.closedBy = 'any';\n    return;\n  }\n\n  // Fallback: detect clicks on dialog element itself (backdrop area)\n  const handler = (e) => {\n    if (e.target === dialog) {\n      dialog.close();\n    }\n  };\n\n  dialog.addEventListener('click', handler);\n  instance.boundHandlers.backdropClick = handler;\n}\n\n/**\n * Sets up aria-controls on trigger if not already set\n * @param {HTMLElement} trigger - Trigger element\n * @param {HTMLDialogElement} dialog - Target dialog\n */\nfunction setupTriggerAria(trigger, dialog) {\n  if (!trigger.hasAttribute('aria-controls')) {\n    // Ensure dialog has an ID\n    if (!dialog.id) {\n      dialog.id = `modal-dialog-${Date.now()}`;\n    }\n    trigger.setAttribute('aria-controls', dialog.id);\n  }\n}\n\n/**\n * Finds a modal by its normalized value\n * @param {string} value - Normalized modal value\n * @returns {HTMLDialogElement|null} The dialog element or null\n */\nfunction findModalByValue(value) {\n  const modals = document.querySelectorAll(selectors.modal);\n  for (const modal of modals) {\n    const modalValue = normalizeValue(modal.getAttribute(attributes.value));\n    if (modalValue === value) {\n      return modal;\n    }\n  }\n  return null;\n}\n\n/**\n * Handles trigger click - opens modal, handles replacement\n * @param {HTMLElement} trigger - The clicked trigger\n * @param {string} targetValue - Normalized target modal value\n */\nfunction handleTriggerClick(trigger, targetValue) {\n  // Check if trigger is inside an open modal\n  const parentModal = trigger.closest('dialog[open]');\n\n  if (parentModal && parentModal._modal) {\n    // Close current modal, then open next\n    parentModal.close();\n\n    const targetDialog = findModalByValue(targetValue);\n    if (targetDialog && targetDialog._modal) {\n      targetDialog._modal.open();\n    } else {\n      throw new Error(`Modal not found: \"${targetValue}\"`);\n    }\n  } else {\n    // Normal open from trigger\n    const targetDialog = findModalByValue(targetValue);\n    if (!targetDialog) {\n      throw new Error(`Modal not found: \"${targetValue}\"`);\n    }\n\n    if (targetDialog._modal) {\n      targetDialog._modal.open();\n    }\n  }\n}\n\n/**\n * Attaches event listeners for triggers and close buttons\n * @param {Object} instance - Modal instance\n */\nfunction attachEventListeners(instance) {\n  const { dialog } = instance;\n\n  // Close button listeners\n  const closeButtons = dialog.querySelectorAll(selectors.close);\n  instance.boundHandlers.closeButtons = [];\n\n  closeButtons.forEach((btn) => {\n    const handler = () => dialog.close();\n    btn.addEventListener('click', handler);\n    instance.boundHandlers.closeButtons.push({ btn, handler });\n  });\n\n  // Listen for native close event to handle scroll unlock\n  const closeHandler = () => {\n    instance.state.isOpen = false;\n    if (instance.config.scrollLock) {\n      unlock();\n    }\n    updateUrl(instance, 'close');\n  };\n\n  dialog.addEventListener('close', closeHandler);\n  instance.boundHandlers.close = closeHandler;\n}\n\n/**\n * Updates URL based on modal state\n * @param {Object} instance - Modal instance\n * @param {string} action - 'open' or 'close'\n */\nfunction updateUrl(instance, action) {\n  const { dialog, config } = instance;\n  const paramName = config.urlParam;\n\n  if (!paramName) return;\n\n  const url = new URL(window.location.href);\n\n  if (action === 'open') {\n    url.searchParams.set(paramName, '');\n  } else {\n    url.searchParams.delete(paramName);\n  }\n\n  history.replaceState(null, '', url.toString());\n}\n\n/**\n * Initializes a modal instance\n * @param {Object} instance - Modal instance\n * @returns {boolean} Whether initialization succeeded\n */\nfunction init(instance) {\n  const { dialog, id } = instance;\n\n  // Validate we have a dialog\n  if (!dialog || dialog.tagName !== 'DIALOG') {\n    console.warn(`Modal ${id}: Invalid dialog element`);\n    return false;\n  }\n\n  // Ensure close button exists\n  ensureCloseButton(instance);\n\n  // Setup backdrop close behavior\n  setupBackdropClose(instance);\n\n  // Attach event listeners\n  attachEventListeners(instance);\n\n  return true;\n}\n\n/**\n * Cleans up event listeners\n * @param {Object} instance - Modal instance\n */\nfunction cleanup(instance) {\n  const { dialog, boundHandlers } = instance;\n\n  // Remove close button listeners\n  if (boundHandlers.closeButtons) {\n    boundHandlers.closeButtons.forEach(({ btn, handler }) => {\n      btn.removeEventListener('click', handler);\n    });\n  }\n\n  // Remove close event listener\n  if (boundHandlers.close) {\n    dialog.removeEventListener('close', boundHandlers.close);\n  }\n\n  // Remove backdrop click listener\n  if (boundHandlers.backdropClick) {\n    dialog.removeEventListener('click', boundHandlers.backdropClick);\n  }\n}\n\n/**\n * Modal class\n *\n * Built on native <dialog> element. Handles initialization, triggers,\n * close buttons, scroll lock, and URL integration.\n */\nexport class Modal {\n  constructor(dialog) {\n    this.id = generateUniqueId();\n    this.dialog = dialog;\n    this.value = normalizeValue(dialog.getAttribute(attributes.value));\n    this.config = parseConfig(dialog);\n\n    this.state = {\n      isOpen: false,\n    };\n\n    this.boundHandlers = {};\n\n    const initialized = init(this);\n    if (initialized) {\n      this.dialog._modal = this;\n    } else {\n      console.warn(`Modal ${this.id}: Initialization failed`);\n    }\n  }\n\n  /**\n   * Opens the modal\n   * @returns {Modal} The instance for chaining\n   */\n  open() {\n    const { dialog, state, config } = this;\n\n    // No-op if already open\n    if (state.isOpen) return this;\n\n    // Lock scroll\n    if (config.scrollLock) {\n      lock();\n    }\n\n    dialog.showModal();\n    state.isOpen = true;\n\n    // Update URL\n    updateUrl(this, 'open');\n\n    return this;\n  }\n\n  /**\n   * Closes the modal\n   * @returns {Modal} The instance for chaining\n   */\n  close() {\n    const { dialog, state } = this;\n\n    // close() triggers the 'close' event which handles cleanup\n    if (state.isOpen) {\n      dialog.close();\n    }\n\n    return this;\n  }\n\n  /**\n   * Re-initializes the modal after DOM changes\n   * Also discovers and initializes any new modals\n   * @returns {Modal} The instance for chaining\n   */\n  refresh() {\n    // Clean up current listeners\n    cleanup(this);\n\n    // Re-initialize\n    this.boundHandlers = {};\n    init(this);\n\n    return this;\n  }\n\n  /**\n   * Destroys the modal instance and cleans up\n   */\n  destroy() {\n    cleanup(this);\n\n    // Remove instance reference\n    delete this.dialog._modal;\n\n    // Clear all properties\n    this.dialog = null;\n    this.config = null;\n    this.state = null;\n    this.boundHandlers = null;\n  }\n}\n\n/**\n * Sets up global trigger listeners\n * Called once during auto-init\n */\nexport function setupTriggerListeners() {\n  // Use event delegation on document for all triggers\n  document.addEventListener('click', (e) => {\n    const trigger = e.target.closest(selectors.trigger);\n    if (!trigger) return;\n\n    e.preventDefault();\n\n    const targetValue = normalizeValue(\n      trigger.getAttribute(attributes.triggerValue)\n    );\n\n    // Setup aria-controls if not set\n    const targetDialog = findModalByValue(targetValue);\n    if (targetDialog) {\n      setupTriggerAria(trigger, targetDialog);\n    }\n\n    handleTriggerClick(trigger, targetValue);\n  });\n}\n\n/**\n * Opens modals based on URL parameters\n * Called during auto-init\n */\nexport function openFromUrl() {\n  const params = new URLSearchParams(window.location.search);\n\n  document.querySelectorAll(`[${attributes.urlParam}]`).forEach((dialog) => {\n    const paramName = dialog.getAttribute(attributes.urlParam);\n    if (params.has(paramName) && dialog._modal) {\n      dialog._modal.open();\n    }\n  });\n}\n\n// Export for use in modal.js\nexport { ensureDialog };\n","/**\n * Modal library entry point\n *\n * Auto-initializes all modal elements on DOMContentLoaded.\n * Built on native <dialog> element.\n *\n * @example\n * <!-- Trigger (anywhere in document) -->\n * <button data-modal-trigger-value=\"login\">Open Login</button>\n *\n * <!-- Modal -->\n * <dialog data-modal-value=\"login\">\n *   <button data-modal-close>Close</button>\n *   <h2>Login</h2>\n *   <form>...</form>\n * </dialog>\n */\n\nimport { selectors, attributes } from './config.js';\nimport { Modal, ensureDialog, setupTriggerListeners, openFromUrl } from './core.js';\n\n/**\n * Auto-initializes all modals on the page\n * Called on DOMContentLoaded or immediately if DOM is ready\n */\nfunction autoInit() {\n  // Find all modal elements\n  const modalElements = document.querySelectorAll(selectors.modal);\n\n  modalElements.forEach((element) => {\n    // Skip if already initialized\n    if (element._modal) return;\n\n    try {\n      // Wrap non-dialog elements in <dialog>\n      const dialog = ensureDialog(element);\n\n      // Create modal instance\n      new Modal(dialog);\n    } catch (error) {\n      console.warn('Modal auto-initialization failed:', error);\n    }\n  });\n\n  // Setup global trigger listeners (event delegation)\n  setupTriggerListeners();\n\n  // Check URL for deep-linked modals\n  openFromUrl();\n}\n\n// Execute on DOMContentLoaded or immediately if DOM is already ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', autoInit);\n} else {\n  autoInit();\n}\n\n// Export Modal class for module usage\nexport { Modal };\n"],"names":["selectors","attributes","classes","idCounter","normalizeValue","value","toLowerCase","replace","openCount","scrollY","findModalByValue","modals","document","querySelectorAll","modal","getAttribute","attachEventListeners","instance","dialog","closeButtons","boundHandlers","forEach","btn","handler","close","addEventListener","push","closeHandler","state","isOpen","config","scrollLock","body","classList","remove","window","scrollTo","updateUrl","action","paramName","urlParam","url","URL","location","href","searchParams","set","delete","history","replaceState","toString","init","id","tagName","querySelector","template","closeBtn","cloneNode","removeAttribute","createElement","setAttribute","className","textContent","heading","after","prepend","ensureCloseButton","HTMLDialogElement","prototype","closedBy","e","target","backdropClick","setupBackdropClose","console","warn","cleanup","removeEventListener","Modal","constructor","this","parseConfig","_modal","open","add","showModal","refresh","destroy","setupTriggerListeners","trigger","closest","preventDefault","targetValue","targetDialog","hasAttribute","Date","now","setupTriggerAria","parentModal","Error","handleTriggerClick","autoInit","element","attr","name","startsWith","replaceWith","appendChild","ensureDialog","error","params","URLSearchParams","search","has","openFromUrl","readyState"],"mappings":"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"}