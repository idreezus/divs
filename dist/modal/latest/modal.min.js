/*!
 * Modal v1.0.0
 * A lightweight modal library built on native HTML dialog elements.
 *
 * A part of Divs by Idreezus, a component library
 * divs.idreezus.com
 *
 * (c) 2026 Idrees Isse (https://github.com/idreezus)
 * Released under AGPL-3.0
 */
var Modal=function(t){"use strict";const e="[data-modal-value]",o="[data-modal-trigger-value]",n="[data-modal-close]",a="[data-modal-close-template]",l="data-modal-value",s="data-modal-trigger-value",r="data-modal-url-param",i="data-modal-scroll-lock",c="data-modal-wrapped",d="data-modal-close",u="data-modal-close-template",m="modal-open",h="modal-close-default";let f=0;function g(t){return t?t.toLowerCase().replace(/\s+/g,"-"):""}let b=0,p=0;function v(t){const o=document.querySelectorAll(e);for(const e of o){if(g(e.getAttribute(l))===t)return e}return null}function w(t){const{dialog:e}=t,o=e.querySelectorAll(n);t.boundHandlers.closeButtons=[],o.forEach(o=>{const n=()=>e.close();o.addEventListener("click",n),t.boundHandlers.closeButtons.push({btn:o,handler:n})});const a=()=>{t.state.isOpen=!1,t.config.scrollLock&&(b-=1,b<=0&&(b=0,document.body.classList.remove(m),window.scrollTo(0,p))),A(t,"close")};e.addEventListener("close",a),t.boundHandlers.close=a}function A(t,e){const{dialog:o,config:n}=t,a=n.urlParam;if(!a)return;const l=new URL(window.location.href);"open"===e?l.searchParams.set(a,""):l.searchParams.delete(a),history.replaceState(null,"",l.toString())}function L(t){const{dialog:e,id:o}=t;return e&&"DIALOG"===e.tagName?(function(t){const{dialog:e}=t;if(e.querySelector(n))return;const o=document.querySelector(a);let l;o?(l=o.cloneNode(!0),l.removeAttribute(u)):(l=document.createElement("button"),l.setAttribute("type","button"),l.setAttribute("aria-label","Close dialog"),l.className=h,l.textContent="Ã—"),l.setAttribute(d,"");const s=e.querySelector("h1, h2, h3, h4, h5, h6");s?s.after(l):e.prepend(l)}(t),function(t){const{dialog:e}=t;if("closedBy"in HTMLDialogElement.prototype)return void(e.closedBy="any");const o=t=>{t.target===e&&e.close()};e.addEventListener("click",o),t.boundHandlers.backdropClick=o}(t),w(t),!0):(console.warn(`Modal ${o}: Invalid dialog element`),!1)}function y(t){const{dialog:e,boundHandlers:o}=t;o.closeButtons&&o.closeButtons.forEach(({btn:t,handler:e})=>{t.removeEventListener("click",e)}),o.close&&e.removeEventListener("close",o.close),o.backdropClick&&e.removeEventListener("click",o.backdropClick)}class E{constructor(t){this.id=(f+=1,`modal-${f}`),this.dialog=t,this.value=g(t.getAttribute(l)),this.config=function(t){return{scrollLock:"false"!==t.getAttribute(i),urlParam:t.getAttribute(r)||null}}(t),this.state={isOpen:!1},this.boundHandlers={};L(this)?this.dialog._modal=this:console.warn(`Modal ${this.id}: Initialization failed`)}open(){const{dialog:t,state:e,config:o}=this;return e.isOpen||(o.scrollLock&&(b+=1,1===b&&(p=window.scrollY,document.body.classList.add(m))),t.showModal(),e.isOpen=!0,A(this,"open")),this}close(){const{dialog:t,state:e}=this;return e.isOpen&&t.close(),this}refresh(){return y(this),this.boundHandlers={},L(this),this}destroy(){y(this),delete this.dialog._modal,this.dialog=null,this.config=null,this.state=null,this.boundHandlers=null}}function k(){document.addEventListener("click",t=>{const e=t.target.closest(o);if(!e)return;t.preventDefault();const n=g(e.getAttribute(s)),a=v(n);a&&function(t,e){t.hasAttribute("aria-controls")||(e.id||(e.id=`modal-dialog-${Date.now()}`),t.setAttribute("aria-controls",e.id))}(e,a),function(t,e){const o=t.closest("dialog[open]");if(o&&o._modal){o.close();const t=v(e);if(!t||!t._modal)throw new Error(`Modal not found: "${e}"`);t._modal.open()}else{const t=v(e);if(!t)throw new Error(`Modal not found: "${e}"`);t._modal&&t._modal.open()}}(e,n)})}function S(){document.querySelectorAll(e).forEach(t=>{if(!t._modal)try{const e=function(t){if("DIALOG"===t.tagName)return t;const e=document.createElement("dialog");return[...t.attributes].forEach(t=>{t.name.startsWith("data-modal")&&e.setAttribute(t.name,t.value)}),e.setAttribute(c,""),t.replaceWith(e),e.appendChild(t),e}(t);new E(e)}catch(t){console.warn("Modal auto-initialization failed:",t)}}),k(),function(){const t=new URLSearchParams(window.location.search);document.querySelectorAll(`[${r}]`).forEach(e=>{const o=e.getAttribute(r);t.has(o)&&e._modal&&e._modal.open()})}()}return"loading"===document.readyState?document.addEventListener("DOMContentLoaded",S):S(),t.Modal=E,t}({});
//# sourceMappingURL=modal.min.js.map
